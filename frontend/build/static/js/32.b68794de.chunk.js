"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[32],{9032:(e,o,r)=>{r.r(o),r.d(o,{default:()=>v});var t=r(5043),a=r(6516),s=r(7839),n=r(3862);const i=(e,o)=>{let r;return function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];clearTimeout(r),r=setTimeout(()=>{clearTimeout(r),e(...a)},o)}},l=e=>{const o=new Map;return function(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];const s=JSON.stringify(t);if(o.has(s))return o.get(s);const n=e.apply(undefined,t);return o.set(s,n),n}},c={marks:new Map,start(e){this.marks.set(e,performance.now())},end(e){const o=this.marks.get(e);if(o){const r=performance.now()-o;return console.log(`${e}: ${r.toFixed(2)}ms`),this.marks.delete(e),r}return 0},measure(e,o){this.start(e);const r=o();return this.end(e),r}};new Set;r(7229);var d=r(4344),u=r(579);const h=l(e=>{const o=(e||[]).slice(-5).map(e=>{var o;return(null===(o=e.text)||void 0===o?void 0:o.toLowerCase())||""}).join(" ");return/love|amazing|great|happy|fun|\ud83d\ude0d|\ud83d\ude04|\ud83d\ude0a|\ud83d\ude18|flirt|kiss|cute|hot|babe|sweet/.test(o)?"\ud83d\ude0f":/angry|mad|annoy|hate|\ud83d\ude20|\ud83d\ude21|wtf|ugh/.test(o)?"\ud83d\ude20":/sad|cry|miss|lonely|\ud83d\ude22|\ud83d\ude2d/.test(o)?"\ud83d\ude22":/ok|fine|alright|neutral|meh|\ud83d\ude10/.test(o)?"\ud83d\ude10":"\ud83d\ude04"}),m=l(e=>{var o,r,t,a;const s=(null===(o=e.likes)||void 0===o?void 0:o.length)||0,n=(null===(r=e.personality_tags)||void 0===r?void 0:r.length)||0,i=(null===(t=e.inside_jokes)||void 0===t?void 0:t.length)||0,l=(null===(a=e.previous_messages)||void 0===a?void 0:a.length)||0;let c=2*s+2*n+3*i+Math.min(l,20);return c=Math.min(100,Math.round(c)),c});l(e=>{var o;const r=e.previous_messages||[],t=e.conversation_goals&&e.conversation_goals[0]||"";let a=0;if(t){const e=t.toLowerCase().split(/\s+/).concat(["call","date","meet","agree","yes","sure","let's","hang","see you","video","voice"]),o=r.slice(-10).map(e=>e.text.toLowerCase()).join(" ");a=e.some(e=>o.includes(e))?40:0}const s=r.filter(e=>"Me"!==e.from).slice(-10),n=/love|great|happy|fun|\ud83d\ude0d|\ud83d\ude04|\ud83d\ude0a|\ud83d\ude18|flirt|kiss|cute|hot|babe|sweet|yes|sure|haha|lol|amazing|awesome|excited|enjoy|like|good|nice|thanks|thank you|see you|call|date|meet|voice|video/gi;let i=0;if(s.length){const e=s.map(e=>(e.text.match(n)||[]).length).reduce((e,o)=>e+o,0);i=Math.min(3*e,30)}let l=0;const c=r.map(e=>(e.text.match(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F1E0}-\u{1F1FF}]/gu)||[]).length).reduce((e,o)=>e+o,0),d=(null===(o=e.inside_jokes)||void 0===o?void 0:o.length)||0;l=Math.min(r.length,20)+Math.min(5*d,10)+Math.min(c,10),l=Math.min(l,20);let u=0;if(r.length>1){const e=new Set(r.map(e=>e.timestamp&&e.timestamp.split(" ")[0])).size;u=Math.min(e,10)}let h=a+i+l+u;return h>100&&(h=100),h});function p(e){let{label:o,values:r,onChange:s}=e;const[n,i]=(0,t.useState)("");return(0,u.jsxs)(a.azJ,{sx:{mb:2},children:[(0,u.jsx)(a.o5u,{variant:"subtitle2",children:o}),(0,u.jsx)(a.BJc,{direction:"row",spacing:1,sx:{flexWrap:"wrap",mb:1},children:r.map((e,o)=>(0,u.jsx)(a.vu3,{label:e,onDelete:()=>s(r.filter((e,r)=>r!==o))},o))}),(0,u.jsx)(a.A_L,{size:"small",value:n,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key&&n.trim()&&(s([...r,n.trim()]),i(""))},placeholder:`Add ${o.toLowerCase()}`})]})}function x(e){let{profile:o,open:r,onClose:s,onSave:n}=e;const[i,l]=(0,t.useState)(o);return(0,t.useEffect)(()=>{l(o)},[o]),i?(0,u.jsxs)(a.lGe,{open:r,onClose:s,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"white",color:"black","& .MuiDialogTitle-root":{backgroundColor:"white",color:"black"},"& .MuiDialogContent-root":{backgroundColor:"white",color:"black"},"& .MuiDialogActions-root":{backgroundColor:"white",color:"black"}}},BackdropProps:{sx:{backgroundColor:"rgba(0, 0, 0, 0.2) !important"}},children:[(0,u.jsxs)(a.L33,{sx:{backgroundColor:"white",color:"black"},children:["Edit Profile: ",i.name||i.username||i.user_id]}),(0,u.jsxs)(a.Cff,{sx:{overflowY:"auto",maxHeight:"70vh",pt:3,backgroundColor:"white",color:"black"},children:[(0,u.jsx)(a.A_L,{fullWidth:!0,size:"small",label:"Name",value:i.name||"",onChange:e=>l({...i,name:e.target.value}),sx:{mt:2,mb:2,"& .MuiOutlinedInput-root":{backgroundColor:"white",color:"black"},"& .MuiInputLabel-root":{color:"rgba(0, 0, 0, 0.6)"}},InputLabelProps:{shrink:!0}}),(0,u.jsx)(a.A_L,{fullWidth:!0,label:"Bio",value:i.bio||"",onChange:e=>l({...i,bio:e.target.value}),multiline:!0,rows:2,sx:{mb:2,"& .MuiOutlinedInput-root":{backgroundColor:"white",color:"black"},"& .MuiInputLabel-root":{color:"rgba(0, 0, 0, 0.6)"}}}),(0,u.jsx)(a.A_L,{fullWidth:!0,label:"Age",value:i.age||"",onChange:e=>l({...i,age:e.target.value}),sx:{mb:2,"& .MuiOutlinedInput-root":{backgroundColor:"white",color:"black"},"& .MuiInputLabel-root":{color:"rgba(0, 0, 0, 0.6)"}}}),(0,u.jsx)(a.A_L,{fullWidth:!0,label:"Gender",value:i.gender||"",onChange:e=>l({...i,gender:e.target.value}),sx:{mb:2,"& .MuiOutlinedInput-root":{backgroundColor:"white",color:"black"},"& .MuiInputLabel-root":{color:"rgba(0, 0, 0, 0.6)"}}}),(0,u.jsx)(p,{label:"Likes",values:i.likes||[],onChange:e=>l({...i,likes:e})}),(0,u.jsx)(p,{label:"Personality Tags",values:i.personality_tags||[],onChange:e=>l({...i,personality_tags:e})}),(0,u.jsx)(p,{label:"Inside Jokes",values:i.inside_jokes||[],onChange:e=>l({...i,inside_jokes:e})}),(0,u.jsx)(p,{label:"Conversation Goals",values:i.conversation_goals||[],onChange:e=>l({...i,conversation_goals:e})}),(0,u.jsx)(a.A_L,{fullWidth:!0,label:"Details (JSON)",value:JSON.stringify(i.details||{},null,2),onChange:e=>{try{l({...i,details:JSON.parse(e.target.value)})}catch{}},multiline:!0,minRows:2,sx:{mt:2,"& .MuiOutlinedInput-root":{backgroundColor:"white",color:"black"},"& .MuiInputLabel-root":{color:"rgba(0, 0, 0, 0.6)"}}})]}),(0,u.jsxs)(a.iin,{sx:{backgroundColor:"white",color:"black"},children:[(0,u.jsx)(a.$nd,{onClick:s,sx:{color:"black","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:"Cancel"}),(0,u.jsx)(a.$nd,{variant:"contained",onClick:()=>n(i),sx:{backgroundColor:"#1976d2",color:"white","&:hover":{backgroundColor:"#115293"}},children:"Save"})]})]}):null}function g(e){let{open:o,onClose:r,onImport:n}=e;const[i,l]=(0,t.useState)(null),[c,h]=(0,t.useState)(""),[m,p]=(0,t.useState)(!1),[x,g]=(0,t.useState)(""),[f,b]=(0,t.useState)(null);return(0,u.jsxs)(a.lGe,{open:o,onClose:r,maxWidth:"md",fullWidth:!0,children:[(0,u.jsx)(a.L33,{children:"Import Conversation from JSON"}),(0,u.jsxs)(a.Cff,{children:[(0,u.jsx)(a.o5u,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Upload a JSON file containing conversation messages. The AI will analyze the conversation and extract personality traits, likes, and other preferences."}),(0,u.jsxs)(a.FcD,{severity:"info",sx:{mb:2},children:[(0,u.jsx)("strong",{children:"File Requirements:"}),(0,u.jsx)("br",{}),"\u2022 Maximum size: 10MB",(0,u.jsx)("br",{}),"\u2022 Format: JSON with messages array",(0,u.jsx)("br",{}),"\u2022 Each message should have: from, text, timestamp",(0,u.jsx)("br",{}),"\u2022 Example: ",'[{"from": "Girl", "text": "Hello!", "timestamp": "2024-01-01 12:00"}]']}),(0,u.jsxs)(a.azJ,{sx:{mb:2},children:[(0,u.jsx)("input",{accept:".json",style:{display:"none"},id:"conversation-file",type:"file",onChange:e=>{const o=e.target.files[0];if(o){if(o.size>10485760)return void g("File size must be less than 10MB");const e=new FileReader;e.onload=e=>{try{const r=JSON.parse(e.target.result);l(o),b(r),g("");const t=o.name.replace(".json","").replace(/[_-]/g," ");h(t.charAt(0).toUpperCase()+t.slice(1))}catch(r){g("Invalid JSON file"),l(null),b(null)}},e.readAsText(o)}}}),(0,u.jsx)("label",{htmlFor:"conversation-file",children:(0,u.jsx)(a.$nd,{variant:"outlined",component:"span",startIcon:(0,u.jsx)(s.bK_,{}),fullWidth:!0,sx:{py:2},children:i?i.name:"Choose JSON File"})})]}),(0,u.jsx)(a.A_L,{fullWidth:!0,label:"Profile Name",value:c,onChange:e=>h(e.target.value),sx:{mb:2},placeholder:"Enter a name for this profile"}),f&&(0,u.jsxs)(a.azJ,{sx:{mb:2},children:[(0,u.jsx)(a.o5u,{variant:"subtitle2",gutterBottom:!0,children:"Preview:"}),(0,u.jsxs)(a.azJ,{sx:{maxHeight:200,overflow:"auto",border:"1px solid #e0e0e0",borderRadius:1,p:1,bgcolor:"#f5f5f5"},children:[(0,u.jsx)(a.o5u,{variant:"body2",color:"text.secondary",children:f.messages?`${f.messages.length} messages found`:"No messages array found"}),f.messages&&f.messages.slice(0,3).map((e,o)=>(0,u.jsxs)(a.o5u,{variant:"body2",sx:{fontFamily:"monospace",fontSize:"0.8rem"},children:[e.from,": ",e.text]},o)),f.messages&&f.messages.length>3&&(0,u.jsxs)(a.o5u,{variant:"body2",color:"text.secondary",children:["... and ",f.messages.length-3," more messages"]})]})]}),x&&(0,u.jsx)(a.FcD,{severity:"error",sx:{mb:2},children:x})]}),(0,u.jsxs)(a.iin,{children:[(0,u.jsx)(a.$nd,{onClick:r,disabled:m,children:"Cancel"}),(0,u.jsx)(a.$nd,{variant:"contained",onClick:async()=>{if(i&&c.trim()){p(!0),g("");try{const e=new FormData;e.append("file",i),e.append("profile_name",c);const o=await d.Ay.post("http://localhost:5000/api/import-conversation",e,{headers:{"Content-Type":"multipart/form-data"}});n(o.data),r()}catch(t){var e,o;g((null===(e=t.response)||void 0===e||null===(o=e.data)||void 0===o?void 0:o.error)||"Failed to import conversation")}finally{p(!1)}}else g("Please select a file and enter a profile name")},disabled:m||!i||!c.trim(),startIcon:m?(0,u.jsx)(a.PaH,{size:20}):(0,u.jsx)(s.OMN,{}),children:m?"Analyzing...":"Import & Analyze"})]})]})}function f(e){let{open:o,onClose:r,onConfirm:t,profileName:s}=e;return(0,u.jsxs)(a.lGe,{open:o,onClose:r,maxWidth:"sm",fullWidth:!0,children:[(0,u.jsx)(a.L33,{children:"Delete Profile"}),(0,u.jsxs)(a.Cff,{children:[(0,u.jsxs)(a.o5u,{variant:"body1",children:['Are you sure you want to delete the profile "',s,'"?']}),(0,u.jsx)(a.o5u,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"This action cannot be undone. All conversation history and profile data will be permanently removed."})]}),(0,u.jsxs)(a.iin,{children:[(0,u.jsx)(a.$nd,{onClick:r,children:"Cancel"}),(0,u.jsx)(a.$nd,{onClick:t,color:"error",variant:"contained",children:"Delete Profile"})]})]})}function b(e){let{value:o}=e;return(0,u.jsxs)(a.azJ,{sx:{position:"relative",display:"inline-flex",alignItems:"center"},children:[(0,u.jsx)(a.PaH,{variant:"determinate",value:o,size:48,thickness:5,sx:{color:o>70?"var(--primary-coral)":"var(--accent-blue)"}}),(0,u.jsx)(a.azJ,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,u.jsx)(a.o5u,{variant:"caption",component:"div",color:"text.primary",sx:{fontWeight:700},children:`${Math.round(o)}%`})})]})}const v=function(){const[e,o]=(0,t.useState)([]),[r,l]=(0,t.useState)(null),[p,v]=(0,t.useState)(!1),[j,y]=(0,t.useState)(!1),[C,k]=(0,t.useState)(!1),[w,_]=(0,t.useState)(null),[S,M]=(0,t.useState)(null),[z,A]=(0,t.useState)("compatibility"),[I,W]=(0,t.useState)(""),[E,F]=((0,t.useCallback)(i(e=>{W(e)},300),[]),(0,t.useState)(null)),[P,J]=(0,t.useState)("all"),D=(0,t.useRef)(),[L,N]=(0,t.useState)([]),[O,$]=(0,t.useState)(!1),[R,T]=(0,t.useState)(()=>JSON.parse(localStorage.getItem("starredProfiles")||"[]")),[B,H]=(0,t.useState)(!0),[G,K]=(0,t.useState)(null),[U,Z]=(0,t.useState)(null),[Q,Y]=(0,t.useState)(null),q=e=>{let o;o=R.includes(e)?R.filter(o=>o!==e):[...R,e],T(o),localStorage.setItem("starredProfiles",JSON.stringify(o))},X=e=>{N(o=>o.includes(e)?o.filter(o=>o!==e):[...o,e])},V=()=>$(!1);(0,t.useEffect)(()=>{(async()=>{try{c.start("fetchProfiles"),H(!0);const e=await n.$t.getAll();if(console.log("API response:",e),console.log("Data type:",typeof e),console.log("Is array:",Array.isArray(e)),!Array.isArray(e))return console.error("API returned non-array data:",e),Y("Invalid data format received from server."),void o([]);o(e),c.end("fetchProfiles")}catch(Q){console.error("Failed to fetch profiles:",Q),Y("Failed to load profiles. Please try again."),o([])}finally{H(!1)}})()},[]);const ee=(0,t.useMemo)(()=>{if(!Array.isArray(e))return console.warn("Profiles is not an array:",e),[];let o=[...e];return I.trim()&&(o=o.filter(e=>(e.name||"").toLowerCase().includes(I.toLowerCase()))),P&&"all"!==P&&(o=o.filter(e=>(e.likes||[]).some(e=>e.toLowerCase().includes(P.toLowerCase())))),R.length>0&&(o=[...o.filter(e=>R.includes(e.user_id)),...o.filter(e=>!R.includes(e.user_id))]),o.sort((e,o)=>{var r,t;return"compatibility"===z?m(o)-m(e):"recent"===z?((null===(r=o.previous_messages)||void 0===r?void 0:r.length)||0)-((null===(t=e.previous_messages)||void 0===t?void 0:t.length)||0):"name"===z?(e.name||"").localeCompare(o.name||""):0})},[e,I,P,R,z]),{mainUser:oe,otherProfiles:re}=(0,t.useMemo)(()=>({mainUser:ee.find(e=>e.is_me||"me"===e.user_id),otherProfiles:ee.filter(e=>!(e.is_me||"me"===e.user_id))}),[ee]),te=e=>{A(e),M(null)},[ae,se]=(0,t.useState)(null),[ne,ie]=(0,t.useState)(null),le=()=>{se(null),ie(null)},ce=e=>F(E===e?null:e);function de(e){return e.is_me||"me"===e.user_id?"linear-gradient(135deg, #6c63ff 0%, #ff6b6b 100%)":m(e)>70?"linear-gradient(135deg, #ffb6b9 0%, #ff6b6b 100%)":m(e)<30?"linear-gradient(135deg, #b2ebf2 0%, #6c63ff 100%)":"linear-gradient(135deg, #f8bbd0 0%, #b2ebf2 100%)"}(0,t.useEffect)(()=>{D.current&&D.current.setAttribute("aria-label","Search profiles by name")},[]),(0,t.useRef)(null),(0,t.useRef)(null);const ue=Array.from(new Set(e.flatMap(e=>e.likes||[]))).filter(Boolean);function he(e){const o=e.previous_messages||[],r={};o.forEach(e=>{if(e.timestamp){const o=e.timestamp.split(" ")[0];r[o]=(r[o]||0)+1}});const t=[];let a=null;return o.forEach(e=>{if("Me"===e.from)a=e;else if(a&&e.timestamp&&a.timestamp){const o=new Date(a.timestamp).getTime(),r=new Date(e.timestamp).getTime();isNaN(o)||isNaN(r)||t.push(Math.abs(r-o)/6e4),a=null}}),{days:r,avgResponse:t.length?Math.round(t.reduce((e,o)=>e+o,0)/t.length):null,total:o.length}}const me=(0,t.memo)(e=>{let{profile:o,isExpanded:r,onExpand:t,onStar:n,onCompare:i,starred:l,selectedForCompare:c,loading:d,openMenu:p}=e;if(d)return(0,u.jsx)(a.azJ,{sx:{breakInside:"avoid",mb:3,width:"100%",display:"inline-block"},children:(0,u.jsx)(a.ZpM,{sx:{minHeight:180,mb:2,boxShadow:3,borderRadius:3},children:(0,u.jsxs)(a.Wux,{children:[(0,u.jsx)(a.EAD,{variant:"circular",width:44,height:44}),(0,u.jsx)(a.EAD,{variant:"text",width:"60%",height:32}),(0,u.jsx)(a.EAD,{variant:"rectangular",width:"100%",height:24,sx:{my:1}}),(0,u.jsx)(a.EAD,{variant:"rectangular",width:"100%",height:16})]})})});h(o.previous_messages||[]);const x=m(o),g=function(e,o){return o?{minWidth:380,maxWidth:380,minHeight:260,maxHeight:"none"}:{minWidth:380,maxWidth:380,minHeight:260,maxHeight:260}}(0,r),{topEmoji:f,topWord:v}=(he(o),function(e){var o,r;const t=(e||[]).filter(e=>"Me"!==e.from).map(e=>e.text).join(" "),a=t.match(/[\p{Emoji}]/gu)||[],s={};a.forEach(e=>{s[e]=(s[e]||0)+1});const n=(null===(o=Object.entries(s).sort((e,o)=>o[1]-e[1])[0])||void 0===o?void 0:o[0])||"",i=t.toLowerCase().match(/\b\w{3,}\b/g)||[],l={};return i.forEach(e=>{l[e]=(l[e]||0)+1}),{topEmoji:n,topWord:(null===(r=Object.entries(l).sort((e,o)=>o[1]-e[1])[0])||void 0===r?void 0:r[0])||""}}(o.previous_messages));return(0,u.jsx)(a.azJ,{sx:{breakInside:"avoid",mb:3,width:"100%",display:"inline-block",transition:"box-shadow 0.3s, transform 0.3s, opacity 0.5s",opacity:d?.5:1,position:"relative"},children:(0,u.jsx)(a.ZpM,{sx:{...g,height:r?"auto":260,mb:2,boxShadow:3,background:de(o),color:x>70?"white":"var(--text-primary)",border:x>70?"2px solid var(--primary-coral)":"1px solid #e0e0e0",position:"relative",overflow:"visible",transition:"box-shadow 0.3s, transform 0.3s","&:hover, &:focus":{boxShadow:8,transform:"translateY(-4px) scale(1.03)",outline:"2px solid var(--accent-blue)"}},tabIndex:0,"aria-label":`Profile: ${o.name}`,children:(0,u.jsxs)(a.Wux,{sx:{pb:6,position:"relative",minHeight:180},children:[(0,u.jsxs)(a.azJ,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,u.jsx)(a.K0,{"aria-label":l?"Unstar profile":"Star profile",onClick:()=>n(o.user_id),color:l?"warning":"default",sx:{"&:hover":{backgroundColor:"rgba(102, 126, 234, 0.08)",color:l?"warning.main":"inherit"}},children:(0,u.jsx)(s.FEq,{})}),(0,u.jsx)(a.euF,{sx:{mr:2,width:44,height:44,fontSize:22,bgcolor:x>70?"white":"var(--accent-blue)",color:x>70?"var(--accent-blue)":"white",boxShadow:2,transition:"transform 0.3s","&:hover":{transform:"scale(1.1)"}},children:o.name?o.name[0]:"?"}),(0,u.jsx)(a.o5u,{variant:"h6",sx:{fontWeight:700,flex:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:o.name||o.username||o.user_id}),(0,u.jsx)(a.m_M,{title:"Mood",children:(0,u.jsx)("span",{style:{fontSize:24,marginLeft:8},children:h(o.previous_messages||[])})}),(0,u.jsxs)(a.azJ,{sx:{display:"flex",alignItems:"center",ml:1},children:[(0,u.jsx)(a.m_M,{title:c?"Remove from comparison":"Select for comparison",children:(0,u.jsxs)(a.K0,{"aria-label":"Select for comparison",onClick:()=>i(o.user_id),size:"small",sx:{color:c?"primary.main":"inherit","&:hover":{backgroundColor:"rgba(102, 126, 234, 0.08)",color:c?"primary.main":"inherit"}},children:[(0,u.jsx)("input",{type:"checkbox",checked:c,readOnly:!0,style:{display:"none"}}),(0,u.jsx)(s.MW_,{fontSize:"small"})]})}),(0,u.jsx)(a.K0,{"aria-label":"More actions",onClick:e=>p(e.currentTarget,o),size:"small",sx:{"&:hover":{backgroundColor:"rgba(102, 126, 234, 0.08)",color:"inherit"}},children:(0,u.jsx)(s.DQM,{})})]})]}),(0,u.jsxs)(a.BJc,{direction:"row",spacing:1,sx:{mb:1,flexWrap:"wrap"},children:[o.likes&&o.likes[0]&&(0,u.jsx)(a.vu3,{label:o.likes[0],color:"secondary",size:"small"}),o.personality_tags&&o.personality_tags[0]&&(0,u.jsx)(a.vu3,{label:o.personality_tags[0],color:"primary",size:"small"})]}),(0,u.jsx)(a.o5u,{variant:"body2",sx:{opacity:.8,mb:1,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:o.bio||"No bio set."}),(0,u.jsxs)(a.azJ,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[(0,u.jsx)(b,{value:x}),(0,u.jsx)(a.o5u,{variant:"caption",sx:{fontWeight:600},children:"Compatibility"})]}),(0,u.jsx)(a.azJ,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:1},children:o.conversation_goals&&o.conversation_goals[0]&&(0,u.jsx)(a.vu3,{label:o.conversation_goals[0],color:"success",size:"small"})}),(0,u.jsxs)(a.o5u,{variant:"caption",sx:{color:"var(--text-secondary)",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",display:"block"},children:["Relationship Status: ",x>70?"Strong":x>30?"Developing":"New"]}),(0,u.jsx)(a.K0,{onClick:()=>t(o.user_id),"aria-expanded":r,"aria-controls":`profile-details-${o.user_id}`,sx:{position:"absolute",right:8,bottom:8,zIndex:2,bgcolor:"rgba(255,255,255,0.7)",boxShadow:1,transition:"bgcolor 0.2s","&:hover":{bgcolor:"rgba(255,255,255,0.9)"}},size:"small",children:r?(0,u.jsx)(s.gb2,{}):(0,u.jsx)(s.COR,{})}),(0,u.jsxs)(a.azJ,{id:`profile-details-${o.user_id}`,sx:{maxHeight:r?320:0,overflowY:r?"auto":"hidden",overflowX:"hidden",transition:"max-height 0.4s cubic-bezier(0.4,0,0.2,1)",opacity:r?1:0,pointerEvents:r?"auto":"none",mt:r?2:0},children:[(0,u.jsx)(a.o5u,{variant:"subtitle2",sx:{mb:1},children:"Quick Facts"}),(0,u.jsxs)(a.o5u,{variant:"body2",sx:{mb:1},children:["Age: ",o.age||"N/A"," | Gender: ",o.gender||"N/A"]}),(0,u.jsx)(a.o5u,{variant:"subtitle2",sx:{mb:1},children:"Interests"}),o.likes&&o.likes[0]&&(0,u.jsx)(a.vu3,{label:o.likes[0],color:"secondary",size:"small",sx:{mb:1}}),(0,u.jsx)(a.o5u,{variant:"subtitle2",sx:{mb:1},children:"Personality"}),o.personality_tags&&o.personality_tags[0]&&(0,u.jsx)(a.vu3,{label:o.personality_tags[0],color:"primary",size:"small",sx:{mb:1}}),(0,u.jsx)(a.o5u,{variant:"subtitle2",sx:{mb:1},children:"Inside Joke"}),o.inside_jokes&&o.inside_jokes[0]&&(0,u.jsx)(a.vu3,{label:o.inside_jokes[0],color:"info",size:"small",sx:{mb:1}}),(0,u.jsx)(a.o5u,{variant:"subtitle2",sx:{mb:1},children:"Goal"}),o.conversation_goals&&o.conversation_goals[0]&&(0,u.jsx)(a.vu3,{label:o.conversation_goals[0],color:"success",size:"small",sx:{mb:1}}),(0,u.jsx)(a.azJ,{sx:{display:"flex",gap:1,mt:2},children:(0,u.jsx)(a.$nd,{variant:"outlined",size:"small",onClick:()=>(e=>{const o="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,2)),r=document.createElement("a");r.setAttribute("href",o),r.setAttribute("download",`${e.name||e.user_id}.json`),document.body.appendChild(r),r.click(),r.remove()})(o),"aria-label":"Export profile",children:"Export"})})]})]})})})}),pe=(e,o)=>{K(e),Z(o)},xe=()=>{K(null),Z(null)};return(0,u.jsxs)(a.azJ,{sx:{p:{xs:1,md:3},maxWidth:1400,mx:"auto",position:"relative"},children:[(0,u.jsxs)(a.azJ,{sx:{position:"sticky",top:0,zIndex:10,display:"flex",alignItems:"center",gap:2,mb:3,bgcolor:"rgba(255,255,255,0.7)",backdropFilter:"blur(8px)",borderRadius:2,px:2,py:1,boxShadow:1},children:[(0,u.jsx)(a.o5u,{variant:"h4",sx:{flex:1},children:"Profiles"}),(0,u.jsx)(a.A_L,{inputRef:D,value:I,onChange:e=>W(e.target.value),placeholder:"Search by name",size:"small",sx:{minWidth:180},inputProps:{"aria-label":"Search profiles by name"}}),(0,u.jsxs)(a.A_L,{select:!0,value:P,onChange:e=>J(e.target.value),size:"small",sx:{minWidth:160},displayEmpty:!0,inputProps:{"aria-label":"Filter by interest"},children:[(0,u.jsx)(a.Drp,{value:"all",children:"All Interests"}),ue.map((e,o)=>(0,u.jsx)(a.Drp,{value:e,children:e},o))]}),(0,u.jsx)(a.$nd,{startIcon:(0,u.jsx)(s.L0f,{}),onClick:e=>M(e.currentTarget),variant:"outlined",sx:{fontWeight:600},children:"Sort"}),(0,u.jsxs)(a.$nd,{variant:"outlined",color:"secondary",disabled:L.length<2,onClick:()=>$(!0),sx:{ml:1},children:["Compare (",L.length,")"]}),(0,u.jsxs)(a.W1t,{anchorEl:S,open:Boolean(S),onClose:()=>M(null),PaperProps:{sx:{"& .MuiMenuItem-root":{"&:hover":{backgroundColor:"rgba(102, 126, 234, 0.08)",color:"inherit"}}}},children:[(0,u.jsx)(a.Drp,{onClick:()=>te("compatibility"),sx:{"&:hover":{backgroundColor:"rgba(102, 126, 234, 0.08) !important",color:"inherit !important"}},children:"Most Compatible"}),(0,u.jsx)(a.Drp,{onClick:()=>te("recent"),sx:{"&:hover":{backgroundColor:"rgba(102, 126, 234, 0.08) !important",color:"inherit !important"}},children:"Most Recent"}),(0,u.jsx)(a.Drp,{onClick:()=>te("name"),sx:{"&:hover":{backgroundColor:"rgba(102, 126, 234, 0.08) !important",color:"inherit !important"}},children:"A-Z Name"})]})]}),oe&&(0,u.jsx)(a.azJ,{sx:{mb:4},children:(0,u.jsx)(me,{profile:oe,isExpanded:E===oe.user_id,onExpand:ce,onStar:q,onCompare:X,starred:R.includes(oe.user_id),selectedForCompare:L.includes(oe.user_id),loading:!1,openMenu:pe})}),(0,u.jsx)(a.azJ,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"1fr 1fr 1fr"},gap:3,width:"100%",pb:8},children:B?Array.from({length:6}).map((e,o)=>(0,u.jsx)(me,{loading:!0},o)):re.map(e=>(0,u.jsx)(me,{profile:e,isExpanded:E===e.user_id,onExpand:ce,onStar:q,onCompare:X,starred:R.includes(e.user_id),selectedForCompare:L.includes(e.user_id),loading:!1,openMenu:pe},e.user_id))}),(0,u.jsx)(a.sKx,{color:"primary","aria-label":"Add New Profile",onClick:()=>y(!0),sx:{position:"fixed",bottom:32,right:32,zIndex:1202,boxShadow:6,transition:"transform 0.3s","&:hover":{transform:"scale(1.08)"}},children:(0,u.jsx)(s.OMN,{})}),(0,u.jsxs)(a.W1t,{anchorEl:ae,open:Boolean(ae),onClose:le,PaperProps:{sx:{"& .MuiMenuItem-root":{"&:hover":{backgroundColor:"rgba(102, 126, 234, 0.08)",color:"inherit"}}}},children:[(0,u.jsxs)(a.Drp,{onClick:()=>{v(!0),le()},sx:{"&:hover":{backgroundColor:"rgba(102, 126, 234, 0.08) !important",color:"inherit !important"}},children:[(0,u.jsx)(s.ffu,{fontSize:"small",sx:{mr:1}}),"Edit Profile"]}),(0,u.jsxs)(a.Drp,{onClick:()=>{le()},sx:{"&:hover":{backgroundColor:"rgba(102, 126, 234, 0.08) !important",color:"inherit !important"}},children:[(0,u.jsx)(s.QBZ,{fontSize:"small",sx:{mr:1}}),"Quick Message"]}),(0,u.jsxs)(a.Drp,{onClick:()=>{le()},sx:{"&:hover":{backgroundColor:"rgba(102, 126, 234, 0.08) !important",color:"inherit !important"}},children:[(0,u.jsx)(s.MW_,{fontSize:"small",sx:{mr:1}}),"Compare"]}),(0,u.jsxs)(a.Drp,{onClick:()=>{k(!0),le()},sx:{color:"error.main","&:hover":{backgroundColor:"rgba(244, 67, 54, 0.08) !important",color:"error.main !important"}},children:[(0,u.jsx)(s.epd,{fontSize:"small",sx:{mr:1}}),"Delete"]})]}),(0,u.jsx)(x,{profile:r,open:p,onClose:()=>v(!1),onSave:async e=>{e.is_me||"me"===e.user_id?await d.Ay.put("http://localhost:5000/api/user",e):await d.Ay.put(`http://localhost:5000/api/profiles/${e.user_id}`,e);const r=await d.Ay.get("http://localhost:5000/api/profiles");o(r.data),v(!1)}}),(0,u.jsx)(g,{open:j,onClose:()=>y(!1),onImport:async e=>{const r=await d.Ay.get("http://localhost:5000/api/profiles");o(r.data)}}),(0,u.jsx)(f,{open:C,onClose:()=>k(!1),onConfirm:async()=>{if(w)try{if(w.is_me||"me"===w.user_id)return void alert("Cannot delete your own profile");await d.Ay.delete(`http://localhost:5000/api/profiles/${w.user_id}`);const e=await d.Ay.get("http://localhost:5000/api/profiles");o(e.data),k(!1),_(null)}catch(Q){console.error("Error deleting profile:",Q),alert("Failed to delete profile")}},profileName:(null===w||void 0===w?void 0:w.name)||(null===w||void 0===w?void 0:w.username)||(null===w||void 0===w?void 0:w.user_id)||"Unknown"}),(0,u.jsxs)(a.lGe,{open:O,onClose:V,maxWidth:"md",fullWidth:!0,children:[(0,u.jsx)(a.L33,{children:"Profile Comparison"}),(0,u.jsx)(a.Cff,{children:(0,u.jsx)(a.azJ,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:L.map(o=>{const r=e.find(e=>e.user_id===o);if(!r)return null;const t=he(r);return(0,u.jsxs)(a.ZpM,{sx:{minWidth:220,flex:1,p:2},children:[(0,u.jsx)(a.o5u,{variant:"h6",children:r.name}),(0,u.jsxs)(a.o5u,{variant:"body2",children:["Compatibility: ",m(r),"%"]}),(0,u.jsxs)(a.o5u,{variant:"body2",children:["Total Messages: ",t.total]}),(0,u.jsxs)(a.o5u,{variant:"body2",children:["Avg. Response: ",t.avgResponse?`${t.avgResponse} min`:"N/A"]})]},o)})})}),(0,u.jsx)(a.iin,{children:(0,u.jsx)(a.$nd,{onClick:V,children:"Close"})})]}),(0,u.jsxs)(a.W1t,{anchorEl:G,open:Boolean(G),onClose:xe,PaperProps:{sx:{"& .MuiMenuItem-root":{"&:hover":{backgroundColor:"rgba(102, 126, 234, 0.08)",color:"inherit"}}}},children:[(0,u.jsx)(a.Drp,{onClick:()=>{l(U),v(!0),xe()},sx:{"&:hover":{backgroundColor:"rgba(102, 126, 234, 0.08) !important",color:"inherit !important"}},children:"Edit"}),U&&!U.is_me&&"me"!==U.user_id&&(0,u.jsx)(a.Drp,{onClick:()=>{_(U),k(!0),xe()},sx:{color:"error.main","&:hover":{backgroundColor:"rgba(244, 67, 54, 0.08) !important",color:"error.main !important"}},children:"Delete"})]})]})}}}]);
//# sourceMappingURL=32.b68794de.chunk.js.map