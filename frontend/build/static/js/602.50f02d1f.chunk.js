"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[602],{1602:(e,l,a)=>{a.r(l),a.d(l,{default:()=>j});var s=a(5043),o=a(6516),t=a(9817),n=a(3201),r=a(7347),i=a(5272),c=a(64),d=a(1773),p=a(2672),u=a(3683),g=a(2950),x=a(5362),h=a(9302),m=a(7002),v=a(4344),b=a(579);const f=[{value:"flirty",label:"Flirty"},{value:"friendly",label:"Friendly"},{value:"serious",label:"Serious"},{value:"custom",label:"Custom..."}],y=[{value:"get_date",label:"Get a date"},{value:"keep_friendly",label:"Keep it friendly"},{value:"just_chat",label:"Just chat"},{value:"custom",label:"Custom..."}],j=()=>{const[e,l]=(0,s.useState)(null),[a,j]=(0,s.useState)(!1),[z,k]=(0,s.useState)(!1),[S,C]=(0,s.useState)(!1),[A,N]=(0,s.useState)([]),[I,w]=(0,s.useState)([]),[D,J]=(0,s.useState)(""),[R,G]=(0,s.useState)("flirty"),[B,_]=(0,s.useState)(""),[F,T]=(0,s.useState)("just_chat"),[L,W]=(0,s.useState)(""),[E,O]=(0,s.useState)({open:!1,message:"",type:"info",icon:null}),[K,P]=(0,s.useState)([]),[M,U]=(0,s.useState)(null),[$,H]=(0,s.useState)(""),[Y,q]=(0,s.useState)(null),[Z,Q]=(0,s.useState)(null),V=(0,s.useRef)(),X=function(e){O({open:!0,message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",icon:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}),clearTimeout(V.current),V.current=setTimeout(()=>O({...E,open:!1}),3500)},ee=e=>{U(e),H(I[e].text)},le=()=>{const e=[...I];e[M]={...e[M],text:$},w(e),U(null),H(""),X('Message updated! Click "Regenerate Replies" to get new AI suggestions.',"success")},ae=()=>{U(null),H("")},se=e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key&&ae():(e.preventDefault(),le())},oe=(e,l)=>{q(l),e.dataTransfer.effectAllowed="move"},te=()=>{Q(null)};return(0,b.jsx)(o.azJ,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"none"},children:(0,b.jsxs)(o.azJ,{className:"glass-card",sx:{width:"100%",maxWidth:900,mx:"auto",mt:6,mb:6},children:[(0,b.jsx)(o.o5u,{className:"glass-section-header",sx:{fontSize:28,fontWeight:600,mb:3},children:"Photo AI Assistant"}),(0,b.jsxs)("form",{onSubmit:async l=>{if(l.preventDefault(),!e)return void J("Please upload a photo.");C(!0),J(""),N([]),w([]),k(!1);const a=new FormData;a.append("photo",e),a.append("tone","custom"===R?B:R),a.append("goal","custom"===F?L:F);try{const e=await v.Ay.post("https://3e79a6ace678.ngrok-free.app/api/photo-ai-response",a,{headers:{"Content-Type":"multipart/form-data"}}),{conversation:l,reply_1:s,reply_2:o,reply_3:t}=e.data;console.log("=== ORIGINAL PHOTO ANALYSIS DEBUGGING ==="),console.log("Frontend received:",{reply_1:s,reply_2:o,reply_3:t}),console.log("Full original response data:",e.data),console.log("Original Reply 1 check:",s,"Type:",typeof s,"Length:",null===s||void 0===s?void 0:s.length,"Boolean:",Boolean(s)),console.log("Original Reply 2 check:",o,"Type:",typeof o,"Length:",null===o||void 0===o?void 0:o.length,"Boolean:",Boolean(o)),console.log("Original Reply 3 check:",t,"Type:",typeof t,"Length:",null===t||void 0===t?void 0:t.length,"Boolean:",Boolean(t)),console.log("Raw original array before filter:",[s,o,t]);const n=[s,o,t].filter(Boolean);console.log("Filtered replies:",n),console.log("Number of original filtered replies:",n.length),console.log("=== END ORIGINAL DEBUGGING ==="),w(l||[]),N(n),k(!0)}catch(t){var s,o;J((null===(s=t.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.error)||"Failed to get AI responses")}finally{C(!1)}},style:{display:"flex",flexWrap:"wrap",gap:24,alignItems:"flex-end",marginBottom:32},children:[(0,b.jsxs)(o.MJN,{fullWidth:!0,className:"glass-select",sx:{minWidth:180,flex:1},children:[(0,b.jsx)(o.l1Y,{id:"tone-label",children:"Tone"}),(0,b.jsx)(o.l6P,{labelId:"tone-label",value:R,label:"Tone",onChange:e=>G(e.target.value),children:f.map(e=>(0,b.jsx)(o.Drp,{value:e.value,children:e.label},e.value))})]}),"custom"===R&&(0,b.jsx)(o.A_L,{fullWidth:!0,label:"Custom Tone",value:B,onChange:e=>_(e.target.value),sx:{flex:1}}),(0,b.jsxs)(o.MJN,{fullWidth:!0,className:"glass-select",sx:{minWidth:200,flex:2},children:[(0,b.jsx)(o.l1Y,{id:"goal-label",children:"Conversation Goal"}),(0,b.jsx)(o.l6P,{labelId:"goal-label",value:F,label:"Conversation Goal",onChange:e=>T(e.target.value),children:y.map(e=>(0,b.jsx)(o.Drp,{value:e.value,children:e.label},e.value))})]}),"custom"===F&&(0,b.jsx)(o.A_L,{fullWidth:!0,label:"Custom Conversation Goal",value:L,onChange:e=>W(e.target.value),sx:{flex:2}}),(0,b.jsxs)(o.$nd,{variant:"contained",component:"label",className:"glass-btn",sx:{minWidth:180,height:48,mb:0},children:["Upload Photo",(0,b.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:e=>{const a=e.target.files[0];a&&(l(a),j(!0),k(!1),J(""),N([]),w([]))}})]}),(0,b.jsx)(o.$nd,{type:"submit",variant:"contained",className:"glass-btn",disabled:S||!e,sx:{minWidth:180,height:48,mb:0,position:"relative"},children:S?(0,b.jsx)(o.PaH,{size:24,sx:{color:"var(--accent-blue)"}}):"Analyze Photo & Get AI Replies"})]}),S&&(0,b.jsx)(o.hZv,{sx:{mb:2,borderRadius:2}}),(0,b.jsx)(o.qb_,{open:E.open,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:()=>O({...E,open:!1}),autoHideDuration:3500,className:"glass-toast",sx:{top:"80px !important"},children:(0,b.jsxs)(o.azJ,{sx:{display:"flex",alignItems:"center",gap:1},children:[E.icon||(0,b.jsx)(r.A,{sx:{color:"var(--accent-blue)"}}),(0,b.jsx)(o.o5u,{sx:{fontSize:16,color:"var(--primary-text)"},children:E.message})]})}),D&&(0,b.jsxs)(o.azJ,{className:"glass-toast",sx:{background:"rgba(245, 158, 11, 0.15)",border:"1px solid var(--warning)",color:"var(--warning)",mb:2},children:[(0,b.jsx)(r.A,{sx:{color:"var(--warning)"}})," ",D]}),(I.length>0||A.length>0)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(o.azJ,{className:"glass-card",sx:{p:3,mb:3,mt:3,background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px"},children:[(0,b.jsxs)(o.azJ,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,b.jsx)(o.o5u,{className:"glass-section-header",children:"Conversation Analysis"}),(0,b.jsx)(o.$nd,{variant:"outlined",size:"small",startIcon:(0,b.jsx)(g.A,{}),onClick:()=>{w([...I,{from:"Girl",text:"New message..."}]),setTimeout(()=>{ee(I.length)},100)},sx:{color:"var(--accent-blue)",borderColor:"var(--accent-blue)"},children:"Add Message"})]}),(0,b.jsx)(o.azJ,{className:"glass-chat",children:I.map((e,l)=>{var a;const s="string"===typeof e.text?e.text:(null===(a=e.text)||void 0===a?void 0:a.text)||"",t="girl"===e.from.toLowerCase(),n=t?"#ec4899":"#3B82F6",r=t?"Girl":"Boy",i=M===l,c=Y===l,g=Z===l&&null!==Y&&Y!==l;return(0,b.jsxs)(o.azJ,{children:[g&&(0,b.jsx)(o.azJ,{sx:{height:"2px",background:"var(--accent-blue)",borderRadius:"1px",mb:1,boxShadow:"0 0 8px var(--accent-blue)"}}),(0,b.jsxs)(o.azJ,{sx:{display:"flex",alignItems:"flex-start",mb:2,position:"relative",gap:1,opacity:c?.3:1,transition:"opacity 0.2s"},onDragOver:e=>((e,l)=>{e.preventDefault(),e.dataTransfer.dropEffect="move",Q(l)})(e,l),onDragLeave:te,onDrop:e=>((e,l)=>{if(e.preventDefault(),null===Y)return;const a=[...I],s=a[Y];a.splice(Y,1),a.splice(l,0,s),w(a),q(null),Q(null),X("Message reordered!","success")})(e,l),children:[t&&(0,b.jsx)(o.azJ,{sx:{display:"flex",alignItems:"center",mt:1,opacity:.5,"&:hover":{opacity:1},cursor:c?"grabbing":"grab"},draggable:!0,onDragStart:e=>oe(e,l),children:(0,b.jsx)(m.A,{sx:{fontSize:16,color:"var(--primary-text)"}})}),(0,b.jsxs)(o.azJ,{sx:{display:"flex",flexDirection:"column",alignItems:t?"flex-start":"flex-end",flex:1},children:[(0,b.jsxs)(o.azJ,{sx:{display:"flex",alignItems:"center",mb:.5,gap:1},children:[(0,b.jsx)(o.azJ,{sx:{width:16,height:16,borderRadius:"50%",background:n,boxShadow:"0 1px 4px rgba(0,0,0,0.12)"}}),(0,b.jsx)(o.o5u,{sx:{fontSize:14,fontWeight:500,color:n,opacity:.85},children:r})]}),(0,b.jsxs)(o.azJ,{sx:{position:"relative",display:"flex",alignItems:"center",gap:1},children:[i?(0,b.jsx)(o.A_L,{multiline:!0,value:$,onChange:e=>H(e.target.value),onKeyDown:se,autoFocus:!0,sx:{"& .MuiOutlinedInput-root":{color:"var(--primary-text)",background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px",minWidth:"200px",maxWidth:"400px"}}}):(0,b.jsx)(o.azJ,{className:"glass-bubble "+(t?"girl":"boy"),children:s}),(0,b.jsx)(o.azJ,{sx:{display:"flex",flexDirection:"column",gap:.5,opacity:.5,"&:hover":{opacity:1}},children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.K0,{size:"small",onClick:le,sx:{color:"var(--success)","&:hover":{color:"var(--success-dark)"}},children:(0,b.jsx)(p.A,{fontSize:"small"})}),(0,b.jsx)(o.K0,{size:"small",onClick:ae,sx:{color:"var(--error)","&:hover":{opacity:1}},children:(0,b.jsx)(u.A,{fontSize:"small"})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.K0,{size:"small",onClick:()=>ee(l),sx:{color:"var(--primary-text)","&:hover":{color:"var(--accent-blue)"}},children:(0,b.jsx)(d.A,{fontSize:"small"})}),(0,b.jsx)(o.K0,{size:"small",onClick:()=>(e=>{const l=I.filter((l,a)=>a!==e);w(l),X("Message deleted!","success")})(l),sx:{color:"var(--error)","&:hover":{opacity:1}},children:(0,b.jsx)(x.A,{fontSize:"small"})})]})})]})]}),!t&&(0,b.jsx)(o.azJ,{sx:{display:"flex",alignItems:"center",mt:1,opacity:.5,"&:hover":{opacity:1},cursor:c?"grabbing":"grab"},draggable:!0,onDragStart:e=>oe(e,l),children:(0,b.jsx)(m.A,{sx:{fontSize:16,color:"var(--primary-text)"}})})]})]},l)})})]}),(0,b.jsxs)(o.azJ,{className:"glass-card",sx:{p:3,mb:3,mt:2,background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px"},children:[(0,b.jsxs)(o.azJ,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,b.jsxs)(o.o5u,{className:"glass-section-header",children:["AI Suggestions (",A.length,")"]}),(0,b.jsx)(o.$nd,{variant:"contained",size:"small",startIcon:(0,b.jsx)(h.A,{}),onClick:async()=>{if(0===I.length)return void J("No conversation to regenerate replies for.");C(!0),J(""),N([]);const e=new FormData;e.append("conversation",JSON.stringify(I)),e.append("tone","custom"===R?B:R),e.append("goal","custom"===F?L:F),e.append("regenerate","true");try{const l=await v.Ay.post("https://3e79a6ace678.ngrok-free.app/api/regenerate-replies",e,{headers:{"Content-Type":"multipart/form-data"}}),{reply_1:a,reply_2:s,reply_3:o}=l.data;console.log("=== REGENERATE DEBUGGING ==="),console.log("Regenerated replies received:",{reply_1:a,reply_2:s,reply_3:o}),console.log("Full response data:",l.data),console.log("Reply 1 check:",a,"Type:",typeof a,"Length:",null===a||void 0===a?void 0:a.length,"Boolean:",Boolean(a)),console.log("Reply 2 check:",s,"Type:",typeof s,"Length:",null===s||void 0===s?void 0:s.length,"Boolean:",Boolean(s)),console.log("Reply 3 check:",o,"Type:",typeof o,"Length:",null===o||void 0===o?void 0:o.length,"Boolean:",Boolean(o)),console.log("Raw array before filter:",[a,s,o]);const t=[a,s,o].filter(Boolean);console.log("Filtered regenerated replies:",t),console.log("Number of filtered replies:",t.length),console.log("=== END DEBUGGING ==="),N(t),X(`${t.length} new AI replies generated!`,"success")}catch(s){var l,a;J((null===(l=s.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.error)||"Failed to regenerate AI responses")}finally{C(!1)}},disabled:S||0===I.length,sx:{backgroundColor:"var(--accent-blue)","&:hover":{backgroundColor:"var(--accent-blue-dark)"},"&:disabled":{opacity:.5}},children:"Regenerate Replies"})]}),A.map((e,l)=>{const a="string"===typeof e?e:(null===e||void 0===e?void 0:e.text)||"",s=a.length>120;return(0,b.jsx)(o.SDm,{in:K.includes(l)||!s,timeout:400,sx:{animationDelay:100*l+"ms"},children:(0,b.jsxs)(o.azJ,{className:"glass-suggestion-card",children:[(0,b.jsx)(o.o5u,{sx:{flex:1,fontSize:16,color:"var(--primary-text)"},children:s&&!K.includes(l)?a.slice(0,120)+"...":a}),s&&(0,b.jsx)(o.K0,{onClick:()=>{return e=l,void P(l=>l.includes(e)?l.filter(l=>l!==e):[...l,e]);var e},size:"small",sx:{color:"var(--accent-blue)"},children:K.includes(l)?(0,b.jsx)(c.A,{}):(0,b.jsx)(i.A,{})}),(0,b.jsx)(o.K0,{onClick:()=>{return e=a,navigator.clipboard.writeText(e),void X("Copied to clipboard!","success",(0,b.jsx)(n.A,{sx:{color:"var(--success)"}}));var e},size:"small",className:"glass-copy-btn","aria-label":"Copy suggestion",children:(0,b.jsx)(t.A,{})})]})},l)})]})]})]})})}}}]);
//# sourceMappingURL=602.50f02d1f.chunk.js.map