{"version":3,"file":"static/js/32.b68794de.chunk.js","mappings":"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","sources":["utils/performance.js","pages/Profiles.js"],"sourcesContent":["import React from 'react';\r\n\r\n// Performance utilities for debouncing, throttling, and memoization\r\n\r\n// Debounce utility for search inputs and expensive operations\r\nexport const debounce = (func, wait) => {\r\n  let timeout;\r\n  return function executedFunction(...args) {\r\n    const later = () => {\r\n      clearTimeout(timeout);\r\n      func(...args);\r\n    };\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(later, wait);\r\n  };\r\n};\r\n\r\n// Throttle utility for scroll events and frequent updates\r\nexport const throttle = (func, limit) => {\r\n  let inThrottle;\r\n  return function executedFunction(...args) {\r\n    if (!inThrottle) {\r\n      func.apply(this, args);\r\n      inThrottle = true;\r\n      setTimeout(() => inThrottle = false, limit);\r\n    }\r\n  };\r\n};\r\n\r\n// Memoization utility for expensive calculations\r\nexport const memoize = (fn) => {\r\n  const cache = new Map();\r\n  return (...args) => {\r\n    const key = JSON.stringify(args);\r\n    if (cache.has(key)) {\r\n      return cache.get(key);\r\n    }\r\n    const result = fn.apply(this, args);\r\n    cache.set(key, result);\r\n    return result;\r\n  };\r\n};\r\n\r\n// Virtual scrolling utilities\r\nexport const createVirtualScroller = (itemHeight, containerHeight, totalItems) => {\r\n  const visibleItems = Math.ceil(containerHeight / itemHeight);\r\n  const startIndex = Math.floor(0 / itemHeight);\r\n  const endIndex = Math.min(startIndex + visibleItems, totalItems);\r\n  \r\n  return {\r\n    startIndex,\r\n    endIndex,\r\n    visibleItems: endIndex - startIndex,\r\n    totalHeight: totalItems * itemHeight,\r\n  };\r\n};\r\n\r\n// Performance monitoring\r\nexport const performanceMonitor = {\r\n  marks: new Map(),\r\n  \r\n  start(label) {\r\n    this.marks.set(label, performance.now());\r\n  },\r\n  \r\n  end(label) {\r\n    const startTime = this.marks.get(label);\r\n    if (startTime) {\r\n      const duration = performance.now() - startTime;\r\n      console.log(`${label}: ${duration.toFixed(2)}ms`);\r\n      this.marks.delete(label);\r\n      return duration;\r\n    }\r\n    return 0;\r\n  },\r\n  \r\n  measure(label, fn) {\r\n    this.start(label);\r\n    const result = fn();\r\n    this.end(label);\r\n    return result;\r\n  },\r\n};\r\n\r\n// Lazy loading utility\r\nexport const lazyLoad = (importFn, fallback = null) => {\r\n  let component = null;\r\n  let loading = false;\r\n  let promise = null;\r\n  \r\n  return {\r\n    load() {\r\n      if (component) return Promise.resolve(component);\r\n      if (loading) return promise;\r\n      \r\n      loading = true;\r\n      promise = importFn().then(module => {\r\n        component = module.default || module;\r\n        loading = false;\r\n        return component;\r\n      });\r\n      \r\n      return promise;\r\n    },\r\n    \r\n    getComponent() {\r\n      return component;\r\n    },\r\n    \r\n    isLoading() {\r\n      return loading;\r\n    },\r\n  };\r\n};\r\n\r\n// Image optimization utilities\r\nexport const imageOptimizer = {\r\n  // Preload critical images\r\n  preloadImage(src) {\r\n    return new Promise((resolve, reject) => {\r\n      const img = new Image();\r\n      img.onload = () => resolve(img);\r\n      img.onerror = reject;\r\n      img.src = src;\r\n    });\r\n  },\r\n  \r\n  // Lazy load images with intersection observer\r\n  lazyLoadImage(imgElement, src) {\r\n    const observer = new IntersectionObserver((entries) => {\r\n      entries.forEach(entry => {\r\n        if (entry.isIntersecting) {\r\n          imgElement.src = src;\r\n          observer.unobserve(imgElement);\r\n        }\r\n      });\r\n    });\r\n    \r\n    observer.observe(imgElement);\r\n    return observer;\r\n  },\r\n};\r\n\r\n// Memory management utilities\r\nexport const memoryManager = {\r\n  // Clear unused event listeners\r\n  cleanupEventListeners(element, eventType) {\r\n    const listeners = element[`_${eventType}Listeners`] || [];\r\n    listeners.forEach(({ listener, options }) => {\r\n      element.removeEventListener(eventType, listener, options);\r\n    });\r\n    element[`_${eventType}Listeners`] = [];\r\n  },\r\n  \r\n  // Track and cleanup timeouts\r\n  timeouts: new Set(),\r\n  \r\n  setTimeout(callback, delay, ...args) {\r\n    const timeoutId = setTimeout(callback, delay, ...args);\r\n    this.timeouts.add(timeoutId);\r\n    return timeoutId;\r\n  },\r\n  \r\n  clearTimeout(timeoutId) {\r\n    clearTimeout(timeoutId);\r\n    this.timeouts.delete(timeoutId);\r\n  },\r\n  \r\n  clearAllTimeouts() {\r\n    this.timeouts.forEach(timeoutId => clearTimeout(timeoutId));\r\n    this.timeouts.clear();\r\n  },\r\n};\r\n\r\n// React performance utilities\r\nexport const reactPerformance = {\r\n  // Memoize expensive calculations\r\n  useMemoizedValue(value, deps) {\r\n    const [memoizedValue, setMemoizedValue] = React.useState(value);\r\n    \r\n    React.useEffect(() => {\r\n      setMemoizedValue(value);\r\n    }, deps);\r\n    \r\n    return memoizedValue;\r\n  },\r\n  \r\n  // Optimize re-renders with useCallback\r\n  useStableCallback(callback, deps) {\r\n    return React.useCallback(callback, deps);\r\n  },\r\n  \r\n  // Prevent unnecessary re-renders\r\n  useStableRef(value) {\r\n    const ref = React.useRef(value);\r\n    ref.current = value;\r\n    return ref;\r\n  },\r\n};\r\n\r\n// Bundle size optimization utilities\r\nexport const bundleOptimizer = {\r\n  // Dynamic imports for code splitting\r\n  async importComponent(importFn) {\r\n    try {\r\n      const module = await importFn();\r\n      return module.default || module;\r\n    } catch (error) {\r\n      console.error('Failed to load component:', error);\r\n      return null;\r\n    }\r\n  },\r\n  \r\n  // Preload critical components\r\n  preloadComponent(importFn) {\r\n    return importFn();\r\n  },\r\n};\r\n\r\nexport default {\r\n  debounce,\r\n  throttle,\r\n  memoize,\r\n  createVirtualScroller,\r\n  performanceMonitor,\r\n  lazyLoad,\r\n  imageOptimizer,\r\n  memoryManager,\r\n  reactPerformance,\r\n  bundleOptimizer,\r\n}; ","import React, { useEffect, useState, useRef, memo, useCallback, useMemo } from 'react';\nimport { \n  Box, Typography, Card, CardContent, Button, TextField, Chip, Stack, \n  Dialog, DialogTitle, DialogContent, DialogActions, Tooltip, Avatar, \n  CircularProgress, Fab, Menu, MenuItem, IconButton, Alert, Skeleton \n} from '@mui/material';\nimport { \n  Add as AddIcon, Delete as DeleteIcon, Edit as EditIcon, FilterList as FilterListIcon, \n  Star as StarIcon, Message as MessageIcon, CompareArrows as CompareArrowsIcon, \n  MoreVert as MoreVertIcon, CloudUpload as CloudUploadIcon, \n  ExpandMore as ExpandMoreIcon, ExpandLess as ExpandLessIcon \n} from '@mui/icons-material';\nimport { profilesAPI } from '../utils/api';\nimport { debounce, memoize, performanceMonitor } from '../utils/performance';\nimport { BarChart, Bar, XAxis, YAxis, Tooltip as RechartsTooltip, ResponsiveContainer, Legend } from 'recharts';\nimport axios from 'axios';\n\nconst moodEmojis = {\n  happy: 'ðŸ˜„',\n  flirty: 'ðŸ˜',\n  neutral: 'ðŸ˜',\n  sad: 'ðŸ˜¢',\n  angry: 'ðŸ˜ ',\n};\n\n// Memoized mood analysis for better performance\nconst analyzeMood = memoize((messages) => {\n  const lastMsgs = (messages || []).slice(-5).map(m => m.text?.toLowerCase() || '').join(' ');\n  if (/love|amazing|great|happy|fun|ðŸ˜|ðŸ˜„|ðŸ˜Š|ðŸ˜˜|flirt|kiss|cute|hot|babe|sweet/.test(lastMsgs)) return 'ðŸ˜';\n  if (/angry|mad|annoy|hate|ðŸ˜ |ðŸ˜¡|wtf|ugh/.test(lastMsgs)) return 'ðŸ˜ ';\n  if (/sad|cry|miss|lonely|ðŸ˜¢|ðŸ˜­/.test(lastMsgs)) return 'ðŸ˜¢';\n  if (/ok|fine|alright|neutral|meh|ðŸ˜/.test(lastMsgs)) return 'ðŸ˜';\n  return 'ðŸ˜„';\n});\n\n// Memoized compatibility calculation\nconst computeCompatibility = memoize((profile) => {\n  const likes = profile.likes?.length || 0;\n  const personality = profile.personality_tags?.length || 0;\n  const jokes = profile.inside_jokes?.length || 0;\n  const msgs = profile.previous_messages?.length || 0;\n  let score = likes * 2 + personality * 2 + jokes * 3 + Math.min(msgs, 20);\n  score = Math.min(100, Math.round(score));\n  return score;\n});\n\n// Memoized progress calculation\nconst computeProgress = memoize((profile) => {\n  // Advanced scoring\n  const msgs = profile.previous_messages || [];\n  const goal = (profile.conversation_goals && profile.conversation_goals[0]) || '';\n  // 1. Goal proximity (40%)\n  let goalScore = 0;\n  if (goal) {\n    const goalKeywords = goal.toLowerCase().split(/\\s+/).concat(['call','date','meet','agree','yes','sure','let\\'s','hang','see you','video','voice']);\n    const lastMsgs = msgs.slice(-10).map(m => m.text.toLowerCase()).join(' ');\n    goalScore = goalKeywords.some(word => lastMsgs.includes(word)) ? 40 : 0;\n  }\n  // 2. Sentiment/friendliness (30%)\n  const herMsgs = msgs.filter(m => m.from !== 'Me').slice(-10);\n  const positiveWords = /love|great|happy|fun|ðŸ˜|ðŸ˜„|ðŸ˜Š|ðŸ˜˜|flirt|kiss|cute|hot|babe|sweet|yes|sure|haha|lol|amazing|awesome|excited|enjoy|like|good|nice|thanks|thank you|see you|call|date|meet|voice|video/gi;\n  let sentimentScore = 0;\n  if (herMsgs.length) {\n    const positives = herMsgs.map(m => (m.text.match(positiveWords) || []).length).reduce((a, b) => a + b, 0);\n    sentimentScore = Math.min(positives * 3, 30); // up to 30\n  }\n  // 3. Engagement (20%)\n  let engagementScore = 0;\n  const emojiCount = (msgs.map(m => (m.text.match(/[\\u{1F600}-\\u{1F64F}\\u{1F300}-\\u{1F5FF}\\u{1F680}-\\u{1F6FF}\\u{1F1E0}-\\u{1F1FF}]/gu) || []).length).reduce((a, b) => a + b, 0));\n  const jokes = profile.inside_jokes?.length || 0;\n  engagementScore = Math.min(msgs.length, 20) + Math.min(jokes * 5, 10) + Math.min(emojiCount, 10);\n  engagementScore = Math.min(engagementScore, 20);\n  // 4. Consistency (10%)\n  let consistencyScore = 0;\n  if (msgs.length > 1) {\n    const days = new Set(msgs.map(m => m.timestamp && m.timestamp.split(' ')[0])).size;\n    consistencyScore = Math.min(days, 10);\n  }\n  let score = goalScore + sentimentScore + engagementScore + consistencyScore;\n  if (score > 100) score = 100;\n  return score;\n});\n\nfunction EditableChips({ label, values, onChange }) {\n  const [input, setInput] = useState('');\n  return (\n    <Box sx={{ mb: 2 }}>\n      <Typography variant=\"subtitle2\">{label}</Typography>\n      <Stack direction=\"row\" spacing={1} sx={{ flexWrap: 'wrap', mb: 1 }}>\n        {values.map((v, i) => (\n          <Chip key={i} label={v} onDelete={() => onChange(values.filter((_, idx) => idx !== i))} />\n        ))}\n      </Stack>\n      <TextField size=\"small\" value={input} onChange={e => setInput(e.target.value)} onKeyDown={e => {\n        if (e.key === 'Enter' && input.trim()) {\n          onChange([...values, input.trim()]);\n          setInput('');\n        }\n      }} placeholder={`Add ${label.toLowerCase()}`} />\n    </Box>\n  );\n}\n\n// 1. In ProfileEditor, always show fields for bio, age, and gender for all profiles\n// 2. In compact mode (or in the main card if only detailed mode), instead of inside joke, show top emoji and top word from the person's messages\n// 3. Ensure Edit/Delete are visible in the MoreVert menu (already handled)\n\n// Helper to get top emoji and top word from messages\nfunction getTopEmojiAndWord(messages) {\n  const text = (messages || []).filter(m => m.from !== 'Me').map(m => m.text).join(' ');\n  // Emoji regex\n  const emojiRegex = /[\\p{Emoji}]/gu;\n  const emojis = text.match(emojiRegex) || [];\n  const emojiCounts = {};\n  emojis.forEach(e => { emojiCounts[e] = (emojiCounts[e] || 0) + 1; });\n  const topEmoji = Object.entries(emojiCounts).sort((a, b) => b[1] - a[1])[0]?.[0] || '';\n  // Top word\n  const words = text.toLowerCase().match(/\\b\\w{3,}\\b/g) || [];\n  const wordCounts = {};\n  words.forEach(w => { wordCounts[w] = (wordCounts[w] || 0) + 1; });\n  const topWord = Object.entries(wordCounts).sort((a, b) => b[1] - a[1])[0]?.[0] || '';\n  return { topEmoji, topWord };\n}\n\nfunction ProfileEditor({ profile, open, onClose, onSave }) {\n  const [edit, setEdit] = useState(profile);\n  useEffect(() => { setEdit(profile); }, [profile]);\n  if (!edit) return null;\n  return (\n    <Dialog \n      open={open} \n      onClose={onClose} \n      maxWidth=\"sm\" \n      fullWidth\n      PaperProps={{\n        sx: {\n          backgroundColor: 'white',\n          color: 'black',\n          '& .MuiDialogTitle-root': {\n            backgroundColor: 'white',\n            color: 'black',\n          },\n          '& .MuiDialogContent-root': {\n            backgroundColor: 'white',\n            color: 'black',\n          },\n          '& .MuiDialogActions-root': {\n            backgroundColor: 'white',\n            color: 'black',\n          }\n        }\n      }}\n      BackdropProps={{\n        sx: {\n          backgroundColor: 'rgba(0, 0, 0, 0.2) !important',\n        }\n      }}\n    >\n      <DialogTitle sx={{ backgroundColor: 'white', color: 'black' }}>\n        Edit Profile: {edit.name || edit.username || edit.user_id}\n      </DialogTitle>\n      <DialogContent sx={{ overflowY: 'auto', maxHeight: '70vh', pt: 3, backgroundColor: 'white', color: 'black' }}>\n        <TextField \n          fullWidth \n          size=\"small\" \n          label=\"Name\" \n          value={edit.name || ''} \n          onChange={e => setEdit({ ...edit, name: e.target.value })} \n          sx={{ \n            mt: 2, \n            mb: 2,\n            '& .MuiOutlinedInput-root': {\n              backgroundColor: 'white',\n              color: 'black',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'rgba(0, 0, 0, 0.6)',\n            }\n          }} \n          InputLabelProps={{ shrink: true }} \n        />\n        <TextField \n          fullWidth \n          label=\"Bio\" \n          value={edit.bio || ''} \n          onChange={e => setEdit({ ...edit, bio: e.target.value })} \n          multiline \n          rows={2} \n          sx={{ \n            mb: 2,\n            '& .MuiOutlinedInput-root': {\n              backgroundColor: 'white',\n              color: 'black',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'rgba(0, 0, 0, 0.6)',\n            }\n          }} \n        />\n        <TextField \n          fullWidth \n          label=\"Age\" \n          value={edit.age || ''} \n          onChange={e => setEdit({ ...edit, age: e.target.value })} \n          sx={{ \n            mb: 2,\n            '& .MuiOutlinedInput-root': {\n              backgroundColor: 'white',\n              color: 'black',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'rgba(0, 0, 0, 0.6)',\n            }\n          }} \n        />\n        <TextField \n          fullWidth \n          label=\"Gender\" \n          value={edit.gender || ''} \n          onChange={e => setEdit({ ...edit, gender: e.target.value })} \n          sx={{ \n            mb: 2,\n            '& .MuiOutlinedInput-root': {\n              backgroundColor: 'white',\n              color: 'black',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'rgba(0, 0, 0, 0.6)',\n            }\n          }} \n        />\n        <EditableChips label=\"Likes\" values={edit.likes || []} onChange={v => setEdit({ ...edit, likes: v })} />\n        <EditableChips label=\"Personality Tags\" values={edit.personality_tags || []} onChange={v => setEdit({ ...edit, personality_tags: v })} />\n        <EditableChips label=\"Inside Jokes\" values={edit.inside_jokes || []} onChange={v => setEdit({ ...edit, inside_jokes: v })} />\n        <EditableChips label=\"Conversation Goals\" values={edit.conversation_goals || []} onChange={v => setEdit({ ...edit, conversation_goals: v })} />\n        <TextField \n          fullWidth \n          label=\"Details (JSON)\" \n          value={JSON.stringify(edit.details || {}, null, 2)} \n          onChange={e => {\n            try {\n              setEdit({ ...edit, details: JSON.parse(e.target.value) });\n            } catch { }\n          }} \n          multiline \n          minRows={2} \n          sx={{ \n            mt: 2,\n            '& .MuiOutlinedInput-root': {\n              backgroundColor: 'white',\n              color: 'black',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'rgba(0, 0, 0, 0.6)',\n            }\n          }} \n        />\n      </DialogContent>\n      <DialogActions sx={{ backgroundColor: 'white', color: 'black' }}>\n        <Button \n          onClick={onClose}\n          sx={{\n            color: 'black',\n            '&:hover': {\n              backgroundColor: 'rgba(0, 0, 0, 0.04)',\n            }\n          }}\n        >\n          Cancel\n        </Button>\n        <Button \n          variant=\"contained\" \n          onClick={() => onSave(edit)}\n          sx={{\n            backgroundColor: '#1976d2',\n            color: 'white',\n            '&:hover': {\n              backgroundColor: '#115293',\n            }\n          }}\n        >\n          Save\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction ImportConversationDialog({ open, onClose, onImport }) {\n  const [file, setFile] = useState(null);\n  const [profileName, setProfileName] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [preview, setPreview] = useState(null);\n\n  const handleFileChange = (event) => {\n    const selectedFile = event.target.files[0];\n    if (selectedFile) {\n      if (selectedFile.size > 10 * 1024 * 1024) { // 10MB limit\n        setError('File size must be less than 10MB');\n        return;\n      }\n      \n      const reader = new FileReader();\n      reader.onload = (e) => {\n        try {\n          const data = JSON.parse(e.target.result);\n          setFile(selectedFile);\n          setPreview(data);\n          setError('');\n          \n          // Auto-generate profile name from file name\n          const fileName = selectedFile.name.replace('.json', '').replace(/[_-]/g, ' ');\n          setProfileName(fileName.charAt(0).toUpperCase() + fileName.slice(1));\n        } catch (err) {\n          setError('Invalid JSON file');\n          setFile(null);\n          setPreview(null);\n        }\n      };\n      reader.readAsText(selectedFile);\n    }\n  };\n\n  const handleImport = async () => {\n    if (!file || !profileName.trim()) {\n      setError('Please select a file and enter a profile name');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('profile_name', profileName);\n\n      const response = await axios.post('http://localhost:5000/api/import-conversation', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n\n      onImport(response.data);\n      onClose();\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to import conversation');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onClose={onClose} maxWidth=\"md\" fullWidth>\n      <DialogTitle>Import Conversation from JSON</DialogTitle>\n      <DialogContent>\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n          Upload a JSON file containing conversation messages. The AI will analyze the conversation and extract personality traits, likes, and other preferences.\n        </Typography>\n        \n        <Alert severity=\"info\" sx={{ mb: 2 }}>\n          <strong>File Requirements:</strong>\n          <br />â€¢ Maximum size: 10MB\n          <br />â€¢ Format: JSON with messages array\n          <br />â€¢ Each message should have: from, text, timestamp\n          <br />â€¢ Example: {`[{\"from\": \"Girl\", \"text\": \"Hello!\", \"timestamp\": \"2024-01-01 12:00\"}]`}\n        </Alert>\n\n        <Box sx={{ mb: 2 }}>\n          <input\n            accept=\".json\"\n            style={{ display: 'none' }}\n            id=\"conversation-file\"\n            type=\"file\"\n            onChange={handleFileChange}\n          />\n          <label htmlFor=\"conversation-file\">\n            <Button\n              variant=\"outlined\"\n              component=\"span\"\n              startIcon={<CloudUploadIcon />}\n              fullWidth\n              sx={{ py: 2 }}\n            >\n              {file ? file.name : 'Choose JSON File'}\n            </Button>\n          </label>\n        </Box>\n\n        <TextField\n          fullWidth\n          label=\"Profile Name\"\n          value={profileName}\n          onChange={(e) => setProfileName(e.target.value)}\n          sx={{ mb: 2 }}\n          placeholder=\"Enter a name for this profile\"\n        />\n\n        {preview && (\n          <Box sx={{ mb: 2 }}>\n            <Typography variant=\"subtitle2\" gutterBottom>Preview:</Typography>\n            <Box sx={{ \n              maxHeight: 200, \n              overflow: 'auto', \n              border: '1px solid #e0e0e0', \n              borderRadius: 1, \n              p: 1,\n              bgcolor: '#f5f5f5'\n            }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                {preview.messages ? `${preview.messages.length} messages found` : 'No messages array found'}\n              </Typography>\n              {preview.messages && preview.messages.slice(0, 3).map((msg, idx) => (\n                <Typography key={idx} variant=\"body2\" sx={{ fontFamily: 'monospace', fontSize: '0.8rem' }}>\n                  {msg.from}: {msg.text}\n                </Typography>\n              ))}\n              {preview.messages && preview.messages.length > 3 && (\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  ... and {preview.messages.length - 3} more messages\n                </Typography>\n              )}\n            </Box>\n          </Box>\n        )}\n\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} disabled={loading}>Cancel</Button>\n        <Button \n          variant=\"contained\" \n          onClick={handleImport} \n          disabled={loading || !file || !profileName.trim()}\n          startIcon={loading ? <CircularProgress size={20} /> : <AddIcon />}\n        >\n          {loading ? 'Analyzing...' : 'Import & Analyze'}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction DeleteConfirmDialog({ open, onClose, onConfirm, profileName }) {\n  return (\n    <Dialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\n      <DialogTitle>Delete Profile</DialogTitle>\n      <DialogContent>\n        <Typography variant=\"body1\">\n          Are you sure you want to delete the profile \"{profileName}\"?\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n          This action cannot be undone. All conversation history and profile data will be permanently removed.\n        </Typography>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Cancel</Button>\n        <Button onClick={onConfirm} color=\"error\" variant=\"contained\">\n          Delete Profile\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction CircularProgressWithLabel({ value }) {\n  return (\n    <Box sx={{ position: 'relative', display: 'inline-flex', alignItems: 'center' }}>\n      <CircularProgress variant=\"determinate\" value={value} size={48} thickness={5} sx={{ color: value > 70 ? 'var(--primary-coral)' : 'var(--accent-blue)' }} />\n      <Box sx={{\n        top: 0, left: 0, bottom: 0, right: 0, position: 'absolute', display: 'flex', alignItems: 'center', justifyContent: 'center',\n      }}>\n        <Typography variant=\"caption\" component=\"div\" color=\"text.primary\" sx={{ fontWeight: 700 }}>{`${Math.round(value)}%`}</Typography>\n      </Box>\n    </Box>\n  );\n}\n\nfunction Profiles() {\n  const [profiles, setProfiles] = useState([]);\n  const [selected, setSelected] = useState(null);\n  const [editorOpen, setEditorOpen] = useState(false);\n  const [importDialogOpen, setImportDialogOpen] = useState(false);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [profileToDelete, setProfileToDelete] = useState(null);\n  const [filterAnchor, setFilterAnchor] = useState(null);\n  const [sort, setSort] = useState('compatibility');\n  const [search, setSearch] = useState('');\n  \n  // Debounced search for better performance\n  const debouncedSearch = useCallback(\n    debounce((value) => {\n      setSearch(value);\n    }, 300),\n    []\n  );\n  const [expandedProfile, setExpandedProfile] = useState(null);\n  const [filterInterest, setFilterInterest] = useState('all');\n  const searchInputRef = useRef();\n  const [selectedProfiles, setSelectedProfiles] = useState([]); // for comparison\n  const [compareOpen, setCompareOpen] = useState(false);\n  const [starred, setStarred] = useState(() => JSON.parse(localStorage.getItem('starredProfiles') || '[]'));\n  const [loading, setLoading] = useState(true);\n  const [menuAnchor, setMenuAnchor] = useState(null);\n  const [menuProfile, setMenuProfile] = useState(null);\n  const [error, setError] = useState(null);\n\n  // Star/prioritize logic\n  const toggleStar = (user_id) => {\n    let newStarred;\n    if (starred.includes(user_id)) {\n      newStarred = starred.filter(id => id !== user_id);\n    } else {\n      newStarred = [...starred, user_id];\n    }\n    setStarred(newStarred);\n    localStorage.setItem('starredProfiles', JSON.stringify(newStarred));\n  };\n\n  // Add to comparison\n  const toggleCompare = (user_id) => {\n    setSelectedProfiles(prev => prev.includes(user_id) ? prev.filter(id => id !== user_id) : [...prev, user_id]);\n  };\n  const openCompareModal = () => setCompareOpen(true);\n  const closeCompareModal = () => setCompareOpen(false);\n\n  // Optimized data fetching with error handling\n  useEffect(() => {\n      const fetchProfiles = async () => {\n    try {\n      performanceMonitor.start('fetchProfiles');\n      setLoading(true);\n      const data = await profilesAPI.getAll();\n      \n      // Debug: Log what we received\n      console.log('API response:', data);\n      console.log('Data type:', typeof data);\n      console.log('Is array:', Array.isArray(data));\n      \n      // Ensure data is an array\n      if (!Array.isArray(data)) {\n        console.error('API returned non-array data:', data);\n        setError('Invalid data format received from server.');\n        setProfiles([]);\n        return;\n      }\n      \n      setProfiles(data);\n      performanceMonitor.end('fetchProfiles');\n    } catch (error) {\n      console.error('Failed to fetch profiles:', error);\n      setError('Failed to load profiles. Please try again.');\n      setProfiles([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n    fetchProfiles();\n  }, []);\n\n  // Memoized filtering and sorting for better performance\n  const filteredAndSortedProfiles = useMemo(() => {\n    // Ensure profiles is an array\n    if (!Array.isArray(profiles)) {\n      console.warn('Profiles is not an array:', profiles);\n      return [];\n    }\n    \n    let filtered = [...profiles];\n    \n    // Search filter\n    if (search.trim()) {\n      filtered = filtered.filter(p => (p.name || '').toLowerCase().includes(search.toLowerCase()));\n    }\n    \n    // Interest filter\n    if (filterInterest && filterInterest !== 'all') {\n      filtered = filtered.filter(p => (p.likes || []).some(like => like.toLowerCase().includes(filterInterest.toLowerCase())));\n    }\n    \n    // Sort starred first\n    if (starred.length > 0) {\n      filtered = [\n        ...filtered.filter(p => starred.includes(p.user_id)),\n        ...filtered.filter(p => !starred.includes(p.user_id)),\n      ];\n    }\n    \n    // Apply sorting\n    return filtered.sort((a, b) => {\n      if (sort === 'compatibility') return computeCompatibility(b) - computeCompatibility(a);\n      if (sort === 'recent') return (b.previous_messages?.length || 0) - (a.previous_messages?.length || 0);\n      if (sort === 'name') return (a.name || '').localeCompare(b.name || '');\n      return 0;\n    });\n  }, [profiles, search, filterInterest, starred, sort]);\n\n  // Memoized profile separation\n  const { mainUser, otherProfiles } = useMemo(() => {\n    const main = filteredAndSortedProfiles.find(p => p.is_me || p.user_id === 'me');\n    const others = filteredAndSortedProfiles.filter(p => !(p.is_me || p.user_id === 'me'));\n    return { mainUser: main, otherProfiles: others };\n  }, [filteredAndSortedProfiles]);\n\n  // Floating Add Profile button\n  const handleAddProfile = () => setImportDialogOpen(true);\n\n  // Floating filter bar\n  const handleFilterClick = (e) => setFilterAnchor(e.currentTarget);\n  const handleFilterClose = () => setFilterAnchor(null);\n  const handleSortChange = (val) => { setSort(val); setFilterAnchor(null); };\n\n  // Card quick actions\n  const [quickActionAnchor, setQuickActionAnchor] = useState(null);\n  const [quickActionProfile, setQuickActionProfile] = useState(null);\n  const openQuickActions = (e, profile) => { setQuickActionAnchor(e.currentTarget); setQuickActionProfile(profile); };\n  const closeQuickActions = () => { setQuickActionAnchor(null); setQuickActionProfile(null); };\n\n  // Expand/collapse profile card\n  const handleExpand = (user_id) => setExpandedProfile(expandedProfile === user_id ? null : user_id);\n\n  // Accessibility: focus search on mount\n  useEffect(() => {\n    if (searchInputRef.current) searchInputRef.current.setAttribute('aria-label', 'Search profiles by name');\n  }, []);\n\n  // Swipe gesture support (archive, message, view full profile)\n  // Only for touch devices\n  const touchStartX = useRef(null);\n  const touchProfile = useRef(null);\n  const handleTouchStart = (e, profile) => {\n    touchStartX.current = e.touches[0].clientX;\n    touchProfile.current = profile;\n  };\n  const handleTouchEnd = (e) => {\n    if (!touchStartX.current || !touchProfile.current) return;\n    const dx = e.changedTouches[0].clientX - touchStartX.current;\n    if (dx > 80) {\n      // Swipe right: Quick Message\n      setQuickActionProfile(touchProfile.current);\n      setQuickActionAnchor(document.body); // open menu at body\n    } else if (dx < -80) {\n      // Swipe left: Archive (not implemented)\n      // TODO: Archive action\n    }\n    touchStartX.current = null;\n    touchProfile.current = null;\n  };\n\n  // Card header gradient by personality\n  function getCardGradient(profile) {\n    if (profile.is_me || profile.user_id === 'me') return 'linear-gradient(135deg, #6c63ff 0%, #ff6b6b 100%)';\n    if (computeCompatibility(profile) > 70) return 'linear-gradient(135deg, #ffb6b9 0%, #ff6b6b 100%)';\n    if (computeCompatibility(profile) < 30) return 'linear-gradient(135deg, #b2ebf2 0%, #6c63ff 100%)';\n    return 'linear-gradient(135deg, #f8bbd0 0%, #b2ebf2 100%)';\n  }\n\n  // 1. Make all cards the same fixed width and height in the grid (e.g., minWidth: 340, maxWidth: 340, minHeight: 260, maxHeight: 260)\n  // 2. When expanded, allow height to grow (maxHeight: none, minHeight: 260)\n  // 3. Use ellipsis for text overflow, wrap where appropriate\n  // 4. Keep all buttons in their correct, visually appealing places\n  // 5. Polish layout for beauty and alignment\n  function getCardSize(profile, isExpanded) {\n    if (isExpanded) {\n      return { minWidth: 380, maxWidth: 380, minHeight: 260, maxHeight: 'none' };\n    }\n    return { minWidth: 380, maxWidth: 380, minHeight: 260, maxHeight: 260 };\n  }\n\n  // Collect all unique interests for filter dropdown\n  const allInterests = Array.from(new Set(profiles.flatMap(p => p.likes || []))).filter(Boolean);\n\n  // Restore handleSave, handleImportSuccess, handleDeleteConfirm\n  const handleEdit = (profile) => {\n    setSelected(profile);\n    setEditorOpen(true);\n  };\n  const handleSave = async (profile) => {\n    if (profile.is_me || profile.user_id === 'me') {\n      // Update user profile instead of regular profile\n      await axios.put('http://localhost:5000/api/user', profile);\n    } else {\n      // Update regular profile\n    await axios.put(`http://localhost:5000/api/profiles/${profile.user_id}`, profile);\n    }\n    // Refresh profiles to get updated data\n    const response = await axios.get('http://localhost:5000/api/profiles');\n    setProfiles(response.data);\n    setEditorOpen(false);\n  };\n  const handleImportSuccess = async (newProfile) => {\n    // Refresh profiles to include the new imported profile\n    const response = await axios.get('http://localhost:5000/api/profiles');\n    setProfiles(response.data);\n  };\n  const handleDeleteClick = (profile) => {\n    setProfileToDelete(profile);\n    setDeleteDialogOpen(true);\n  };\n  const handleDeleteConfirm = async () => {\n    if (!profileToDelete) return;\n    try {\n      if (profileToDelete.is_me || profileToDelete.user_id === 'me') {\n        // Don't allow deleting user profile\n        alert('Cannot delete your own profile');\n        return;\n      }\n      // Delete the profile\n      await axios.delete(`http://localhost:5000/api/profiles/${profileToDelete.user_id}`);\n      // Refresh profiles\n      const response = await axios.get('http://localhost:5000/api/profiles');\n      setProfiles(response.data);\n      setDeleteDialogOpen(false);\n      setProfileToDelete(null);\n    } catch (error) {\n      console.error('Error deleting profile:', error);\n      alert('Failed to delete profile');\n    }\n  };\n\n  // Profile analytics helpers\n  function getAnalytics(profile) {\n    const msgs = profile.previous_messages || [];\n    const days = {};\n    msgs.forEach(m => {\n      if (m.timestamp) {\n        const day = m.timestamp.split(' ')[0];\n        days[day] = (days[day] || 0) + 1;\n      }\n    });\n    const responseTimes = [];\n    let lastMe = null;\n    msgs.forEach(m => {\n      if (m.from === 'Me') lastMe = m;\n      else if (lastMe && m.timestamp && lastMe.timestamp) {\n        const t1 = new Date(lastMe.timestamp).getTime();\n        const t2 = new Date(m.timestamp).getTime();\n        if (!isNaN(t1) && !isNaN(t2)) responseTimes.push(Math.abs(t2 - t1) / 60000); // in minutes\n        lastMe = null;\n      }\n    });\n    return {\n      days,\n      avgResponse: responseTimes.length ? Math.round(responseTimes.reduce((a, b) => a + b, 0) / responseTimes.length) : null,\n      total: msgs.length,\n    };\n  }\n\n  // Export/share profile\n  const handleExportProfile = (profile) => {\n    // Export as JSON (placeholder)\n    const dataStr = 'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(profile, null, 2));\n    const dlAnchor = document.createElement('a');\n    dlAnchor.setAttribute('href', dataStr);\n    dlAnchor.setAttribute('download', `${profile.name || profile.user_id}.json`);\n    document.body.appendChild(dlAnchor);\n    dlAnchor.click();\n    dlAnchor.remove();\n  };\n\n  // Memoized ProfileCard for performance\n  const ProfileCard = memo(({ profile, isExpanded, onExpand, onStar, onCompare, starred, selectedForCompare, loading, openMenu }) => {\n    if (loading) {\n  return (\n        <Box sx={{ breakInside: 'avoid', mb: 3, width: '100%', display: 'inline-block' }}>\n          <Card sx={{ minHeight: 180, mb: 2, boxShadow: 3, borderRadius: 3 }}>\n            <CardContent>\n              <Skeleton variant=\"circular\" width={44} height={44} />\n              <Skeleton variant=\"text\" width=\"60%\" height={32} />\n              <Skeleton variant=\"rectangular\" width=\"100%\" height={24} sx={{ my: 1 }} />\n              <Skeleton variant=\"rectangular\" width=\"100%\" height={16} />\n            </CardContent>\n          </Card>\n        </Box>\n      );\n    }\n          const mood = analyzeMood(profile.previous_messages || []);\n    const compatibility = computeCompatibility(profile);\n    const cardSize = getCardSize(profile, isExpanded);\n    const analytics = getAnalytics(profile);\n    const { topEmoji, topWord } = getTopEmojiAndWord(profile.previous_messages);\n    // Compact mode: minimal info\n    // Grid mode: avatar and name only, very small\n    // Detailed mode (default)\n          return (\n      <Box sx={{ breakInside: 'avoid', mb: 3, width: '100%', display: 'inline-block', transition: 'box-shadow 0.3s, transform 0.3s, opacity 0.5s', opacity: loading ? 0.5 : 1, position: 'relative' }}>\n        <Card\n          sx={{\n            ...cardSize,\n            height: isExpanded ? 'auto' : 260,\n            mb: 2,\n            boxShadow: 3,\n            background: getCardGradient(profile),\n            color: compatibility > 70 ? 'white' : 'var(--text-primary)',\n            border: compatibility > 70 ? '2px solid var(--primary-coral)' : '1px solid #e0e0e0',\n            position: 'relative',\n            overflow: 'visible',\n            transition: 'box-shadow 0.3s, transform 0.3s',\n            '&:hover, &:focus': { boxShadow: 8, transform: 'translateY(-4px) scale(1.03)', outline: '2px solid var(--accent-blue)' },\n          }}\n          tabIndex={0}\n          aria-label={`Profile: ${profile.name}`}\n        >\n          <CardContent sx={{ pb: 6, position: 'relative', minHeight: 180 }}>\n                <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n              <IconButton \n                aria-label={starred ? 'Unstar profile' : 'Star profile'} \n                onClick={() => onStar(profile.user_id)} \n                color={starred ? 'warning' : 'default'}\n                sx={{\n                  '&:hover': {\n                    backgroundColor: 'rgba(102, 126, 234, 0.08)',\n                    color: starred ? 'warning.main' : 'inherit'\n                  }\n                }}\n              >\n                <StarIcon />\n              </IconButton>\n              <Avatar sx={{ mr: 2, width: 44, height: 44, fontSize: 22, bgcolor: compatibility > 70 ? 'white' : 'var(--accent-blue)', color: compatibility > 70 ? 'var(--accent-blue)' : 'white', boxShadow: 2, transition: 'transform 0.3s', '&:hover': { transform: 'scale(1.1)' } }}>{profile.name ? profile.name[0] : '?'}</Avatar>\n              <Typography variant=\"h6\" sx={{ fontWeight: 700, flex: 1, textOverflow: 'ellipsis', overflow: 'hidden', whiteSpace: 'nowrap' }}>{profile.name || profile.username || profile.user_id}</Typography>\n              {/* Mood emoji only */}\n              <Tooltip title=\"Mood\"><span style={{ fontSize: 24, marginLeft: 8 }}>{analyzeMood(profile.previous_messages || [])}</span></Tooltip>\n              {/* Compare checkbox and MoreVert menu grouped */}\n              <Box sx={{ display: 'flex', alignItems: 'center', ml: 1 }}>\n                <Tooltip title={selectedForCompare ? 'Remove from comparison' : 'Select for comparison'}>\n                                  <IconButton \n                  aria-label=\"Select for comparison\" \n                  onClick={() => onCompare(profile.user_id)} \n                  size=\"small\" \n                  sx={{ \n                    color: selectedForCompare ? 'primary.main' : 'inherit',\n                    '&:hover': {\n                      backgroundColor: 'rgba(102, 126, 234, 0.08)',\n                      color: selectedForCompare ? 'primary.main' : 'inherit'\n                    }\n                  }}\n                >\n                  <input type=\"checkbox\" checked={selectedForCompare} readOnly style={{ display: 'none' }} />\n                  <CompareArrowsIcon fontSize=\"small\" />\n                </IconButton>\n                </Tooltip>\n                <IconButton \n                  aria-label=\"More actions\" \n                  onClick={e => openMenu(e.currentTarget, profile)} \n                  size=\"small\"\n                  sx={{\n                    '&:hover': {\n                      backgroundColor: 'rgba(102, 126, 234, 0.08)',\n                      color: 'inherit'\n                    }\n                  }}\n                >\n                  <MoreVertIcon />\n                </IconButton>\n              </Box>\n            </Box>\n            <Stack direction=\"row\" spacing={1} sx={{ mb: 1, flexWrap: 'wrap' }}>\n              {(profile.likes && profile.likes[0]) && <Chip label={profile.likes[0]} color=\"secondary\" size=\"small\" />}\n              {(profile.personality_tags && profile.personality_tags[0]) && <Chip label={profile.personality_tags[0]} color=\"primary\" size=\"small\" />}\n            </Stack>\n            <Typography variant=\"body2\" sx={{ opacity: 0.8, mb: 1, display: '-webkit-box', WebkitLineClamp: 2, WebkitBoxOrient: 'vertical', overflow: 'hidden', textOverflow: 'ellipsis' }}>{profile.bio || 'No bio set.'}</Typography>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 1 }}>\n              <CircularProgressWithLabel value={compatibility} />\n              <Typography variant=\"caption\" sx={{ fontWeight: 600 }}>Compatibility</Typography>\n            </Box>\n            <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap', mb: 1 }}>\n              {(profile.conversation_goals && profile.conversation_goals[0]) && <Chip label={profile.conversation_goals[0]} color=\"success\" size=\"small\" />}\n            </Box>\n            <Typography variant=\"caption\" sx={{ color: 'var(--text-secondary)', textOverflow: 'ellipsis', overflow: 'hidden', whiteSpace: 'nowrap', display: 'block' }}>Relationship Status: {compatibility > 70 ? 'Strong' : compatibility > 30 ? 'Developing' : 'New'}</Typography>\n            {/* Show Details Button - bottom right */}\n            <IconButton\n              onClick={() => onExpand(profile.user_id)}\n              aria-expanded={isExpanded}\n              aria-controls={`profile-details-${profile.user_id}`}\n              sx={{ position: 'absolute', right: 8, bottom: 8, zIndex: 2, bgcolor: 'rgba(255,255,255,0.7)', boxShadow: 1, transition: 'bgcolor 0.2s', '&:hover': { bgcolor: 'rgba(255,255,255,0.9)' } }}\n              size=\"small\"\n            >\n              {isExpanded ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n            </IconButton>\n            {/* Expandable Section */}\n            <Box\n              id={`profile-details-${profile.user_id}`}\n              sx={{\n                maxHeight: isExpanded ? 320 : 0,\n                overflowY: isExpanded ? 'auto' : 'hidden',\n                overflowX: 'hidden',\n                transition: 'max-height 0.4s cubic-bezier(0.4,0,0.2,1)',\n                opacity: isExpanded ? 1 : 0,\n                pointerEvents: isExpanded ? 'auto' : 'none',\n                mt: isExpanded ? 2 : 0,\n              }}\n            >\n              <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>Quick Facts</Typography>\n              <Typography variant=\"body2\" sx={{ mb: 1 }}>Age: {profile.age || 'N/A'} | Gender: {profile.gender || 'N/A'}</Typography>\n              <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>Interests</Typography>\n              {(profile.likes && profile.likes[0]) && <Chip label={profile.likes[0]} color=\"secondary\" size=\"small\" sx={{ mb: 1 }} />}\n              <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>Personality</Typography>\n              {(profile.personality_tags && profile.personality_tags[0]) && <Chip label={profile.personality_tags[0]} color=\"primary\" size=\"small\" sx={{ mb: 1 }} />}\n              <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>Inside Joke</Typography>\n              {(profile.inside_jokes && profile.inside_jokes[0]) && <Chip label={profile.inside_jokes[0]} color=\"info\" size=\"small\" sx={{ mb: 1 }} />}\n              <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>Goal</Typography>\n              {(profile.conversation_goals && profile.conversation_goals[0]) && <Chip label={profile.conversation_goals[0]} color=\"success\" size=\"small\" sx={{ mb: 1 }} />}\n              {/* Export only */}\n              <Box sx={{ display: 'flex', gap: 1, mt: 2 }}>\n                <Button variant=\"outlined\" size=\"small\" onClick={() => handleExportProfile(profile)} aria-label=\"Export profile\">Export</Button>\n                </Box>\n                </Box>\n              </CardContent>\n            </Card>\n      </Box>\n    );\n  });\n\n  const openMenu = (anchor, profile) => { setMenuAnchor(anchor); setMenuProfile(profile); };\n  const closeMenu = () => { setMenuAnchor(null); setMenuProfile(null); };\n  const handleMenuEdit = () => { handleEdit(menuProfile); closeMenu(); };\n  const handleMenuDelete = () => { handleDeleteClick(menuProfile); closeMenu(); };\n\n  return (\n    <Box sx={{ p: { xs: 1, md: 3 }, maxWidth: 1400, mx: 'auto', position: 'relative' }}>\n      {/* Floating Filter/Sort/Search Bar with Compare Button */}\n      <Box sx={{ position: 'sticky', top: 0, zIndex: 10, display: 'flex', alignItems: 'center', gap: 2, mb: 3, bgcolor: 'rgba(255,255,255,0.7)', backdropFilter: 'blur(8px)', borderRadius: 2, px: 2, py: 1, boxShadow: 1 }}>\n        <Typography variant=\"h4\" sx={{ flex: 1 }}>Profiles</Typography>\n        <TextField\n          inputRef={searchInputRef}\n          value={search}\n          onChange={e => setSearch(e.target.value)}\n          placeholder=\"Search by name\"\n          size=\"small\"\n          sx={{ minWidth: 180 }}\n          inputProps={{ 'aria-label': 'Search profiles by name' }}\n        />\n        <TextField\n          select\n          value={filterInterest}\n          onChange={e => setFilterInterest(e.target.value)}\n          size=\"small\"\n          sx={{ minWidth: 160 }}\n          displayEmpty\n          inputProps={{ 'aria-label': 'Filter by interest' }}\n        >\n          <MenuItem value=\"all\">All Interests</MenuItem>\n          {allInterests.map((interest, i) => (\n            <MenuItem key={i} value={interest}>{interest}</MenuItem>\n          ))}\n        </TextField>\n        <Button startIcon={<FilterListIcon />} onClick={handleFilterClick} variant=\"outlined\" sx={{ fontWeight: 600 }}>Sort</Button>\n        <Button variant=\"outlined\" color=\"secondary\" disabled={selectedProfiles.length < 2} onClick={openCompareModal} sx={{ ml: 1 }}>Compare ({selectedProfiles.length})</Button>\n        <Menu \n          anchorEl={filterAnchor} \n          open={Boolean(filterAnchor)} \n          onClose={handleFilterClose}\n          PaperProps={{\n            sx: {\n              '& .MuiMenuItem-root': {\n                '&:hover': {\n                  backgroundColor: 'rgba(102, 126, 234, 0.08)',\n                  color: 'inherit'\n                }\n              }\n            }\n          }}\n        >\n          <MenuItem \n            onClick={() => handleSortChange('compatibility')}\n            sx={{ \n              '&:hover': { \n                backgroundColor: 'rgba(102, 126, 234, 0.08) !important',\n                color: 'inherit !important'\n              }\n            }}\n          >\n            Most Compatible\n          </MenuItem>\n          <MenuItem \n            onClick={() => handleSortChange('recent')}\n            sx={{ \n              '&:hover': { \n                backgroundColor: 'rgba(102, 126, 234, 0.08) !important',\n                color: 'inherit !important'\n              }\n            }}\n          >\n            Most Recent\n          </MenuItem>\n          <MenuItem \n            onClick={() => handleSortChange('name')}\n            sx={{ \n              '&:hover': { \n                backgroundColor: 'rgba(102, 126, 234, 0.08) !important',\n                color: 'inherit !important'\n              }\n            }}\n          >\n            A-Z Name\n          </MenuItem>\n        </Menu>\n      </Box>\n      {/* Main User Profile Card */}\n      {mainUser && (\n        <Box sx={{ mb: 4 }}>\n          <ProfileCard\n            profile={mainUser}\n            isExpanded={expandedProfile === mainUser.user_id}\n            onExpand={handleExpand}\n            onStar={toggleStar}\n            onCompare={toggleCompare}\n            starred={starred.includes(mainUser.user_id)}\n            selectedForCompare={selectedProfiles.includes(mainUser.user_id)}\n            loading={false}\n            openMenu={openMenu}\n          />\n        </Box>\n      )}\n      {/* Masonry Grid Layout with only detailed ProfileCard */}\n      <Box sx={{\n        display: 'grid',\n        gridTemplateColumns: { xs: '1fr', sm: '1fr 1fr', md: '1fr 1fr 1fr' },\n        gap: 3,\n        width: '100%',\n        pb: 8,\n      }}>\n        {loading\n          ? Array.from({ length: 6 }).map((_, i) => <ProfileCard key={i} loading />)\n          : otherProfiles.map(profile => (\n              <ProfileCard\n                key={profile.user_id}\n                profile={profile}\n                isExpanded={expandedProfile === profile.user_id}\n                onExpand={handleExpand}\n                onStar={toggleStar}\n                onCompare={toggleCompare}\n                starred={starred.includes(profile.user_id)}\n                selectedForCompare={selectedProfiles.includes(profile.user_id)}\n                loading={false}\n                openMenu={openMenu}\n              />\n            ))}\n      </Box>\n\n      {/* Floating Add Profile Button */}\n      <Fab color=\"primary\" aria-label=\"Add New Profile\" onClick={handleAddProfile} sx={{ position: 'fixed', bottom: 32, right: 32, zIndex: 1202, boxShadow: 6, transition: 'transform 0.3s', '&:hover': { transform: 'scale(1.08)' } }}>\n        <AddIcon />\n      </Fab>\n\n      {/* Quick Actions Menu */}\n      <Menu \n        anchorEl={quickActionAnchor} \n        open={Boolean(quickActionAnchor)} \n        onClose={closeQuickActions}\n        PaperProps={{\n          sx: {\n            '& .MuiMenuItem-root': {\n              '&:hover': {\n                backgroundColor: 'rgba(102, 126, 234, 0.08)',\n                color: 'inherit'\n              }\n            }\n          }\n        }}\n      >\n        <MenuItem \n          onClick={() => { setEditorOpen(true); closeQuickActions(); }}\n          sx={{ \n            '&:hover': { \n              backgroundColor: 'rgba(102, 126, 234, 0.08) !important',\n              color: 'inherit !important'\n            }\n          }}\n        >\n          <EditIcon fontSize=\"small\" sx={{ mr: 1 }} />Edit Profile\n        </MenuItem>\n        <MenuItem \n          onClick={() => { /* TODO: Quick Message */ closeQuickActions(); }}\n          sx={{ \n            '&:hover': { \n              backgroundColor: 'rgba(102, 126, 234, 0.08) !important',\n              color: 'inherit !important'\n            }\n          }}\n        >\n          <MessageIcon fontSize=\"small\" sx={{ mr: 1 }} />Quick Message\n        </MenuItem>\n        <MenuItem \n          onClick={() => { /* TODO: Compare */ closeQuickActions(); }}\n          sx={{ \n            '&:hover': { \n              backgroundColor: 'rgba(102, 126, 234, 0.08) !important',\n              color: 'inherit !important'\n            }\n          }}\n        >\n          <CompareArrowsIcon fontSize=\"small\" sx={{ mr: 1 }} />Compare\n        </MenuItem>\n        <MenuItem \n          onClick={() => { setDeleteDialogOpen(true); closeQuickActions(); }} \n          sx={{ \n            color: 'error.main',\n            '&:hover': { \n              backgroundColor: 'rgba(244, 67, 54, 0.08) !important',\n              color: 'error.main !important'\n            }\n          }}\n        >\n          <DeleteIcon fontSize=\"small\" sx={{ mr: 1 }} />Delete\n        </MenuItem>\n      </Menu>\n\n      {/* Profile Editor, Import, Delete Dialogs (unchanged) */}\n      <ProfileEditor profile={selected} open={editorOpen} onClose={() => setEditorOpen(false)} onSave={handleSave} />\n      <ImportConversationDialog \n        open={importDialogOpen} \n        onClose={() => setImportDialogOpen(false)} \n        onImport={handleImportSuccess} \n      />\n      <DeleteConfirmDialog \n        open={deleteDialogOpen} \n        onClose={() => setDeleteDialogOpen(false)} \n        onConfirm={handleDeleteConfirm}\n        profileName={profileToDelete?.name || profileToDelete?.username || profileToDelete?.user_id || 'Unknown'}\n      />\n\n      {/* Profile Comparison Modal */}\n      <Dialog open={compareOpen} onClose={closeCompareModal} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Profile Comparison</DialogTitle>\n        <DialogContent>\n          <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap' }}>\n            {selectedProfiles.map(user_id => {\n              const p = profiles.find(x => x.user_id === user_id);\n              if (!p) return null;\n              const analytics = getAnalytics(p);\n              return (\n                <Card key={user_id} sx={{ minWidth: 220, flex: 1, p: 2 }}>\n                  <Typography variant=\"h6\">{p.name}</Typography>\n                  <Typography variant=\"body2\">Compatibility: {computeCompatibility(p)}%</Typography>\n                  <Typography variant=\"body2\">Total Messages: {analytics.total}</Typography>\n                  <Typography variant=\"body2\">Avg. Response: {analytics.avgResponse ? `${analytics.avgResponse} min` : 'N/A'}</Typography>\n                </Card>\n              );\n            })}\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={closeCompareModal}>Close</Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* MoreVert Menu */}\n      <Menu \n        anchorEl={menuAnchor} \n        open={Boolean(menuAnchor)} \n        onClose={closeMenu}\n        PaperProps={{\n          sx: {\n            '& .MuiMenuItem-root': {\n              '&:hover': {\n                backgroundColor: 'rgba(102, 126, 234, 0.08)',\n                color: 'inherit'\n              }\n            }\n          }\n        }}\n      >\n        <MenuItem \n          onClick={handleMenuEdit}\n          sx={{ \n            '&:hover': { \n              backgroundColor: 'rgba(102, 126, 234, 0.08) !important',\n              color: 'inherit !important'\n            }\n          }}\n        >\n          Edit\n        </MenuItem>\n        {menuProfile && !menuProfile.is_me && menuProfile.user_id !== 'me' && (\n          <MenuItem \n            onClick={handleMenuDelete} \n            sx={{ \n              color: 'error.main',\n              '&:hover': { \n                backgroundColor: 'rgba(244, 67, 54, 0.08) !important',\n                color: 'error.main !important'\n              }\n            }}\n          >\n            Delete\n          </MenuItem>\n        )}\n      </Menu>\n    </Box>\n  );\n}\n\nexport default Profiles; "],"names":["debounce","func","wait","timeout","_len","arguments","length","args","Array","_key","clearTimeout","setTimeout","later","memoize","fn","cache","Map","_len3","_key3","key","JSON","stringify","has","get","result","apply","set","performanceMonitor","marks","start","label","this","performance","now","end","startTime","duration","console","log","toFixed","delete","measure","Set","analyzeMood","messages","lastMsgs","slice","map","m","_m$text","text","toLowerCase","join","test","computeCompatibility","profile","_profile$likes","_profile$personality_","_profile$inside_jokes","_profile$previous_mes","likes","personality","personality_tags","jokes","inside_jokes","msgs","previous_messages","score","Math","min","round","_profile$inside_jokes2","goal","conversation_goals","goalScore","goalKeywords","split","concat","some","word","includes","herMsgs","filter","from","positiveWords","sentimentScore","positives","match","reduce","a","b","engagementScore","emojiCount","consistencyScore","days","timestamp","size","EditableChips","_ref","values","onChange","input","setInput","useState","_jsxs","Box","sx","mb","children","_jsx","Typography","variant","Stack","direction","spacing","flexWrap","v","i","Chip","onDelete","_","idx","TextField","value","e","target","onKeyDown","trim","placeholder","ProfileEditor","_ref2","open","onClose","onSave","edit","setEdit","useEffect","Dialog","maxWidth","fullWidth","PaperProps","backgroundColor","color","BackdropProps","DialogTitle","name","username","user_id","DialogContent","overflowY","maxHeight","pt","mt","InputLabelProps","shrink","bio","multiline","rows","age","gender","details","parse","minRows","DialogActions","Button","onClick","ImportConversationDialog","_ref3","onImport","file","setFile","profileName","setProfileName","loading","setLoading","error","setError","preview","setPreview","Alert","severity","accept","style","display","id","type","event","selectedFile","files","reader","FileReader","onload","data","fileName","replace","charAt","toUpperCase","err","readAsText","htmlFor","component","startIcon","CloudUploadIcon","py","gutterBottom","overflow","border","borderRadius","p","bgcolor","msg","fontFamily","fontSize","disabled","async","formData","FormData","append","response","axios","post","headers","_err$response","_err$response$data","CircularProgress","AddIcon","DeleteConfirmDialog","_ref4","onConfirm","CircularProgressWithLabel","_ref5","position","alignItems","thickness","top","left","bottom","right","justifyContent","fontWeight","profiles","setProfiles","selected","setSelected","editorOpen","setEditorOpen","importDialogOpen","setImportDialogOpen","deleteDialogOpen","setDeleteDialogOpen","profileToDelete","setProfileToDelete","filterAnchor","setFilterAnchor","sort","setSort","search","setSearch","expandedProfile","setExpandedProfile","useCallback","filterInterest","setFilterInterest","searchInputRef","useRef","selectedProfiles","setSelectedProfiles","compareOpen","setCompareOpen","starred","setStarred","localStorage","getItem","menuAnchor","setMenuAnchor","menuProfile","setMenuProfile","toggleStar","newStarred","setItem","toggleCompare","prev","closeCompareModal","profilesAPI","getAll","isArray","fetchProfiles","filteredAndSortedProfiles","useMemo","warn","filtered","like","_b$previous_messages","_a$previous_messages","localeCompare","mainUser","otherProfiles","find","is_me","handleSortChange","val","quickActionAnchor","setQuickActionAnchor","quickActionProfile","setQuickActionProfile","closeQuickActions","handleExpand","getCardGradient","current","setAttribute","allInterests","flatMap","Boolean","getAnalytics","forEach","day","responseTimes","lastMe","t1","Date","getTime","t2","isNaN","push","abs","avgResponse","total","ProfileCard","memo","_ref6","isExpanded","onExpand","onStar","onCompare","selectedForCompare","openMenu","breakInside","width","Card","minHeight","boxShadow","CardContent","Skeleton","height","my","compatibility","cardSize","minWidth","getCardSize","topEmoji","topWord","_Object$entries$sort$","_Object$entries$sort$2","emojis","emojiCounts","Object","entries","words","wordCounts","w","getTopEmojiAndWord","transition","opacity","background","transform","outline","tabIndex","pb","IconButton","StarIcon","Avatar","mr","flex","textOverflow","whiteSpace","Tooltip","title","marginLeft","ml","checked","readOnly","CompareArrowsIcon","currentTarget","MoreVertIcon","WebkitLineClamp","WebkitBoxOrient","gap","zIndex","ExpandLessIcon","ExpandMoreIcon","overflowX","pointerEvents","dataStr","encodeURIComponent","dlAnchor","document","createElement","body","appendChild","click","remove","handleExportProfile","anchor","closeMenu","xs","md","mx","backdropFilter","px","inputRef","inputProps","select","displayEmpty","MenuItem","interest","FilterListIcon","openCompareModal","Menu","anchorEl","handleFilterClose","gridTemplateColumns","sm","Fab","handleAddProfile","EditIcon","MessageIcon","DeleteIcon","put","alert","x","analytics","handleMenuEdit","handleMenuDelete"],"sourceRoot":""}