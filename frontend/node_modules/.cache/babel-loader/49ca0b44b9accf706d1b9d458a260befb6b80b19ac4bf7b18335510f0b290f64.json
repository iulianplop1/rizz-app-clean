{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,TextField,Button,Typography,Paper,Container,Chip,Divider,Alert,Snackbar,Alert as MuiAlert}from'@mui/material';import{Send as SendIcon}from'@mui/icons-material';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AIAssistant=()=>{var _selectedProfileData$,_selectedProfileData$2,_selectedProfileData$3,_selectedProfileData$4;const[input,setInput]=useState('');const[messages,setMessages]=useState([]);const[loading,setLoading]=useState(false);const[profiles,setProfiles]=useState([]);const[selectedProfile,setSelectedProfile]=useState('');const[geminiApiKey,setGeminiApiKey]=useState('');const[showApiKeyError,setShowApiKeyError]=useState(false);const navigate=useNavigate();useEffect(()=>{fetchProfiles();fetchSettings();},[]);// 1. When changing selectedProfile, clear the chat\nuseEffect(()=>{setMessages([]);},[selectedProfile]);const fetchProfiles=async()=>{try{const response=await axios.get('https://3e79a6ace678.ngrok-free.app/api/profiles');// Convert object to array with id field for easier handling\nconst profilesArray=Object.entries(response.data).map(_ref=>{let[id,profile]=_ref;return{id,...profile};});setProfiles(profilesArray);}catch(error){console.error('Error fetching profiles:',error);}};const fetchSettings=async()=>{try{const response=await axios.get('https://3e79a6ace678.ngrok-free.app/api/settings');setGeminiApiKey(response.data.gemini_api_key||'');}catch(error){console.error('Error fetching settings:',error);}};const handleSend=async()=>{if(!input.trim())return;if(!geminiApiKey){setShowApiKeyError(true);return;}const userMessage=input;setInput('');setLoading(true);// Add user message to chat\nsetMessages(prev=>[...prev,{role:'user',content:userMessage}]);try{// Get selected profile data\nconst profileData=selectedProfile?profiles.find(p=>p.id===selectedProfile):null;let aiResponse;if(profileData){var _profileData$likes,_profileData$personal,_profileData$inside_j,_profileData$conversa,_profileData$previous;// Create a custom prompt with profile data for context-aware responses\nconst recentMessages=messages.slice(-6).map(m=>`${m.role==='user'?'You':'AI'}: ${m.content}`).join('\\n');const contextPrompt=`You are an AI assistant helping with dating and conversation management. \n\nContext about the girl you're asking about:\nName: ${profileData.name||'Unknown'}\nUsername: ${profileData.username||'Unknown'}\nTone Preference: ${profileData.tone_preference||'Not specified'}\nLikes: ${((_profileData$likes=profileData.likes)===null||_profileData$likes===void 0?void 0:_profileData$likes.join(', '))||'None specified'}\nPersonality Tags: ${((_profileData$personal=profileData.personality_tags)===null||_profileData$personal===void 0?void 0:_profileData$personal.join(', '))||'None specified'}\nInside Jokes: ${((_profileData$inside_j=profileData.inside_jokes)===null||_profileData$inside_j===void 0?void 0:_profileData$inside_j.join(', '))||'None specified'}\nDetails: ${JSON.stringify(profileData.details||{})}\nConversation Goals: ${((_profileData$conversa=profileData.conversation_goals)===null||_profileData$conversa===void 0?void 0:_profileData$conversa.join(', '))||'None specified'}\nRecent Messages: ${((_profileData$previous=profileData.previous_messages)===null||_profileData$previous===void 0?void 0:_profileData$previous.slice(-20).map(m=>`${m.from}: ${m.text}`).join('\\n'))||'No recent messages'}\n\nRecent Conversation:\n${recentMessages}\n\nBased on this information, please answer the following question: ${userMessage}\n\nKeep your answer concise and actionable unless I specifically ask for a detailed breakdown. Avoid markdown formatting, bullet lists, or section headers unless requested.`;// Call Gemini directly with the context-aware prompt\nif(geminiApiKey){var _response$data$candid,_response$data$candid2,_response$data$candid3,_response$data$candid4,_response$data$candid5;const response=await axios.post('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyBJYFwycbxfwTal-Dfoh-wdb3kN_PhsEJo',{contents:[{parts:[{text:contextPrompt}]}],generationConfig:{temperature:0.7,maxOutputTokens:2048}},{headers:{'Content-Type':'application/json'}});aiResponse=((_response$data$candid=response.data.candidates)===null||_response$data$candid===void 0?void 0:(_response$data$candid2=_response$data$candid[0])===null||_response$data$candid2===void 0?void 0:(_response$data$candid3=_response$data$candid2.content)===null||_response$data$candid3===void 0?void 0:(_response$data$candid4=_response$data$candid3.parts)===null||_response$data$candid4===void 0?void 0:(_response$data$candid5=_response$data$candid4[0])===null||_response$data$candid5===void 0?void 0:_response$data$candid5.text)||'Sorry, I couldn\\'t generate a response.';}else{aiResponse='Sorry, AI functionality is currently unavailable. API key not set.';}}else{// For general questions, we need to create a custom prompt and call Gemini directly\nconst recentMessages=messages.slice(-6).map(m=>`${m.role==='user'?'You':'AI'}: ${m.content}`).join('\\n');const generalPrompt=`You are an AI assistant helping with dating and conversation management. \n\nRecent Conversation:\n${recentMessages}\n\nPlease answer this general question about dating and conversation strategies: ${userMessage}\n\nKeep your answer concise and actionable unless I specifically ask for a detailed breakdown. Avoid markdown formatting, bullet lists, or section headers unless requested.`;// Call Gemini directly for general questions\nif(geminiApiKey){var _response$data$candid6,_response$data$candid7,_response$data$candid8,_response$data$candid9,_response$data$candid0;const response=await axios.post('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyBJYFwycbxfwTal-Dfoh-wdb3kN_PhsEJo',{contents:[{parts:[{text:generalPrompt}]}],generationConfig:{temperature:0.7,maxOutputTokens:2048}},{headers:{'Content-Type':'application/json'}});aiResponse=((_response$data$candid6=response.data.candidates)===null||_response$data$candid6===void 0?void 0:(_response$data$candid7=_response$data$candid6[0])===null||_response$data$candid7===void 0?void 0:(_response$data$candid8=_response$data$candid7.content)===null||_response$data$candid8===void 0?void 0:(_response$data$candid9=_response$data$candid8.parts)===null||_response$data$candid9===void 0?void 0:(_response$data$candid0=_response$data$candid9[0])===null||_response$data$candid0===void 0?void 0:_response$data$candid0.text)||'Sorry, I couldn\\'t generate a response.';}else{aiResponse='Sorry, AI functionality is currently unavailable. API key not set.';}}setMessages(prev=>[...prev,{role:'assistant',content:aiResponse}]);}catch(error){console.error('Error getting AI response:',error);setMessages(prev=>[...prev,{role:'assistant',content:'Sorry, I encountered an error while processing your request.'}]);}finally{setLoading(false);}};const handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSend();}};const getSelectedProfileInfo=()=>{if(!selectedProfile)return null;return profiles.find(p=>p.id===selectedProfile);};const selectedProfileData=getSelectedProfileInfo();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',width:'100%',background:'none',fontFamily:'Inter, Poppins, system-ui, sans-serif',color:'var(--text-primary)',transition:'color 0.3s'},children:/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",sx:{py:{xs:3,md:8},maxWidth:1200},children:[/*#__PURE__*/_jsxs(Box,{className:\"glass-element\",sx:{textAlign:{xs:'center',md:'left'},mb:{xs:6,md:10},background:{xs:undefined,md:undefined},color:'var(--text-primary)',boxShadow:'0 2px 12px 0 rgba(0,0,0,0.04)',borderRadius:3,p:{xs:2,md:4},transition:'background 0.3s, color 0.3s'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h1\",sx:{fontSize:{xs:40,md:56},fontWeight:800,letterSpacing:'-0.02em',mb:2,color:'var(--text-primary)'},children:\"Get Better at Dating with AI\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",sx:{fontSize:{xs:20,md:28},fontWeight:500,color:'var(--text-secondary)',mb:4,maxWidth:700},children:\"Your smart, modern AI wingman. Start a conversation, get advice, or ask about anyone in your database.\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"large\",sx:{fontSize:18,fontWeight:600,borderRadius:2,px:5,py:1.5,boxShadow:'0 4px 12px 0 rgba(108,99,255,0.08)',background:'linear-gradient(90deg, #6c63ff 0%, #ff6b6b 100%)',color:'white',mb:{xs:4,md:0},transition:'all 0.2s','&:hover':{filter:'brightness(1.08)'},outline:'none'},onClick:()=>{const el=document.getElementById('ai-chat-section');if(el)el.scrollIntoView({behavior:'smooth'});},children:\"Start Conversation\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{mb:{xs:6,md:10},display:'flex',flexDirection:'column',alignItems:{xs:'center',md:'flex-start'}},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{fontSize:24,fontWeight:600,mb:2,color:'var(--text-primary)'},children:\"Choose a Profile\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:2,flexWrap:'wrap',width:'100%',justifyContent:{xs:'center',md:'flex-start'}},children:[/*#__PURE__*/_jsx(Button,{variant:selectedProfile===''?'contained':'outlined',onClick:()=>setSelectedProfile(''),sx:{borderRadius:3,px:3,py:1.2,fontWeight:500,fontSize:16,background:selectedProfile===''?'linear-gradient(90deg, #6c63ff 0%, #ff6b6b 100%)':'var(--card-bg)',color:selectedProfile===''?'white':'var(--text-primary)',boxShadow:selectedProfile===''?'0 4px 12px 0 rgba(108,99,255,0.08)':'none',border:'1.5px solid #e2e8f0',transition:'all 0.2s','&:hover':{transform:'scale(1.02)',filter:'brightness(1.08)'},outline:'none'},children:\"General (No Profile)\"}),profiles.map(profile=>/*#__PURE__*/_jsx(Button,{variant:selectedProfile===profile.id?'contained':'outlined',onClick:()=>setSelectedProfile(profile.id),sx:{borderRadius:3,px:3,py:1.2,fontWeight:500,fontSize:16,background:selectedProfile===profile.id?'linear-gradient(90deg, #6c63ff 0%, #ff6b6b 100%)':'var(--card-bg)',color:selectedProfile===profile.id?'white':'var(--text-primary)',boxShadow:selectedProfile===profile.id?'0 4px 12px 0 rgba(108,99,255,0.08)':'none',border:'1.5px solid #e2e8f0',transition:'all 0.2s','&:hover':{transform:'scale(1.02)',filter:'brightness(1.08)'},outline:'none'},children:profile.name||profile.username||profile.id},profile.id))]})]}),/*#__PURE__*/_jsxs(Box,{id:\"ai-chat-section\",sx:{mb:{xs:6,md:10},display:'flex',flexDirection:{xs:'column',md:'row'},gap:6,alignItems:'flex-start',justifyContent:'center'},children:[selectedProfileData&&/*#__PURE__*/_jsxs(Paper,{elevation:2,className:\"glass-element\",sx:{p:3,minWidth:260,maxWidth:320,mb:{xs:4,md:0},borderRadius:3,boxShadow:'0 4px 6px rgba(0,0,0,0.05)',background:'var(--gradient-card)',color:'var(--text-primary)',transition:'background 0.3s, color 0.3s'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{fontWeight:600,fontSize:20,mb:2,color:'var(--text-primary)'},children:\"Profile Info\"}),((_selectedProfileData$=selectedProfileData.likes)===null||_selectedProfileData$===void 0?void 0:_selectedProfileData$.length)>0&&/*#__PURE__*/_jsxs(Box,{sx:{mb:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:'var(--text-primary)',fontWeight:500},children:\"Likes:\"}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:0.5,mt:0.5},children:selectedProfileData.likes.map((like,index)=>/*#__PURE__*/_jsx(Chip,{label:like,size:\"small\",variant:\"filled\",sx:{color:'var(--text-primary)',background:theme=>theme.palette.mode==='dark'?'rgba(255,255,255,0.04)':'#e3e8f0',border:theme=>theme.palette.mode==='dark'?'1px solid rgba(255,255,255,0.25)':'1px solid #cbd5e1',fontWeight:500,fontSize:15,letterSpacing:0.1,mb:0.5}},index))})]}),((_selectedProfileData$2=selectedProfileData.personality_tags)===null||_selectedProfileData$2===void 0?void 0:_selectedProfileData$2.length)>0&&/*#__PURE__*/_jsxs(Box,{sx:{mb:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"var(--text-secondary)\",children:\"Personality:\"}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:0.5,mt:0.5},children:selectedProfileData.personality_tags.map((tag,index)=>/*#__PURE__*/_jsx(Chip,{label:tag,size:\"small\",color:\"primary\"},index))})]}),((_selectedProfileData$3=selectedProfileData.inside_jokes)===null||_selectedProfileData$3===void 0?void 0:_selectedProfileData$3.length)>0&&/*#__PURE__*/_jsxs(Box,{sx:{mb:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"var(--text-secondary)\",children:\"Inside Jokes:\"}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:0.5,mt:0.5},children:selectedProfileData.inside_jokes.map((joke,index)=>/*#__PURE__*/_jsx(Chip,{label:joke,size:\"small\",color:\"secondary\"},index))})]}),((_selectedProfileData$4=selectedProfileData.conversation_goals)===null||_selectedProfileData$4===void 0?void 0:_selectedProfileData$4.length)>0&&/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"var(--text-secondary)\",children:\"Goals:\"}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',flexWrap:'wrap',gap:0.5,mt:0.5},children:selectedProfileData.conversation_goals.map((goal,index)=>/*#__PURE__*/_jsx(Chip,{label:goal,size:\"small\",color:\"success\"},index))})]})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',flex:1,minWidth:320,gap:3},children:[/*#__PURE__*/_jsxs(Paper,{elevation:3,className:\"card\",sx:{flex:1,borderRadius:3,boxShadow:'0 4px 6px rgba(0,0,0,0.05)',display:'flex',flexDirection:'column',minHeight:420,background:'var(--card-bg)',color:'var(--text-primary)',transition:'background 0.3s, color 0.3s'},children:[/*#__PURE__*/_jsxs(Box,{sx:{flex:1,overflow:'auto',p:3},children:[messages.length===0?/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'center',py:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"var(--text-secondary)\",gutterBottom:true,children:\"Start a conversation with your AI assistant\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"var(--text-secondary)\",children:selectedProfileData?`Ask me anything about ${selectedProfileData.name||selectedProfileData.username}!`:'Ask me about dating strategies, conversation tips, or select a profile to ask specific questions.'})]}):messages.map((message,index)=>/*#__PURE__*/_jsx(Box,{sx:{mb:2,display:'flex',justifyContent:message.role==='user'?'flex-end':'flex-start',transition:'all 0.2s'},children:/*#__PURE__*/_jsx(Paper,{sx:{p:2,maxWidth:'70%',backgroundColor:message.role==='user'?'primary.main':'grey.100',color:message.role==='user'?'white':'var(--text-primary)',borderRadius:2,boxShadow:message.role==='user'?'0 2px 8px 0 rgba(108,99,255,0.08)':'0 2px 8px 0 rgba(0,0,0,0.04)',fontSize:16,fontWeight:400,letterSpacing:'-0.01em',transition:'all 0.2s'},children:/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{fontSize:16,lineHeight:1.6},children:message.content})})},index)),loading&&/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'flex-start',mb:2},children:/*#__PURE__*/_jsx(Paper,{sx:{p:2,backgroundColor:'grey.100',borderRadius:2},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",color:\"var(--text-secondary)\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"typing-indicator\",style:{display:'inline-flex',gap:2,alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{width:8,height:8,borderRadius:'50%',background:'#6c63ff',display:'inline-block',marginRight:2,animation:'blink 1s infinite alternate'}}),/*#__PURE__*/_jsx(\"span\",{style:{width:8,height:8,borderRadius:'50%',background:'#6c63ff',display:'inline-block',marginRight:2,animation:'blink 1s 0.2s infinite alternate'}}),/*#__PURE__*/_jsx(\"span\",{style:{width:8,height:8,borderRadius:'50%',background:'#6c63ff',display:'inline-block',animation:'blink 1s 0.4s infinite alternate'}})]}),\"Thinking...\"]})})})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Box,{sx:{p:3,bgcolor:'transparent',borderBottomLeftRadius:12,borderBottomRightRadius:12},children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:2},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,maxRows:4,value:input,onChange:e=>setInput(e.target.value),onKeyPress:handleKeyPress,placeholder:selectedProfileData?`Ask me about ${selectedProfileData.name||selectedProfileData.username}...`:\"Ask me anything about dating, conversation strategies...\",disabled:loading,sx:{fontSize:16,borderRadius:2,background:'var(--card-bg)',color:'var(--text-primary)',boxShadow:'0 2px 8px 0 rgba(0,0,0,0.03)','& .MuiOutlinedInput-root':{borderRadius:2,background:'var(--card-bg)',color:'var(--text-primary)'},'& .Mui-focused .MuiOutlinedInput-notchedOutline':{borderColor:'#6c63ff',boxShadow:'0 0 0 2px #6c63ff33'}}}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleSend,disabled:loading||!input.trim(),sx:{height:'56px',minWidth:'56px',borderRadius:2,fontWeight:600,fontSize:20,background:'linear-gradient(90deg, #6c63ff 0%, #ff6b6b 100%)',color:'white',boxShadow:'0 4px 12px 0 rgba(108,99,255,0.08)',transition:'all 0.2s','&:hover':{filter:'brightness(1.08)'},outline:'none'},children:/*#__PURE__*/_jsx(SendIcon,{})})]})})]}),/*#__PURE__*/_jsxs(Box,{className:\"card\",sx:{mt:0,background:'var(--card-bg)',color:'var(--text-primary)',borderRadius:3,boxShadow:'0 2px 8px 0 rgba(0,0,0,0.03)',transition:'background 0.3s, color 0.3s',pb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{fontSize:24,fontWeight:600,mb:2,color:'var(--text-primary)',ml:2},children:\"Quick Questions\"}),/*#__PURE__*/_jsx(Box,{sx:{display:'grid',gridTemplateColumns:{xs:'1fr',sm:'1fr 1fr'},gap:4,maxWidth:700,mx:'auto',mb:0,pb:0},children:[\"What's her favorite pet?\",\"What should I talk about next?\",\"How can I make her laugh?\",\"What's the best time to ask her out?\"].map((question,index)=>/*#__PURE__*/_jsx(Paper,{elevation:1,className:\"glass-element\",sx:{p:3,borderRadius:3,fontSize:18,fontWeight:600,color:'var(--text-primary)',background:'var(--gradient-card)',boxShadow:'0 2px 8px 0 rgba(0,0,0,0.03)',cursor:'pointer',transition:'all 0.2s','&:hover':{transform:'scale(1.02)',boxShadow:'0 4px 16px 0 rgba(108,99,255,0.10)'},outline:'none',textAlign:'center',minHeight:80,display:'flex',alignItems:'center',justifyContent:'center'},tabIndex:0,role:\"button\",\"aria-label\":`Ask: ${question}`,onClick:()=>setInput(question),children:question},index))})]})]})]})]})}),/*#__PURE__*/_jsx(Snackbar,{open:showApiKeyError,autoHideDuration:6000,onClose:()=>setShowApiKeyError(false),anchorOrigin:{vertical:'top',horizontal:'center'},children:/*#__PURE__*/_jsx(MuiAlert,{elevation:6,variant:\"filled\",severity:\"error\",sx:{fontSize:18,alignItems:'center'},action:/*#__PURE__*/_jsx(Button,{color:\"inherit\",size:\"small\",onClick:()=>navigate('/settings'),children:\"Go to Settings\"}),children:\"AI features are unavailable. Please enter your Gemini API key in Settings.\"})})]});};export default AIAssistant;","map":{"version":3,"names":["React","useState","useEffect","Box","TextField","Button","Typography","Paper","Container","Chip","Divider","Alert","Snackbar","MuiAlert","Send","SendIcon","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AIAssistant","_selectedProfileData$","_selectedProfileData$2","_selectedProfileData$3","_selectedProfileData$4","input","setInput","messages","setMessages","loading","setLoading","profiles","setProfiles","selectedProfile","setSelectedProfile","geminiApiKey","setGeminiApiKey","showApiKeyError","setShowApiKeyError","navigate","fetchProfiles","fetchSettings","response","get","profilesArray","Object","entries","data","map","_ref","id","profile","error","console","gemini_api_key","handleSend","trim","userMessage","prev","role","content","profileData","find","p","aiResponse","_profileData$likes","_profileData$personal","_profileData$inside_j","_profileData$conversa","_profileData$previous","recentMessages","slice","m","join","contextPrompt","name","username","tone_preference","likes","personality_tags","inside_jokes","JSON","stringify","details","conversation_goals","previous_messages","from","text","_response$data$candid","_response$data$candid2","_response$data$candid3","_response$data$candid4","_response$data$candid5","post","contents","parts","generationConfig","temperature","maxOutputTokens","headers","candidates","generalPrompt","_response$data$candid6","_response$data$candid7","_response$data$candid8","_response$data$candid9","_response$data$candid0","handleKeyPress","e","key","shiftKey","preventDefault","getSelectedProfileInfo","selectedProfileData","children","sx","minHeight","width","background","fontFamily","color","transition","maxWidth","py","xs","md","className","textAlign","mb","undefined","boxShadow","borderRadius","variant","fontSize","fontWeight","letterSpacing","size","px","filter","outline","onClick","el","document","getElementById","scrollIntoView","behavior","display","flexDirection","alignItems","gap","flexWrap","justifyContent","border","transform","elevation","minWidth","length","mt","like","index","label","theme","palette","mode","tag","joke","goal","flex","overflow","gutterBottom","message","backgroundColor","lineHeight","style","height","marginRight","animation","bgcolor","borderBottomLeftRadius","borderBottomRightRadius","fullWidth","multiline","maxRows","value","onChange","target","onKeyPress","placeholder","disabled","borderColor","pb","ml","gridTemplateColumns","sm","mx","question","cursor","tabIndex","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","severity","action"],"sources":["/workspace/frontend/src/pages/AIAssistant.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  TextField,\n  Button,\n  Typography,\n  Paper,\n  Container,\n  Chip,\n  Divider,\n  Alert,\n  Snackbar,\n  Alert as MuiAlert\n} from '@mui/material';\nimport { Send as SendIcon } from '@mui/icons-material';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\n\nconst AIAssistant = () => {\n  const [input, setInput] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [profiles, setProfiles] = useState([]);\n  const [selectedProfile, setSelectedProfile] = useState('');\n  const [geminiApiKey, setGeminiApiKey] = useState('');\n  const [showApiKeyError, setShowApiKeyError] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    fetchProfiles();\n    fetchSettings();\n  }, []);\n\n  // 1. When changing selectedProfile, clear the chat\n  useEffect(() => {\n    setMessages([]);\n  }, [selectedProfile]);\n\n  const fetchProfiles = async () => {\n    try {\n      const response = await axios.get('https://3e79a6ace678.ngrok-free.app/api/profiles');\n      // Convert object to array with id field for easier handling\n      const profilesArray = Object.entries(response.data).map(([id, profile]) => ({\n        id,\n        ...profile\n      }));\n      setProfiles(profilesArray);\n    } catch (error) {\n      console.error('Error fetching profiles:', error);\n    }\n  };\n\n  const fetchSettings = async () => {\n    try {\n      const response = await axios.get('https://3e79a6ace678.ngrok-free.app/api/settings');\n      setGeminiApiKey(response.data.gemini_api_key || '');\n    } catch (error) {\n      console.error('Error fetching settings:', error);\n    }\n  };\n\n  const handleSend = async () => {\n    if (!input.trim()) return;\n    if (!geminiApiKey) {\n      setShowApiKeyError(true);\n      return;\n    }\n\n    const userMessage = input;\n    setInput('');\n    setLoading(true);\n\n    // Add user message to chat\n    setMessages(prev => [...prev, { role: 'user', content: userMessage }]);\n\n    try {\n      // Get selected profile data\n      const profileData = selectedProfile ? profiles.find(p => p.id === selectedProfile) : null;\n      \n      let aiResponse;\n      \n      if (profileData) {\n        // Create a custom prompt with profile data for context-aware responses\n        const recentMessages = messages.slice(-6).map(m => `${m.role === 'user' ? 'You' : 'AI'}: ${m.content}`).join('\\n');\n        const contextPrompt = `You are an AI assistant helping with dating and conversation management. \n\nContext about the girl you're asking about:\nName: ${profileData.name || 'Unknown'}\nUsername: ${profileData.username || 'Unknown'}\nTone Preference: ${profileData.tone_preference || 'Not specified'}\nLikes: ${profileData.likes?.join(', ') || 'None specified'}\nPersonality Tags: ${profileData.personality_tags?.join(', ') || 'None specified'}\nInside Jokes: ${profileData.inside_jokes?.join(', ') || 'None specified'}\nDetails: ${JSON.stringify(profileData.details || {})}\nConversation Goals: ${profileData.conversation_goals?.join(', ') || 'None specified'}\nRecent Messages: ${profileData.previous_messages?.slice(-20).map(m => `${m.from}: ${m.text}`).join('\\n') || 'No recent messages'}\n\nRecent Conversation:\n${recentMessages}\n\nBased on this information, please answer the following question: ${userMessage}\n\nKeep your answer concise and actionable unless I specifically ask for a detailed breakdown. Avoid markdown formatting, bullet lists, or section headers unless requested.`;\n\n        // Call Gemini directly with the context-aware prompt\n        if (geminiApiKey) {\n          const response = await axios.post('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyBJYFwycbxfwTal-Dfoh-wdb3kN_PhsEJo', {\n            contents: [{ parts: [{ text: contextPrompt }] }],\n            generationConfig: { temperature: 0.7, maxOutputTokens: 2048 }\n          }, {\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          });\n          \n          aiResponse = response.data.candidates?.[0]?.content?.parts?.[0]?.text || 'Sorry, I couldn\\'t generate a response.';\n        } else {\n          aiResponse = 'Sorry, AI functionality is currently unavailable. API key not set.';\n        }\n      } else {\n        // For general questions, we need to create a custom prompt and call Gemini directly\n        const recentMessages = messages.slice(-6).map(m => `${m.role === 'user' ? 'You' : 'AI'}: ${m.content}`).join('\\n');\n        const generalPrompt = `You are an AI assistant helping with dating and conversation management. \n\nRecent Conversation:\n${recentMessages}\n\nPlease answer this general question about dating and conversation strategies: ${userMessage}\n\nKeep your answer concise and actionable unless I specifically ask for a detailed breakdown. Avoid markdown formatting, bullet lists, or section headers unless requested.`;\n\n        // Call Gemini directly for general questions\n        if (geminiApiKey) {\n          const response = await axios.post('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyBJYFwycbxfwTal-Dfoh-wdb3kN_PhsEJo', {\n            contents: [{ parts: [{ text: generalPrompt }] }],\n            generationConfig: { temperature: 0.7, maxOutputTokens: 2048 }\n          }, {\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          });\n          \n          aiResponse = response.data.candidates?.[0]?.content?.parts?.[0]?.text || 'Sorry, I couldn\\'t generate a response.';\n        } else {\n          aiResponse = 'Sorry, AI functionality is currently unavailable. API key not set.';\n        }\n      }\n      \n      setMessages(prev => [...prev, { role: 'assistant', content: aiResponse }]);\n    } catch (error) {\n      console.error('Error getting AI response:', error);\n      setMessages(prev => [...prev, { \n        role: 'assistant', \n        content: 'Sorry, I encountered an error while processing your request.' \n      }]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  const getSelectedProfileInfo = () => {\n    if (!selectedProfile) return null;\n    return profiles.find(p => p.id === selectedProfile);\n  };\n\n  const selectedProfileData = getSelectedProfileInfo();\n\n  return (\n    <>\n      <Box\n        sx={{\n          minHeight: '100vh',\n          width: '100%',\n          background: 'none',\n          fontFamily: 'Inter, Poppins, system-ui, sans-serif',\n          color: 'var(--text-primary)',\n          transition: 'color 0.3s',\n        }}\n      >\n        <Container maxWidth=\"lg\" sx={{ py: { xs: 3, md: 8 }, maxWidth: 1200 }}>\n          {/* Main Hero Section */}\n          <Box\n            className=\"glass-element\"\n            sx={{\n              textAlign: { xs: 'center', md: 'left' },\n              mb: { xs: 6, md: 10 },\n              background: { xs: undefined, md: undefined },\n              color: 'var(--text-primary)',\n              boxShadow: '0 2px 12px 0 rgba(0,0,0,0.04)',\n              borderRadius: 3,\n              p: { xs: 2, md: 4 },\n              transition: 'background 0.3s, color 0.3s',\n            }}\n          >\n            <Typography variant=\"h1\" sx={{ fontSize: { xs: 40, md: 56 }, fontWeight: 800, letterSpacing: '-0.02em', mb: 2, color: 'var(--text-primary)' }}>\n              Get Better at Dating with AI\n            </Typography>\n            <Typography variant=\"h5\" sx={{ fontSize: { xs: 20, md: 28 }, fontWeight: 500, color: 'var(--text-secondary)', mb: 4, maxWidth: 700 }}>\n              Your smart, modern AI wingman. Start a conversation, get advice, or ask about anyone in your database.\n            </Typography>\n            <Button\n              variant=\"contained\"\n              size=\"large\"\n              sx={{\n                fontSize: 18,\n                fontWeight: 600,\n                borderRadius: 2,\n                px: 5,\n                py: 1.5,\n                boxShadow: '0 4px 12px 0 rgba(108,99,255,0.08)',\n                background: 'linear-gradient(90deg, #6c63ff 0%, #ff6b6b 100%)',\n                color: 'white',\n                mb: { xs: 4, md: 0 },\n                transition: 'all 0.2s',\n                '&:hover': { filter: 'brightness(1.08)' },\n                outline: 'none',\n              }}\n              onClick={() => {\n                const el = document.getElementById('ai-chat-section');\n                if (el) el.scrollIntoView({ behavior: 'smooth' });\n              }}\n            >\n              Start Conversation\n            </Button>\n          </Box>\n\n          {/* Profile Selection - horizontal card pills */}\n          <Box sx={{ mb: { xs: 6, md: 10 }, display: 'flex', flexDirection: 'column', alignItems: { xs: 'center', md: 'flex-start' } }}>\n            <Typography variant=\"h6\" sx={{ fontSize: 24, fontWeight: 600, mb: 2, color: 'var(--text-primary)' }}>\n              Choose a Profile\n            </Typography>\n            <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap', width: '100%', justifyContent: { xs: 'center', md: 'flex-start' } }}>\n              <Button\n                variant={selectedProfile === '' ? 'contained' : 'outlined'}\n                onClick={() => setSelectedProfile('')}\n                sx={{\n                  borderRadius: 3,\n                  px: 3,\n                  py: 1.2,\n                  fontWeight: 500,\n                  fontSize: 16,\n                  background: selectedProfile === '' ? 'linear-gradient(90deg, #6c63ff 0%, #ff6b6b 100%)' : 'var(--card-bg)',\n                  color: selectedProfile === '' ? 'white' : 'var(--text-primary)',\n                  boxShadow: selectedProfile === '' ? '0 4px 12px 0 rgba(108,99,255,0.08)' : 'none',\n                  border: '1.5px solid #e2e8f0',\n                  transition: 'all 0.2s',\n                  '&:hover': { transform: 'scale(1.02)', filter: 'brightness(1.08)' },\n                  outline: 'none',\n                }}\n              >\n                General (No Profile)\n              </Button>\n              {profiles.map((profile) => (\n                <Button\n                  key={profile.id}\n                  variant={selectedProfile === profile.id ? 'contained' : 'outlined'}\n                  onClick={() => setSelectedProfile(profile.id)}\n                  sx={{\n                    borderRadius: 3,\n                    px: 3,\n                    py: 1.2,\n                    fontWeight: 500,\n                    fontSize: 16,\n                    background: selectedProfile === profile.id ? 'linear-gradient(90deg, #6c63ff 0%, #ff6b6b 100%)' : 'var(--card-bg)',\n                    color: selectedProfile === profile.id ? 'white' : 'var(--text-primary)',\n                    boxShadow: selectedProfile === profile.id ? '0 4px 12px 0 rgba(108,99,255,0.08)' : 'none',\n                    border: '1.5px solid #e2e8f0',\n                    transition: 'all 0.2s',\n                    '&:hover': { transform: 'scale(1.02)', filter: 'brightness(1.08)' },\n                    outline: 'none',\n                  }}\n                >\n                  {profile.name || profile.username || profile.id}\n                </Button>\n              ))}\n            </Box>\n          </Box>\n\n          {/* AI Chat Section */}\n          <Box id=\"ai-chat-section\" sx={{ mb: { xs: 6, md: 10 }, display: 'flex', flexDirection: { xs: 'column', md: 'row' }, gap: 6, alignItems: 'flex-start', justifyContent: 'center' }}>\n            {/* Profile Info Card (secondary) */}\n            {selectedProfileData && (\n              <Paper elevation={2} className=\"glass-element\" sx={{ p: 3, minWidth: 260, maxWidth: 320, mb: { xs: 4, md: 0 }, borderRadius: 3, boxShadow: '0 4px 6px rgba(0,0,0,0.05)', background: 'var(--gradient-card)', color: 'var(--text-primary)', transition: 'background 0.3s, color 0.3s' }}>\n                <Typography variant=\"h6\" sx={{ fontWeight: 600, fontSize: 20, mb: 2, color: 'var(--text-primary)' }}>Profile Info</Typography>\n                {selectedProfileData.likes?.length > 0 && (\n                  <Box sx={{ mb: 1 }}>\n                    <Typography variant=\"caption\" sx={{ color: 'var(--text-primary)', fontWeight: 500 }}>Likes:</Typography>\n                    <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5, mt: 0.5 }}>\n                      {selectedProfileData.likes.map((like, index) => (\n                        <Chip\n                          key={index}\n                          label={like}\n                          size=\"small\"\n                          variant=\"filled\"\n                          sx={{\n                            color: 'var(--text-primary)',\n                            background: (theme) => theme.palette.mode === 'dark' ? 'rgba(255,255,255,0.04)' : '#e3e8f0',\n                            border: (theme) => theme.palette.mode === 'dark' ? '1px solid rgba(255,255,255,0.25)' : '1px solid #cbd5e1',\n                            fontWeight: 500,\n                            fontSize: 15,\n                            letterSpacing: 0.1,\n                            mb: 0.5,\n                          }}\n                        />\n                      ))}\n                    </Box>\n                  </Box>\n                )}\n                {selectedProfileData.personality_tags?.length > 0 && (\n                  <Box sx={{ mb: 1 }}>\n                    <Typography variant=\"caption\" color=\"var(--text-secondary)\">Personality:</Typography>\n                    <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5, mt: 0.5 }}>\n                      {selectedProfileData.personality_tags.map((tag, index) => (\n                        <Chip key={index} label={tag} size=\"small\" color=\"primary\" />\n                      ))}\n                    </Box>\n                  </Box>\n                )}\n                {selectedProfileData.inside_jokes?.length > 0 && (\n                  <Box sx={{ mb: 1 }}>\n                    <Typography variant=\"caption\" color=\"var(--text-secondary)\">Inside Jokes:</Typography>\n                    <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5, mt: 0.5 }}>\n                      {selectedProfileData.inside_jokes.map((joke, index) => (\n                        <Chip key={index} label={joke} size=\"small\" color=\"secondary\" />\n                      ))}\n                    </Box>\n                  </Box>\n                )}\n                {selectedProfileData.conversation_goals?.length > 0 && (\n                  <Box>\n                    <Typography variant=\"caption\" color=\"var(--text-secondary)\">Goals:</Typography>\n                    <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5, mt: 0.5 }}>\n                      {selectedProfileData.conversation_goals.map((goal, index) => (\n                        <Chip key={index} label={goal} size=\"small\" color=\"success\" />\n                      ))}\n                    </Box>\n                  </Box>\n                )}\n              </Paper>\n            )}\n            {/* Group Chat Card and Quick Questions in a vertical flex container */}\n            <Box sx={{ display: 'flex', flexDirection: 'column', flex: 1, minWidth: 320, gap: 3 }}>\n            {/* Chat Card */}\n              <Paper elevation={3} className=\"card\" sx={{ flex: 1, borderRadius: 3, boxShadow: '0 4px 6px rgba(0,0,0,0.05)', display: 'flex', flexDirection: 'column', minHeight: 420, background: 'var(--card-bg)', color: 'var(--text-primary)', transition: 'background 0.3s, color 0.3s' }}>\n              <Box sx={{ flex: 1, overflow: 'auto', p: 3 }}>\n                {messages.length === 0 ? (\n                  <Box sx={{ textAlign: 'center', py: 4 }}>\n                      <Typography variant=\"h6\" color=\"var(--text-secondary)\" gutterBottom>\n                      Start a conversation with your AI assistant\n                    </Typography>\n                      <Typography variant=\"body2\" color=\"var(--text-secondary)\">\n                      {selectedProfileData \n                        ? `Ask me anything about ${selectedProfileData.name || selectedProfileData.username}!`\n                        : 'Ask me about dating strategies, conversation tips, or select a profile to ask specific questions.'\n                      }\n                    </Typography>\n                  </Box>\n                ) : (\n                  messages.map((message, index) => (\n                    <Box\n                      key={index}\n                      sx={{\n                        mb: 2,\n                        display: 'flex',\n                        justifyContent: message.role === 'user' ? 'flex-end' : 'flex-start',\n                        transition: 'all 0.2s',\n                      }}\n                    >\n                      <Paper\n                        sx={{\n                          p: 2,\n                          maxWidth: '70%',\n                          backgroundColor: message.role === 'user' ? 'primary.main' : 'grey.100',\n                            color: message.role === 'user' ? 'white' : 'var(--text-primary)',\n                          borderRadius: 2,\n                          boxShadow: message.role === 'user' ? '0 2px 8px 0 rgba(108,99,255,0.08)' : '0 2px 8px 0 rgba(0,0,0,0.04)',\n                          fontSize: 16,\n                          fontWeight: 400,\n                          letterSpacing: '-0.01em',\n                          transition: 'all 0.2s',\n                        }}\n                      >\n                        <Typography variant=\"body1\" sx={{ fontSize: 16, lineHeight: 1.6 }}>{message.content}</Typography>\n                      </Paper>\n                    </Box>\n                  ))\n                )}\n                {loading && (\n                  <Box sx={{ display: 'flex', justifyContent: 'flex-start', mb: 2 }}>\n                    <Paper sx={{ p: 2, backgroundColor: 'grey.100', borderRadius: 2 }}>\n                        <Typography variant=\"body1\" color=\"var(--text-secondary)\">\n                        <span className=\"typing-indicator\" style={{ display: 'inline-flex', gap: 2, alignItems: 'center' }}>\n                          <span style={{ width: 8, height: 8, borderRadius: '50%', background: '#6c63ff', display: 'inline-block', marginRight: 2, animation: 'blink 1s infinite alternate' }}></span>\n                          <span style={{ width: 8, height: 8, borderRadius: '50%', background: '#6c63ff', display: 'inline-block', marginRight: 2, animation: 'blink 1s 0.2s infinite alternate' }}></span>\n                          <span style={{ width: 8, height: 8, borderRadius: '50%', background: '#6c63ff', display: 'inline-block', animation: 'blink 1s 0.4s infinite alternate' }}></span>\n                        </span>\n                        Thinking...\n                      </Typography>\n                    </Paper>\n                  </Box>\n                )}\n              </Box>\n              <Divider />\n              {/* Input */}\n                <Box sx={{ p: 3, bgcolor: 'transparent', borderBottomLeftRadius: 12, borderBottomRightRadius: 12 }}>\n                <Box sx={{ display: 'flex', gap: 2 }}>\n                  <TextField\n                    fullWidth\n                    multiline\n                    maxRows={4}\n                    value={input}\n                    onChange={(e) => setInput(e.target.value)}\n                    onKeyPress={handleKeyPress}\n                    placeholder={\n                      selectedProfileData \n                        ? `Ask me about ${selectedProfileData.name || selectedProfileData.username}...`\n                        : \"Ask me anything about dating, conversation strategies...\"\n                    }\n                    disabled={loading}\n                    sx={{\n                      fontSize: 16,\n                      borderRadius: 2,\n                        background: 'var(--card-bg)',\n                        color: 'var(--text-primary)',\n                      boxShadow: '0 2px 8px 0 rgba(0,0,0,0.03)',\n                      '& .MuiOutlinedInput-root': {\n                        borderRadius: 2,\n                          background: 'var(--card-bg)',\n                          color: 'var(--text-primary)',\n                      },\n                      '& .Mui-focused .MuiOutlinedInput-notchedOutline': {\n                        borderColor: '#6c63ff',\n                        boxShadow: '0 0 0 2px #6c63ff33',\n                      },\n                    }}\n                  />\n                  <Button\n                    variant=\"contained\"\n                    onClick={handleSend}\n                    disabled={loading || !input.trim()}\n                    sx={{\n                      height: '56px',\n                      minWidth: '56px',\n                      borderRadius: 2,\n                      fontWeight: 600,\n                      fontSize: 20,\n                      background: 'linear-gradient(90deg, #6c63ff 0%, #ff6b6b 100%)',\n                      color: 'white',\n                      boxShadow: '0 4px 12px 0 rgba(108,99,255,0.08)',\n                      transition: 'all 0.2s',\n                      '&:hover': { filter: 'brightness(1.08)' },\n                      outline: 'none',\n                    }}\n                  >\n                    <SendIcon />\n                  </Button>\n                </Box>\n              </Box>\n            </Paper>\n              {/* Quick Questions Section - now always directly beneath the chat card */}\n              <Box className=\"card\" sx={{ mt: 0, background: 'var(--card-bg)', color: 'var(--text-primary)', borderRadius: 3, boxShadow: '0 2px 8px 0 rgba(0,0,0,0.03)', transition: 'background 0.3s, color 0.3s', pb: 4 }}>\n                <Typography variant=\"h6\" sx={{ fontSize: 24, fontWeight: 600, mb: 2, color: 'var(--text-primary)', ml: 2 }}>\n            Quick Questions\n          </Typography>\n                <Box sx={{ display: 'grid', gridTemplateColumns: { xs: '1fr', sm: '1fr 1fr' }, gap: 4, maxWidth: 700, mx: 'auto', mb: 0, pb: 0 }}>\n              {[\n                \"What's her favorite pet?\",\n                \"What should I talk about next?\",\n                \"How can I make her laugh?\",\n                \"What's the best time to ask her out?\"\n              ].map((question, index) => (\n                <Paper\n                  key={index}\n                  elevation={1}\n                      className=\"glass-element\"\n                  sx={{\n                    p: 3,\n                    borderRadius: 3,\n                        fontSize: 18,\n                        fontWeight: 600,\n                        color: 'var(--text-primary)',\n                        background: 'var(--gradient-card)',\n                    boxShadow: '0 2px 8px 0 rgba(0,0,0,0.03)',\n                    cursor: 'pointer',\n                    transition: 'all 0.2s',\n                    '&:hover': { transform: 'scale(1.02)', boxShadow: '0 4px 16px 0 rgba(108,99,255,0.10)' },\n                    outline: 'none',\n                    textAlign: 'center',\n                        minHeight: 80,\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                  }}\n                  tabIndex={0}\n                  role=\"button\"\n                  aria-label={`Ask: ${question}`}\n                  onClick={() => setInput(question)}\n                >\n                  {question}\n                </Paper>\n              ))}\n                </Box>\n              </Box>\n            </Box>\n          </Box>\n        </Container>\n      </Box>\n      <Snackbar\n        open={showApiKeyError}\n        autoHideDuration={6000}\n        onClose={() => setShowApiKeyError(false)}\n        anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n      >\n        <MuiAlert\n          elevation={6}\n          variant=\"filled\"\n          severity=\"error\"\n          sx={{ fontSize: 18, alignItems: 'center' }}\n          action={\n            <Button color=\"inherit\" size=\"small\" onClick={() => navigate('/settings')}>Go to Settings</Button>\n          }\n        >\n          AI features are unavailable. Please enter your Gemini API key in Settings.\n        </MuiAlert>\n      </Snackbar>\n    </>\n  );\n};\n\nexport default AIAssistant; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}