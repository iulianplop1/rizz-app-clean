{"ast":null,"code":"import React,{useEffect,useState,useRef,memo,useCallback,useMemo}from'react';import{Box,Typography,Card,CardContent,Button,TextField,Chip,Stack,Dialog,DialogTitle,DialogContent,DialogActions,Tooltip,Avatar,CircularProgress,Fab,Menu,MenuItem,IconButton,Alert,Skeleton}from'@mui/material';import{Add as AddIcon,Delete as DeleteIcon,Edit as EditIcon,FilterList as FilterListIcon,Star as StarIcon,Message as MessageIcon,CompareArrows as CompareArrowsIcon,MoreVert as MoreVertIcon,CloudUpload as CloudUploadIcon,ExpandMore as ExpandMoreIcon,ExpandLess as ExpandLessIcon}from'@mui/icons-material';import{profilesAPI}from'../utils/api';import{debounce,memoize,performanceMonitor}from'../utils/performance';import axios from'axios';// Memoized mood analysis for better performance\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const analyzeMood=memoize(messages=>{const lastMsgs=(messages||[]).slice(-5).map(m=>{var _m$text;return((_m$text=m.text)===null||_m$text===void 0?void 0:_m$text.toLowerCase())||'';}).join(' ');if(/love|amazing|great|happy|fun|ðŸ˜|ðŸ˜„|ðŸ˜Š|ðŸ˜˜|flirt|kiss|cute|hot|babe|sweet/.test(lastMsgs))return'ðŸ˜';if(/angry|mad|annoy|hate|ðŸ˜ |ðŸ˜¡|wtf|ugh/.test(lastMsgs))return'ðŸ˜ ';if(/sad|cry|miss|lonely|ðŸ˜¢|ðŸ˜­/.test(lastMsgs))return'ðŸ˜¢';if(/ok|fine|alright|neutral|meh|ðŸ˜/.test(lastMsgs))return'ðŸ˜';return'ðŸ˜„';});// Memoized compatibility calculation\nconst computeCompatibility=memoize(profile=>{var _profile$likes,_profile$personality_,_profile$inside_jokes,_profile$previous_mes;const likes=((_profile$likes=profile.likes)===null||_profile$likes===void 0?void 0:_profile$likes.length)||0;const personality=((_profile$personality_=profile.personality_tags)===null||_profile$personality_===void 0?void 0:_profile$personality_.length)||0;const jokes=((_profile$inside_jokes=profile.inside_jokes)===null||_profile$inside_jokes===void 0?void 0:_profile$inside_jokes.length)||0;const msgs=((_profile$previous_mes=profile.previous_messages)===null||_profile$previous_mes===void 0?void 0:_profile$previous_mes.length)||0;let score=likes*2+personality*2+jokes*3+Math.min(msgs,20);score=Math.min(100,Math.round(score));return score;});function EditableChips(_ref){let{label,values,onChange}=_ref;const[input,setInput]=useState('');return/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",children:label}),/*#__PURE__*/_jsx(Stack,{direction:\"row\",spacing:1,sx:{flexWrap:'wrap',mb:1},children:values.map((v,i)=>/*#__PURE__*/_jsx(Chip,{label:v,onDelete:()=>onChange(values.filter((_,idx)=>idx!==i))},i))}),/*#__PURE__*/_jsx(TextField,{size:\"small\",value:input,onChange:e=>setInput(e.target.value),onKeyDown:e=>{if(e.key==='Enter'&&input.trim()){onChange([...values,input.trim()]);setInput('');}},placeholder:`Add ${label.toLowerCase()}`})]});}// 1. In ProfileEditor, always show fields for bio, age, and gender for all profiles\n// 2. In compact mode (or in the main card if only detailed mode), instead of inside joke, show top emoji and top word from the person's messages\n// 3. Ensure Edit/Delete are visible in the MoreVert menu (already handled)\n// Helper to get top emoji and top word from messages\nfunction getTopEmojiAndWord(messages){var _Object$entries$sort$,_Object$entries$sort$2;const text=(messages||[]).filter(m=>m.from!=='Me').map(m=>m.text).join(' ');// Emoji regex\nconst emojiRegex=/[\\p{Emoji}]/gu;const emojis=text.match(emojiRegex)||[];const emojiCounts={};emojis.forEach(e=>{emojiCounts[e]=(emojiCounts[e]||0)+1;});const topEmoji=((_Object$entries$sort$=Object.entries(emojiCounts).sort((a,b)=>b[1]-a[1])[0])===null||_Object$entries$sort$===void 0?void 0:_Object$entries$sort$[0])||'';// Top word\nconst words=text.toLowerCase().match(/\\b\\w{3,}\\b/g)||[];const wordCounts={};words.forEach(w=>{wordCounts[w]=(wordCounts[w]||0)+1;});const topWord=((_Object$entries$sort$2=Object.entries(wordCounts).sort((a,b)=>b[1]-a[1])[0])===null||_Object$entries$sort$2===void 0?void 0:_Object$entries$sort$2[0])||'';return{topEmoji,topWord};}function ProfileEditor(_ref2){let{profile,open,onClose,onSave}=_ref2;const[edit,setEdit]=useState(profile);useEffect(()=>{setEdit(profile);},[profile]);if(!edit)return null;return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:onClose,maxWidth:\"sm\",fullWidth:true,PaperProps:{sx:{backgroundColor:'white',color:'black','& .MuiDialogTitle-root':{backgroundColor:'white',color:'black'},'& .MuiDialogContent-root':{backgroundColor:'white',color:'black'},'& .MuiDialogActions-root':{backgroundColor:'white',color:'black'}}},BackdropProps:{sx:{backgroundColor:'rgba(0, 0, 0, 0.2) !important'}},children:[/*#__PURE__*/_jsxs(DialogTitle,{sx:{backgroundColor:'white',color:'black'},children:[\"Edit Profile: \",edit.name||edit.username||edit.user_id]}),/*#__PURE__*/_jsxs(DialogContent,{sx:{overflowY:'auto',maxHeight:'70vh',pt:3,backgroundColor:'white',color:'black'},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,size:\"small\",label:\"Name\",value:edit.name||'',onChange:e=>setEdit({...edit,name:e.target.value}),sx:{mt:2,mb:2,'& .MuiOutlinedInput-root':{backgroundColor:'white',color:'black'},'& .MuiInputLabel-root':{color:'rgba(0, 0, 0, 0.6)'}},InputLabelProps:{shrink:true}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Bio\",value:edit.bio||'',onChange:e=>setEdit({...edit,bio:e.target.value}),multiline:true,rows:2,sx:{mb:2,'& .MuiOutlinedInput-root':{backgroundColor:'white',color:'black'},'& .MuiInputLabel-root':{color:'rgba(0, 0, 0, 0.6)'}}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Age\",value:edit.age||'',onChange:e=>setEdit({...edit,age:e.target.value}),sx:{mb:2,'& .MuiOutlinedInput-root':{backgroundColor:'white',color:'black'},'& .MuiInputLabel-root':{color:'rgba(0, 0, 0, 0.6)'}}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Gender\",value:edit.gender||'',onChange:e=>setEdit({...edit,gender:e.target.value}),sx:{mb:2,'& .MuiOutlinedInput-root':{backgroundColor:'white',color:'black'},'& .MuiInputLabel-root':{color:'rgba(0, 0, 0, 0.6)'}}}),/*#__PURE__*/_jsx(EditableChips,{label:\"Likes\",values:edit.likes||[],onChange:v=>setEdit({...edit,likes:v})}),/*#__PURE__*/_jsx(EditableChips,{label:\"Personality Tags\",values:edit.personality_tags||[],onChange:v=>setEdit({...edit,personality_tags:v})}),/*#__PURE__*/_jsx(EditableChips,{label:\"Inside Jokes\",values:edit.inside_jokes||[],onChange:v=>setEdit({...edit,inside_jokes:v})}),/*#__PURE__*/_jsx(EditableChips,{label:\"Conversation Goals\",values:edit.conversation_goals||[],onChange:v=>setEdit({...edit,conversation_goals:v})}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Details (JSON)\",value:JSON.stringify(edit.details||{},null,2),onChange:e=>{try{setEdit({...edit,details:JSON.parse(e.target.value)});}catch{}},multiline:true,minRows:2,sx:{mt:2,'& .MuiOutlinedInput-root':{backgroundColor:'white',color:'black'},'& .MuiInputLabel-root':{color:'rgba(0, 0, 0, 0.6)'}}})]}),/*#__PURE__*/_jsxs(DialogActions,{sx:{backgroundColor:'white',color:'black'},children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,sx:{color:'black','&:hover':{backgroundColor:'rgba(0, 0, 0, 0.04)'}},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:()=>onSave(edit),sx:{backgroundColor:'#1976d2',color:'white','&:hover':{backgroundColor:'#115293'}},children:\"Save\"})]})]});}function ImportConversationDialog(_ref3){let{open,onClose,onImport}=_ref3;const[file,setFile]=useState(null);const[profileName,setProfileName]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[preview,setPreview]=useState(null);const handleFileChange=event=>{const selectedFile=event.target.files[0];if(selectedFile){if(selectedFile.size>10*1024*1024){// 10MB limit\nsetError('File size must be less than 10MB');return;}const reader=new FileReader();reader.onload=e=>{try{const data=JSON.parse(e.target.result);setFile(selectedFile);setPreview(data);setError('');// Auto-generate profile name from file name\nconst fileName=selectedFile.name.replace('.json','').replace(/[_-]/g,' ');setProfileName(fileName.charAt(0).toUpperCase()+fileName.slice(1));}catch(err){setError('Invalid JSON file');setFile(null);setPreview(null);}};reader.readAsText(selectedFile);}};const handleImport=async()=>{if(!file||!profileName.trim()){setError('Please select a file and enter a profile name');return;}setLoading(true);setError('');try{const formData=new FormData();formData.append('file',file);formData.append('profile_name',profileName);const response=await axios.post('http://localhost:5000/api/import-conversation',formData,{headers:{'Content-Type':'multipart/form-data'}});onImport(response.data);onClose();}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to import conversation');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:onClose,maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Import Conversation from JSON\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:2},children:\"Upload a JSON file containing conversation messages. The AI will analyze the conversation and extract personality traits, likes, and other preferences.\"}),/*#__PURE__*/_jsxs(Alert,{severity:\"info\",sx:{mb:2},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"File Requirements:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 Maximum size: 10MB\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 Format: JSON with messages array\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 Each message should have: from, text, timestamp\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 Example: \",`[{\"from\": \"Girl\", \"text\": \"Hello!\", \"timestamp\": \"2024-01-01 12:00\"}]`]}),/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(\"input\",{accept:\".json\",style:{display:'none'},id:\"conversation-file\",type:\"file\",onChange:handleFileChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"conversation-file\",children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",component:\"span\",startIcon:/*#__PURE__*/_jsx(CloudUploadIcon,{}),fullWidth:true,sx:{py:2},children:file?file.name:'Choose JSON File'})})]}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Profile Name\",value:profileName,onChange:e=>setProfileName(e.target.value),sx:{mb:2},placeholder:\"Enter a name for this profile\"}),preview&&/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"Preview:\"}),/*#__PURE__*/_jsxs(Box,{sx:{maxHeight:200,overflow:'auto',border:'1px solid #e0e0e0',borderRadius:1,p:1,bgcolor:'#f5f5f5'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:preview.messages?`${preview.messages.length} messages found`:'No messages array found'}),preview.messages&&preview.messages.slice(0,3).map((msg,idx)=>/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{fontFamily:'monospace',fontSize:'0.8rem'},children:[msg.from,\": \",msg.text]},idx)),preview.messages&&preview.messages.length>3&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"... and \",preview.messages.length-3,\" more messages\"]})]})]}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,disabled:loading,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleImport,disabled:loading||!file||!profileName.trim(),startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):/*#__PURE__*/_jsx(AddIcon,{}),children:loading?'Analyzing...':'Import & Analyze'})]})]});}function DeleteConfirmDialog(_ref4){let{open,onClose,onConfirm,profileName}=_ref4;return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:onClose,maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Delete Profile\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"Are you sure you want to delete the profile \\\"\",profileName,\"\\\"?\"]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mt:1},children:\"This action cannot be undone. All conversation history and profile data will be permanently removed.\"})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:onClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:onConfirm,color:\"error\",variant:\"contained\",children:\"Delete Profile\"})]})]});}function CircularProgressWithLabel(_ref5){let{value}=_ref5;return/*#__PURE__*/_jsxs(Box,{sx:{position:'relative',display:'inline-flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(CircularProgress,{variant:\"determinate\",value:value,size:48,thickness:5,sx:{color:value>70?'var(--primary-coral)':'var(--accent-blue)'}}),/*#__PURE__*/_jsx(Box,{sx:{top:0,left:0,bottom:0,right:0,position:'absolute',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(Typography,{variant:\"caption\",component:\"div\",color:\"text.primary\",sx:{fontWeight:700},children:`${Math.round(value)}%`})})]});}function Profiles(){const[profiles,setProfiles]=useState([]);const[selected,setSelected]=useState(null);const[editorOpen,setEditorOpen]=useState(false);const[importDialogOpen,setImportDialogOpen]=useState(false);const[deleteDialogOpen,setDeleteDialogOpen]=useState(false);const[profileToDelete,setProfileToDelete]=useState(null);const[filterAnchor,setFilterAnchor]=useState(null);const[sort,setSort]=useState('compatibility');const[search,setSearch]=useState('');// Debounced search for better performance\nconst debouncedSearch=useCallback(debounce(value=>{setSearch(value);},300),[]);const[expandedProfile,setExpandedProfile]=useState(null);const[filterInterest,setFilterInterest]=useState('all');const searchInputRef=useRef();const[selectedProfiles,setSelectedProfiles]=useState([]);// for comparison\nconst[compareOpen,setCompareOpen]=useState(false);const[starred,setStarred]=useState(()=>JSON.parse(localStorage.getItem('starredProfiles')||'[]'));const[loading,setLoading]=useState(true);const[menuAnchor,setMenuAnchor]=useState(null);const[menuProfile,setMenuProfile]=useState(null);const[error,setError]=useState(null);// Star/prioritize logic\nconst toggleStar=user_id=>{let newStarred;if(starred.includes(user_id)){newStarred=starred.filter(id=>id!==user_id);}else{newStarred=[...starred,user_id];}setStarred(newStarred);localStorage.setItem('starredProfiles',JSON.stringify(newStarred));};// Add to comparison\nconst toggleCompare=user_id=>{setSelectedProfiles(prev=>prev.includes(user_id)?prev.filter(id=>id!==user_id):[...prev,user_id]);};const openCompareModal=()=>setCompareOpen(true);const closeCompareModal=()=>setCompareOpen(false);// Optimized data fetching with error handling\nuseEffect(()=>{const fetchProfiles=async()=>{try{performanceMonitor.start('fetchProfiles');setLoading(true);const data=await profilesAPI.getAll();// Debug: Log what we received\nconsole.log('API response:',data);console.log('Data type:',typeof data);console.log('Is array:',Array.isArray(data));// Ensure data is an array\nif(!Array.isArray(data)){console.error('API returned non-array data:',data);setError('Invalid data format received from server.');setProfiles([]);return;}setProfiles(data);performanceMonitor.end('fetchProfiles');}catch(error){console.error('Failed to fetch profiles:',error);setError('Failed to load profiles. Please try again.');setProfiles([]);}finally{setLoading(false);}};fetchProfiles();},[]);// Memoized filtering and sorting for better performance\nconst filteredAndSortedProfiles=useMemo(()=>{// Ensure profiles is an array\nif(!Array.isArray(profiles)){console.warn('Profiles is not an array:',profiles);return[];}let filtered=[...profiles];// Search filter\nif(search.trim()){filtered=filtered.filter(p=>(p.name||'').toLowerCase().includes(search.toLowerCase()));}// Interest filter\nif(filterInterest&&filterInterest!=='all'){filtered=filtered.filter(p=>(p.likes||[]).some(like=>like.toLowerCase().includes(filterInterest.toLowerCase())));}// Sort starred first\nif(starred.length>0){filtered=[...filtered.filter(p=>starred.includes(p.user_id)),...filtered.filter(p=>!starred.includes(p.user_id))];}// Apply sorting\nreturn filtered.sort((a,b)=>{var _b$previous_messages,_a$previous_messages;if(sort==='compatibility')return computeCompatibility(b)-computeCompatibility(a);if(sort==='recent')return(((_b$previous_messages=b.previous_messages)===null||_b$previous_messages===void 0?void 0:_b$previous_messages.length)||0)-(((_a$previous_messages=a.previous_messages)===null||_a$previous_messages===void 0?void 0:_a$previous_messages.length)||0);if(sort==='name')return(a.name||'').localeCompare(b.name||'');return 0;});},[profiles,search,filterInterest,starred,sort]);// Memoized profile separation\nconst{mainUser,otherProfiles}=useMemo(()=>{const main=filteredAndSortedProfiles.find(p=>p.is_me||p.user_id==='me');const others=filteredAndSortedProfiles.filter(p=>!(p.is_me||p.user_id==='me'));return{mainUser:main,otherProfiles:others};},[filteredAndSortedProfiles]);// Floating Add Profile button\nconst handleAddProfile=()=>setImportDialogOpen(true);// Floating filter bar\nconst handleFilterClick=e=>setFilterAnchor(e.currentTarget);const handleFilterClose=()=>setFilterAnchor(null);const handleSortChange=val=>{setSort(val);setFilterAnchor(null);};// Card quick actions\nconst[quickActionAnchor,setQuickActionAnchor]=useState(null);const[quickActionProfile,setQuickActionProfile]=useState(null);const openQuickActions=(e,profile)=>{setQuickActionAnchor(e.currentTarget);setQuickActionProfile(profile);};const closeQuickActions=()=>{setQuickActionAnchor(null);setQuickActionProfile(null);};// Expand/collapse profile card\nconst handleExpand=user_id=>setExpandedProfile(expandedProfile===user_id?null:user_id);// Accessibility: focus search on mount\nuseEffect(()=>{if(searchInputRef.current)searchInputRef.current.setAttribute('aria-label','Search profiles by name');},[]);// Swipe gesture support (archive, message, view full profile)\n// Only for touch devices\nconst touchStartX=useRef(null);const touchProfile=useRef(null);const handleTouchStart=(e,profile)=>{touchStartX.current=e.touches[0].clientX;touchProfile.current=profile;};const handleTouchEnd=e=>{if(!touchStartX.current||!touchProfile.current)return;const dx=e.changedTouches[0].clientX-touchStartX.current;if(dx>80){// Swipe right: Quick Message\nsetQuickActionProfile(touchProfile.current);setQuickActionAnchor(document.body);// open menu at body\n}else if(dx<-80){// Swipe left: Archive (not implemented)\n// TODO: Archive action\n}touchStartX.current=null;touchProfile.current=null;};// Card header gradient by personality\nfunction getCardGradient(profile){if(profile.is_me||profile.user_id==='me')return'linear-gradient(135deg, #6c63ff 0%, #ff6b6b 100%)';if(computeCompatibility(profile)>70)return'linear-gradient(135deg, #ffb6b9 0%, #ff6b6b 100%)';if(computeCompatibility(profile)<30)return'linear-gradient(135deg, #b2ebf2 0%, #6c63ff 100%)';return'linear-gradient(135deg, #f8bbd0 0%, #b2ebf2 100%)';}// 1. Make all cards the same fixed width and height in the grid (e.g., minWidth: 340, maxWidth: 340, minHeight: 260, maxHeight: 260)\n// 2. When expanded, allow height to grow (maxHeight: none, minHeight: 260)\n// 3. Use ellipsis for text overflow, wrap where appropriate\n// 4. Keep all buttons in their correct, visually appealing places\n// 5. Polish layout for beauty and alignment\nfunction getCardSize(profile,isExpanded){if(isExpanded){return{minWidth:380,maxWidth:380,minHeight:260,maxHeight:'none'};}return{minWidth:380,maxWidth:380,minHeight:260,maxHeight:260};}// Collect all unique interests for filter dropdown\nconst allInterests=Array.from(new Set(profiles.flatMap(p=>p.likes||[]))).filter(Boolean);// Restore handleSave, handleImportSuccess, handleDeleteConfirm\nconst handleEdit=profile=>{setSelected(profile);setEditorOpen(true);};const handleSave=async profile=>{if(profile.is_me||profile.user_id==='me'){// Update user profile instead of regular profile\nawait axios.put('http://localhost:5000/api/user',profile);}else{// Update regular profile\nawait axios.put(`http://localhost:5000/api/profiles/${profile.user_id}`,profile);}// Refresh profiles to get updated data\nconst response=await axios.get('http://localhost:5000/api/profiles');setProfiles(response.data);setEditorOpen(false);};const handleImportSuccess=async newProfile=>{// Refresh profiles to include the new imported profile\nconst response=await axios.get('http://localhost:5000/api/profiles');setProfiles(response.data);};const handleDeleteClick=profile=>{setProfileToDelete(profile);setDeleteDialogOpen(true);};const handleDeleteConfirm=async()=>{if(!profileToDelete)return;try{if(profileToDelete.is_me||profileToDelete.user_id==='me'){// Don't allow deleting user profile\nalert('Cannot delete your own profile');return;}// Delete the profile\nawait axios.delete(`http://localhost:5000/api/profiles/${profileToDelete.user_id}`);// Refresh profiles\nconst response=await axios.get('http://localhost:5000/api/profiles');setProfiles(response.data);setDeleteDialogOpen(false);setProfileToDelete(null);}catch(error){console.error('Error deleting profile:',error);alert('Failed to delete profile');}};// Profile analytics helpers\nfunction getAnalytics(profile){const msgs=profile.previous_messages||[];const days={};msgs.forEach(m=>{if(m.timestamp){const day=m.timestamp.split(' ')[0];days[day]=(days[day]||0)+1;}});const responseTimes=[];let lastMe=null;msgs.forEach(m=>{if(m.from==='Me')lastMe=m;else if(lastMe&&m.timestamp&&lastMe.timestamp){const t1=new Date(lastMe.timestamp).getTime();const t2=new Date(m.timestamp).getTime();if(!isNaN(t1)&&!isNaN(t2))responseTimes.push(Math.abs(t2-t1)/60000);// in minutes\nlastMe=null;}});return{days,avgResponse:responseTimes.length?Math.round(responseTimes.reduce((a,b)=>a+b,0)/responseTimes.length):null,total:msgs.length};}// Export/share profile\nconst handleExportProfile=profile=>{// Export as JSON (placeholder)\nconst dataStr='data:text/json;charset=utf-8,'+encodeURIComponent(JSON.stringify(profile,null,2));const dlAnchor=document.createElement('a');dlAnchor.setAttribute('href',dataStr);dlAnchor.setAttribute('download',`${profile.name||profile.user_id}.json`);document.body.appendChild(dlAnchor);dlAnchor.click();dlAnchor.remove();};// Memoized ProfileCard for performance\nconst ProfileCard=/*#__PURE__*/memo(_ref6=>{let{profile,isExpanded,onExpand,onStar,onCompare,starred,selectedForCompare,loading,openMenu}=_ref6;if(loading){return/*#__PURE__*/_jsx(Box,{sx:{breakInside:'avoid',mb:3,width:'100%',display:'inline-block'},children:/*#__PURE__*/_jsx(Card,{sx:{minHeight:180,mb:2,boxShadow:3,borderRadius:3},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Skeleton,{variant:\"circular\",width:44,height:44}),/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",width:\"60%\",height:32}),/*#__PURE__*/_jsx(Skeleton,{variant:\"rectangular\",width:\"100%\",height:24,sx:{my:1}}),/*#__PURE__*/_jsx(Skeleton,{variant:\"rectangular\",width:\"100%\",height:16})]})})});}const mood=analyzeMood(profile.previous_messages||[]);const compatibility=computeCompatibility(profile);const cardSize=getCardSize(profile,isExpanded);const analytics=getAnalytics(profile);const{topEmoji,topWord}=getTopEmojiAndWord(profile.previous_messages);// Compact mode: minimal info\n// Grid mode: avatar and name only, very small\n// Detailed mode (default)\nreturn/*#__PURE__*/_jsx(Box,{sx:{breakInside:'avoid',mb:3,width:'100%',display:'inline-block',transition:'box-shadow 0.3s, transform 0.3s, opacity 0.5s',opacity:loading?0.5:1,position:'relative'},children:/*#__PURE__*/_jsx(Card,{sx:{...cardSize,height:isExpanded?'auto':260,mb:2,boxShadow:3,background:getCardGradient(profile),color:compatibility>70?'white':'var(--text-primary)',border:compatibility>70?'2px solid var(--primary-coral)':'1px solid #e0e0e0',position:'relative',overflow:'visible',transition:'box-shadow 0.3s, transform 0.3s','&:hover, &:focus':{boxShadow:8,transform:'translateY(-4px) scale(1.03)',outline:'2px solid var(--accent-blue)'}},tabIndex:0,\"aria-label\":`Profile: ${profile.name}`,children:/*#__PURE__*/_jsxs(CardContent,{sx:{pb:6,position:'relative',minHeight:180},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(IconButton,{\"aria-label\":starred?'Unstar profile':'Star profile',onClick:()=>onStar(profile.user_id),color:starred?'warning':'default',sx:{'&:hover':{backgroundColor:'rgba(102, 126, 234, 0.08)',color:starred?'warning.main':'inherit'}},children:/*#__PURE__*/_jsx(StarIcon,{})}),/*#__PURE__*/_jsx(Avatar,{sx:{mr:2,width:44,height:44,fontSize:22,bgcolor:compatibility>70?'white':'var(--accent-blue)',color:compatibility>70?'var(--accent-blue)':'white',boxShadow:2,transition:'transform 0.3s','&:hover':{transform:'scale(1.1)'}},children:profile.name?profile.name[0]:'?'}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{fontWeight:700,flex:1,textOverflow:'ellipsis',overflow:'hidden',whiteSpace:'nowrap'},children:profile.name||profile.username||profile.user_id}),/*#__PURE__*/_jsx(Tooltip,{title:\"Mood\",children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:24,marginLeft:8},children:analyzeMood(profile.previous_messages||[])})}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',ml:1},children:[/*#__PURE__*/_jsx(Tooltip,{title:selectedForCompare?'Remove from comparison':'Select for comparison',children:/*#__PURE__*/_jsxs(IconButton,{\"aria-label\":\"Select for comparison\",onClick:()=>onCompare(profile.user_id),size:\"small\",sx:{color:selectedForCompare?'primary.main':'inherit','&:hover':{backgroundColor:'rgba(102, 126, 234, 0.08)',color:selectedForCompare?'primary.main':'inherit'}},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedForCompare,readOnly:true,style:{display:'none'}}),/*#__PURE__*/_jsx(CompareArrowsIcon,{fontSize:\"small\"})]})}),/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"More actions\",onClick:e=>openMenu(e.currentTarget,profile),size:\"small\",sx:{'&:hover':{backgroundColor:'rgba(102, 126, 234, 0.08)',color:'inherit'}},children:/*#__PURE__*/_jsx(MoreVertIcon,{})})]})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:1,sx:{mb:1,flexWrap:'wrap'},children:[profile.likes&&profile.likes[0]&&/*#__PURE__*/_jsx(Chip,{label:profile.likes[0],color:\"secondary\",size:\"small\"}),profile.personality_tags&&profile.personality_tags[0]&&/*#__PURE__*/_jsx(Chip,{label:profile.personality_tags[0],color:\"primary\",size:\"small\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{opacity:0.8,mb:1,display:'-webkit-box',WebkitLineClamp:2,WebkitBoxOrient:'vertical',overflow:'hidden',textOverflow:'ellipsis'},children:profile.bio||'No bio set.'}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:2,mb:1},children:[/*#__PURE__*/_jsx(CircularProgressWithLabel,{value:compatibility}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{fontWeight:600},children:\"Compatibility\"})]}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',gap:1,flexWrap:'wrap',mb:1},children:profile.conversation_goals&&profile.conversation_goals[0]&&/*#__PURE__*/_jsx(Chip,{label:profile.conversation_goals[0],color:\"success\",size:\"small\"})}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{color:'var(--text-secondary)',textOverflow:'ellipsis',overflow:'hidden',whiteSpace:'nowrap',display:'block'},children:[\"Relationship Status: \",compatibility>70?'Strong':compatibility>30?'Developing':'New']}),/*#__PURE__*/_jsx(IconButton,{onClick:()=>onExpand(profile.user_id),\"aria-expanded\":isExpanded,\"aria-controls\":`profile-details-${profile.user_id}`,sx:{position:'absolute',right:8,bottom:8,zIndex:2,bgcolor:'rgba(255,255,255,0.7)',boxShadow:1,transition:'bgcolor 0.2s','&:hover':{bgcolor:'rgba(255,255,255,0.9)'}},size:\"small\",children:isExpanded?/*#__PURE__*/_jsx(ExpandLessIcon,{}):/*#__PURE__*/_jsx(ExpandMoreIcon,{})}),/*#__PURE__*/_jsxs(Box,{id:`profile-details-${profile.user_id}`,sx:{maxHeight:isExpanded?320:0,overflowY:isExpanded?'auto':'hidden',overflowX:'hidden',transition:'max-height 0.4s cubic-bezier(0.4,0,0.2,1)',opacity:isExpanded?1:0,pointerEvents:isExpanded?'auto':'none',mt:isExpanded?2:0},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",sx:{mb:1},children:\"Quick Facts\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{mb:1},children:[\"Age: \",profile.age||'N/A',\" | Gender: \",profile.gender||'N/A']}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",sx:{mb:1},children:\"Interests\"}),profile.likes&&profile.likes[0]&&/*#__PURE__*/_jsx(Chip,{label:profile.likes[0],color:\"secondary\",size:\"small\",sx:{mb:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",sx:{mb:1},children:\"Personality\"}),profile.personality_tags&&profile.personality_tags[0]&&/*#__PURE__*/_jsx(Chip,{label:profile.personality_tags[0],color:\"primary\",size:\"small\",sx:{mb:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",sx:{mb:1},children:\"Inside Joke\"}),profile.inside_jokes&&profile.inside_jokes[0]&&/*#__PURE__*/_jsx(Chip,{label:profile.inside_jokes[0],color:\"info\",size:\"small\",sx:{mb:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",sx:{mb:1},children:\"Goal\"}),profile.conversation_goals&&profile.conversation_goals[0]&&/*#__PURE__*/_jsx(Chip,{label:profile.conversation_goals[0],color:\"success\",size:\"small\",sx:{mb:1}}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',gap:1,mt:2},children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"small\",onClick:()=>handleExportProfile(profile),\"aria-label\":\"Export profile\",children:\"Export\"})})]})]})})});});const openMenu=(anchor,profile)=>{setMenuAnchor(anchor);setMenuProfile(profile);};const closeMenu=()=>{setMenuAnchor(null);setMenuProfile(null);};const handleMenuEdit=()=>{handleEdit(menuProfile);closeMenu();};const handleMenuDelete=()=>{handleDeleteClick(menuProfile);closeMenu();};return/*#__PURE__*/_jsxs(Box,{sx:{p:{xs:1,md:3},maxWidth:1400,mx:'auto',position:'relative'},children:[/*#__PURE__*/_jsxs(Box,{sx:{position:'sticky',top:0,zIndex:10,display:'flex',alignItems:'center',gap:2,mb:3,bgcolor:'rgba(255,255,255,0.7)',backdropFilter:'blur(8px)',borderRadius:2,px:2,py:1,boxShadow:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",sx:{flex:1},children:\"Profiles\"}),/*#__PURE__*/_jsx(TextField,{inputRef:searchInputRef,value:search,onChange:e=>setSearch(e.target.value),placeholder:\"Search by name\",size:\"small\",sx:{minWidth:180},inputProps:{'aria-label':'Search profiles by name'}}),/*#__PURE__*/_jsxs(TextField,{select:true,value:filterInterest,onChange:e=>setFilterInterest(e.target.value),size:\"small\",sx:{minWidth:160},displayEmpty:true,inputProps:{'aria-label':'Filter by interest'},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:\"All Interests\"}),allInterests.map((interest,i)=>/*#__PURE__*/_jsx(MenuItem,{value:interest,children:interest},i))]}),/*#__PURE__*/_jsx(Button,{startIcon:/*#__PURE__*/_jsx(FilterListIcon,{}),onClick:handleFilterClick,variant:\"outlined\",sx:{fontWeight:600},children:\"Sort\"}),/*#__PURE__*/_jsxs(Button,{variant:\"outlined\",color:\"secondary\",disabled:selectedProfiles.length<2,onClick:openCompareModal,sx:{ml:1},children:[\"Compare (\",selectedProfiles.length,\")\"]}),/*#__PURE__*/_jsxs(Menu,{anchorEl:filterAnchor,open:Boolean(filterAnchor),onClose:handleFilterClose,PaperProps:{sx:{'& .MuiMenuItem-root':{'&:hover':{backgroundColor:'rgba(102, 126, 234, 0.08)',color:'inherit'}}}},children:[/*#__PURE__*/_jsx(MenuItem,{onClick:()=>handleSortChange('compatibility'),sx:{'&:hover':{backgroundColor:'rgba(102, 126, 234, 0.08) !important',color:'inherit !important'}},children:\"Most Compatible\"}),/*#__PURE__*/_jsx(MenuItem,{onClick:()=>handleSortChange('recent'),sx:{'&:hover':{backgroundColor:'rgba(102, 126, 234, 0.08) !important',color:'inherit !important'}},children:\"Most Recent\"}),/*#__PURE__*/_jsx(MenuItem,{onClick:()=>handleSortChange('name'),sx:{'&:hover':{backgroundColor:'rgba(102, 126, 234, 0.08) !important',color:'inherit !important'}},children:\"A-Z Name\"})]})]}),mainUser&&/*#__PURE__*/_jsx(Box,{sx:{mb:4},children:/*#__PURE__*/_jsx(ProfileCard,{profile:mainUser,isExpanded:expandedProfile===mainUser.user_id,onExpand:handleExpand,onStar:toggleStar,onCompare:toggleCompare,starred:starred.includes(mainUser.user_id),selectedForCompare:selectedProfiles.includes(mainUser.user_id),loading:false,openMenu:openMenu})}),/*#__PURE__*/_jsx(Box,{sx:{display:'grid',gridTemplateColumns:{xs:'1fr',sm:'1fr 1fr',md:'1fr 1fr 1fr'},gap:3,width:'100%',pb:8},children:loading?Array.from({length:6}).map((_,i)=>/*#__PURE__*/_jsx(ProfileCard,{loading:true},i)):otherProfiles.map(profile=>/*#__PURE__*/_jsx(ProfileCard,{profile:profile,isExpanded:expandedProfile===profile.user_id,onExpand:handleExpand,onStar:toggleStar,onCompare:toggleCompare,starred:starred.includes(profile.user_id),selectedForCompare:selectedProfiles.includes(profile.user_id),loading:false,openMenu:openMenu},profile.user_id))}),/*#__PURE__*/_jsx(Fab,{color:\"primary\",\"aria-label\":\"Add New Profile\",onClick:handleAddProfile,sx:{position:'fixed',bottom:32,right:32,zIndex:1202,boxShadow:6,transition:'transform 0.3s','&:hover':{transform:'scale(1.08)'}},children:/*#__PURE__*/_jsx(AddIcon,{})}),/*#__PURE__*/_jsxs(Menu,{anchorEl:quickActionAnchor,open:Boolean(quickActionAnchor),onClose:closeQuickActions,PaperProps:{sx:{'& .MuiMenuItem-root':{'&:hover':{backgroundColor:'rgba(102, 126, 234, 0.08)',color:'inherit'}}}},children:[/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>{setEditorOpen(true);closeQuickActions();},sx:{'&:hover':{backgroundColor:'rgba(102, 126, 234, 0.08) !important',color:'inherit !important'}},children:[/*#__PURE__*/_jsx(EditIcon,{fontSize:\"small\",sx:{mr:1}}),\"Edit Profile\"]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>{/* TODO: Quick Message */closeQuickActions();},sx:{'&:hover':{backgroundColor:'rgba(102, 126, 234, 0.08) !important',color:'inherit !important'}},children:[/*#__PURE__*/_jsx(MessageIcon,{fontSize:\"small\",sx:{mr:1}}),\"Quick Message\"]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>{/* TODO: Compare */closeQuickActions();},sx:{'&:hover':{backgroundColor:'rgba(102, 126, 234, 0.08) !important',color:'inherit !important'}},children:[/*#__PURE__*/_jsx(CompareArrowsIcon,{fontSize:\"small\",sx:{mr:1}}),\"Compare\"]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>{setDeleteDialogOpen(true);closeQuickActions();},sx:{color:'error.main','&:hover':{backgroundColor:'rgba(244, 67, 54, 0.08) !important',color:'error.main !important'}},children:[/*#__PURE__*/_jsx(DeleteIcon,{fontSize:\"small\",sx:{mr:1}}),\"Delete\"]})]}),/*#__PURE__*/_jsx(ProfileEditor,{profile:selected,open:editorOpen,onClose:()=>setEditorOpen(false),onSave:handleSave}),/*#__PURE__*/_jsx(ImportConversationDialog,{open:importDialogOpen,onClose:()=>setImportDialogOpen(false),onImport:handleImportSuccess}),/*#__PURE__*/_jsx(DeleteConfirmDialog,{open:deleteDialogOpen,onClose:()=>setDeleteDialogOpen(false),onConfirm:handleDeleteConfirm,profileName:(profileToDelete===null||profileToDelete===void 0?void 0:profileToDelete.name)||(profileToDelete===null||profileToDelete===void 0?void 0:profileToDelete.username)||(profileToDelete===null||profileToDelete===void 0?void 0:profileToDelete.user_id)||'Unknown'}),/*#__PURE__*/_jsxs(Dialog,{open:compareOpen,onClose:closeCompareModal,maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Profile Comparison\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(Box,{sx:{display:'flex',gap:2,flexWrap:'wrap'},children:selectedProfiles.map(user_id=>{const p=profiles.find(x=>x.user_id===user_id);if(!p)return null;const analytics=getAnalytics(p);return/*#__PURE__*/_jsxs(Card,{sx:{minWidth:220,flex:1,p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:p.name}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Compatibility: \",computeCompatibility(p),\"%\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Total Messages: \",analytics.total]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Avg. Response: \",analytics.avgResponse?`${analytics.avgResponse} min`:'N/A']})]},user_id);})})}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:closeCompareModal,children:\"Close\"})})]}),/*#__PURE__*/_jsxs(Menu,{anchorEl:menuAnchor,open:Boolean(menuAnchor),onClose:closeMenu,PaperProps:{sx:{'& .MuiMenuItem-root':{'&:hover':{backgroundColor:'rgba(102, 126, 234, 0.08)',color:'inherit'}}}},children:[/*#__PURE__*/_jsx(MenuItem,{onClick:handleMenuEdit,sx:{'&:hover':{backgroundColor:'rgba(102, 126, 234, 0.08) !important',color:'inherit !important'}},children:\"Edit\"}),menuProfile&&!menuProfile.is_me&&menuProfile.user_id!=='me'&&/*#__PURE__*/_jsx(MenuItem,{onClick:handleMenuDelete,sx:{color:'error.main','&:hover':{backgroundColor:'rgba(244, 67, 54, 0.08) !important',color:'error.main !important'}},children:\"Delete\"})]})]});}export default Profiles;","map":{"version":3,"names":["React","useEffect","useState","useRef","memo","useCallback","useMemo","Box","Typography","Card","CardContent","Button","TextField","Chip","Stack","Dialog","DialogTitle","DialogContent","DialogActions","Tooltip","Avatar","CircularProgress","Fab","Menu","MenuItem","IconButton","Alert","Skeleton","Add","AddIcon","Delete","DeleteIcon","Edit","EditIcon","FilterList","FilterListIcon","Star","StarIcon","Message","MessageIcon","CompareArrows","CompareArrowsIcon","MoreVert","MoreVertIcon","CloudUpload","CloudUploadIcon","ExpandMore","ExpandMoreIcon","ExpandLess","ExpandLessIcon","profilesAPI","debounce","memoize","performanceMonitor","axios","jsx","_jsx","jsxs","_jsxs","analyzeMood","messages","lastMsgs","slice","map","m","_m$text","text","toLowerCase","join","test","computeCompatibility","profile","_profile$likes","_profile$personality_","_profile$inside_jokes","_profile$previous_mes","likes","length","personality","personality_tags","jokes","inside_jokes","msgs","previous_messages","score","Math","min","round","EditableChips","_ref","label","values","onChange","input","setInput","sx","mb","children","variant","direction","spacing","flexWrap","v","i","onDelete","filter","_","idx","size","value","e","target","onKeyDown","key","trim","placeholder","getTopEmojiAndWord","_Object$entries$sort$","_Object$entries$sort$2","from","emojiRegex","emojis","match","emojiCounts","forEach","topEmoji","Object","entries","sort","a","b","words","wordCounts","w","topWord","ProfileEditor","_ref2","open","onClose","onSave","edit","setEdit","maxWidth","fullWidth","PaperProps","backgroundColor","color","BackdropProps","name","username","user_id","overflowY","maxHeight","pt","mt","InputLabelProps","shrink","bio","multiline","rows","age","gender","conversation_goals","JSON","stringify","details","parse","minRows","onClick","ImportConversationDialog","_ref3","onImport","file","setFile","profileName","setProfileName","loading","setLoading","error","setError","preview","setPreview","handleFileChange","event","selectedFile","files","reader","FileReader","onload","data","result","fileName","replace","charAt","toUpperCase","err","readAsText","handleImport","formData","FormData","append","response","post","headers","_err$response","_err$response$data","severity","accept","style","display","id","type","htmlFor","component","startIcon","py","gutterBottom","overflow","border","borderRadius","p","bgcolor","msg","fontFamily","fontSize","disabled","DeleteConfirmDialog","_ref4","onConfirm","CircularProgressWithLabel","_ref5","position","alignItems","thickness","top","left","bottom","right","justifyContent","fontWeight","Profiles","profiles","setProfiles","selected","setSelected","editorOpen","setEditorOpen","importDialogOpen","setImportDialogOpen","deleteDialogOpen","setDeleteDialogOpen","profileToDelete","setProfileToDelete","filterAnchor","setFilterAnchor","setSort","search","setSearch","debouncedSearch","expandedProfile","setExpandedProfile","filterInterest","setFilterInterest","searchInputRef","selectedProfiles","setSelectedProfiles","compareOpen","setCompareOpen","starred","setStarred","localStorage","getItem","menuAnchor","setMenuAnchor","menuProfile","setMenuProfile","toggleStar","newStarred","includes","setItem","toggleCompare","prev","openCompareModal","closeCompareModal","fetchProfiles","start","getAll","console","log","Array","isArray","end","filteredAndSortedProfiles","warn","filtered","some","like","_b$previous_messages","_a$previous_messages","localeCompare","mainUser","otherProfiles","main","find","is_me","others","handleAddProfile","handleFilterClick","currentTarget","handleFilterClose","handleSortChange","val","quickActionAnchor","setQuickActionAnchor","quickActionProfile","setQuickActionProfile","openQuickActions","closeQuickActions","handleExpand","current","setAttribute","touchStartX","touchProfile","handleTouchStart","touches","clientX","handleTouchEnd","dx","changedTouches","document","body","getCardGradient","getCardSize","isExpanded","minWidth","minHeight","allInterests","Set","flatMap","Boolean","handleEdit","handleSave","put","get","handleImportSuccess","newProfile","handleDeleteClick","handleDeleteConfirm","alert","delete","getAnalytics","days","timestamp","day","split","responseTimes","lastMe","t1","Date","getTime","t2","isNaN","push","abs","avgResponse","reduce","total","handleExportProfile","dataStr","encodeURIComponent","dlAnchor","createElement","appendChild","click","remove","ProfileCard","_ref6","onExpand","onStar","onCompare","selectedForCompare","openMenu","breakInside","width","boxShadow","height","my","mood","compatibility","cardSize","analytics","transition","opacity","background","transform","outline","tabIndex","pb","mr","flex","textOverflow","whiteSpace","title","marginLeft","ml","checked","readOnly","WebkitLineClamp","WebkitBoxOrient","gap","zIndex","overflowX","pointerEvents","anchor","closeMenu","handleMenuEdit","handleMenuDelete","xs","md","mx","backdropFilter","px","inputRef","inputProps","select","displayEmpty","interest","anchorEl","gridTemplateColumns","sm","x"],"sources":["/workspace/frontend/src/pages/Profiles.js"],"sourcesContent":["import React, { useEffect, useState, useRef, memo, useCallback, useMemo } from 'react';\nimport { \n  Box, Typography, Card, CardContent, Button, TextField, Chip, Stack, \n  Dialog, DialogTitle, DialogContent, DialogActions, Tooltip, Avatar, \n  CircularProgress, Fab, Menu, MenuItem, IconButton, Alert, Skeleton \n} from '@mui/material';\nimport { \n  Add as AddIcon, Delete as DeleteIcon, Edit as EditIcon, FilterList as FilterListIcon, \n  Star as StarIcon, Message as MessageIcon, CompareArrows as CompareArrowsIcon, \n  MoreVert as MoreVertIcon, CloudUpload as CloudUploadIcon, \n  ExpandMore as ExpandMoreIcon, ExpandLess as ExpandLessIcon \n} from '@mui/icons-material';\nimport { profilesAPI } from '../utils/api';\nimport { debounce, memoize, performanceMonitor } from '../utils/performance';\n\nimport axios from 'axios';\n\n\n\n// Memoized mood analysis for better performance\nconst analyzeMood = memoize((messages) => {\n  const lastMsgs = (messages || []).slice(-5).map(m => m.text?.toLowerCase() || '').join(' ');\n  if (/love|amazing|great|happy|fun|ðŸ˜|ðŸ˜„|ðŸ˜Š|ðŸ˜˜|flirt|kiss|cute|hot|babe|sweet/.test(lastMsgs)) return 'ðŸ˜';\n  if (/angry|mad|annoy|hate|ðŸ˜ |ðŸ˜¡|wtf|ugh/.test(lastMsgs)) return 'ðŸ˜ ';\n  if (/sad|cry|miss|lonely|ðŸ˜¢|ðŸ˜­/.test(lastMsgs)) return 'ðŸ˜¢';\n  if (/ok|fine|alright|neutral|meh|ðŸ˜/.test(lastMsgs)) return 'ðŸ˜';\n  return 'ðŸ˜„';\n});\n\n// Memoized compatibility calculation\nconst computeCompatibility = memoize((profile) => {\n  const likes = profile.likes?.length || 0;\n  const personality = profile.personality_tags?.length || 0;\n  const jokes = profile.inside_jokes?.length || 0;\n  const msgs = profile.previous_messages?.length || 0;\n  let score = likes * 2 + personality * 2 + jokes * 3 + Math.min(msgs, 20);\n  score = Math.min(100, Math.round(score));\n  return score;\n});\n\n\n\nfunction EditableChips({ label, values, onChange }) {\n  const [input, setInput] = useState('');\n  return (\n    <Box sx={{ mb: 2 }}>\n      <Typography variant=\"subtitle2\">{label}</Typography>\n      <Stack direction=\"row\" spacing={1} sx={{ flexWrap: 'wrap', mb: 1 }}>\n        {values.map((v, i) => (\n          <Chip key={i} label={v} onDelete={() => onChange(values.filter((_, idx) => idx !== i))} />\n        ))}\n      </Stack>\n      <TextField size=\"small\" value={input} onChange={e => setInput(e.target.value)} onKeyDown={e => {\n        if (e.key === 'Enter' && input.trim()) {\n          onChange([...values, input.trim()]);\n          setInput('');\n        }\n      }} placeholder={`Add ${label.toLowerCase()}`} />\n    </Box>\n  );\n}\n\n// 1. In ProfileEditor, always show fields for bio, age, and gender for all profiles\n// 2. In compact mode (or in the main card if only detailed mode), instead of inside joke, show top emoji and top word from the person's messages\n// 3. Ensure Edit/Delete are visible in the MoreVert menu (already handled)\n\n// Helper to get top emoji and top word from messages\nfunction getTopEmojiAndWord(messages) {\n  const text = (messages || []).filter(m => m.from !== 'Me').map(m => m.text).join(' ');\n  // Emoji regex\n  const emojiRegex = /[\\p{Emoji}]/gu;\n  const emojis = text.match(emojiRegex) || [];\n  const emojiCounts = {};\n  emojis.forEach(e => { emojiCounts[e] = (emojiCounts[e] || 0) + 1; });\n  const topEmoji = Object.entries(emojiCounts).sort((a, b) => b[1] - a[1])[0]?.[0] || '';\n  // Top word\n  const words = text.toLowerCase().match(/\\b\\w{3,}\\b/g) || [];\n  const wordCounts = {};\n  words.forEach(w => { wordCounts[w] = (wordCounts[w] || 0) + 1; });\n  const topWord = Object.entries(wordCounts).sort((a, b) => b[1] - a[1])[0]?.[0] || '';\n  return { topEmoji, topWord };\n}\n\nfunction ProfileEditor({ profile, open, onClose, onSave }) {\n  const [edit, setEdit] = useState(profile);\n  useEffect(() => { setEdit(profile); }, [profile]);\n  if (!edit) return null;\n  return (\n    <Dialog \n      open={open} \n      onClose={onClose} \n      maxWidth=\"sm\" \n      fullWidth\n      PaperProps={{\n        sx: {\n          backgroundColor: 'white',\n          color: 'black',\n          '& .MuiDialogTitle-root': {\n            backgroundColor: 'white',\n            color: 'black',\n          },\n          '& .MuiDialogContent-root': {\n            backgroundColor: 'white',\n            color: 'black',\n          },\n          '& .MuiDialogActions-root': {\n            backgroundColor: 'white',\n            color: 'black',\n          }\n        }\n      }}\n      BackdropProps={{\n        sx: {\n          backgroundColor: 'rgba(0, 0, 0, 0.2) !important',\n        }\n      }}\n    >\n      <DialogTitle sx={{ backgroundColor: 'white', color: 'black' }}>\n        Edit Profile: {edit.name || edit.username || edit.user_id}\n      </DialogTitle>\n      <DialogContent sx={{ overflowY: 'auto', maxHeight: '70vh', pt: 3, backgroundColor: 'white', color: 'black' }}>\n        <TextField \n          fullWidth \n          size=\"small\" \n          label=\"Name\" \n          value={edit.name || ''} \n          onChange={e => setEdit({ ...edit, name: e.target.value })} \n          sx={{ \n            mt: 2, \n            mb: 2,\n            '& .MuiOutlinedInput-root': {\n              backgroundColor: 'white',\n              color: 'black',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'rgba(0, 0, 0, 0.6)',\n            }\n          }} \n          InputLabelProps={{ shrink: true }} \n        />\n        <TextField \n          fullWidth \n          label=\"Bio\" \n          value={edit.bio || ''} \n          onChange={e => setEdit({ ...edit, bio: e.target.value })} \n          multiline \n          rows={2} \n          sx={{ \n            mb: 2,\n            '& .MuiOutlinedInput-root': {\n              backgroundColor: 'white',\n              color: 'black',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'rgba(0, 0, 0, 0.6)',\n            }\n          }} \n        />\n        <TextField \n          fullWidth \n          label=\"Age\" \n          value={edit.age || ''} \n          onChange={e => setEdit({ ...edit, age: e.target.value })} \n          sx={{ \n            mb: 2,\n            '& .MuiOutlinedInput-root': {\n              backgroundColor: 'white',\n              color: 'black',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'rgba(0, 0, 0, 0.6)',\n            }\n          }} \n        />\n        <TextField \n          fullWidth \n          label=\"Gender\" \n          value={edit.gender || ''} \n          onChange={e => setEdit({ ...edit, gender: e.target.value })} \n          sx={{ \n            mb: 2,\n            '& .MuiOutlinedInput-root': {\n              backgroundColor: 'white',\n              color: 'black',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'rgba(0, 0, 0, 0.6)',\n            }\n          }} \n        />\n        <EditableChips label=\"Likes\" values={edit.likes || []} onChange={v => setEdit({ ...edit, likes: v })} />\n        <EditableChips label=\"Personality Tags\" values={edit.personality_tags || []} onChange={v => setEdit({ ...edit, personality_tags: v })} />\n        <EditableChips label=\"Inside Jokes\" values={edit.inside_jokes || []} onChange={v => setEdit({ ...edit, inside_jokes: v })} />\n        <EditableChips label=\"Conversation Goals\" values={edit.conversation_goals || []} onChange={v => setEdit({ ...edit, conversation_goals: v })} />\n        <TextField \n          fullWidth \n          label=\"Details (JSON)\" \n          value={JSON.stringify(edit.details || {}, null, 2)} \n          onChange={e => {\n            try {\n              setEdit({ ...edit, details: JSON.parse(e.target.value) });\n            } catch { }\n          }} \n          multiline \n          minRows={2} \n          sx={{ \n            mt: 2,\n            '& .MuiOutlinedInput-root': {\n              backgroundColor: 'white',\n              color: 'black',\n            },\n            '& .MuiInputLabel-root': {\n              color: 'rgba(0, 0, 0, 0.6)',\n            }\n          }} \n        />\n      </DialogContent>\n      <DialogActions sx={{ backgroundColor: 'white', color: 'black' }}>\n        <Button \n          onClick={onClose}\n          sx={{\n            color: 'black',\n            '&:hover': {\n              backgroundColor: 'rgba(0, 0, 0, 0.04)',\n            }\n          }}\n        >\n          Cancel\n        </Button>\n        <Button \n          variant=\"contained\" \n          onClick={() => onSave(edit)}\n          sx={{\n            backgroundColor: '#1976d2',\n            color: 'white',\n            '&:hover': {\n              backgroundColor: '#115293',\n            }\n          }}\n        >\n          Save\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction ImportConversationDialog({ open, onClose, onImport }) {\n  const [file, setFile] = useState(null);\n  const [profileName, setProfileName] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [preview, setPreview] = useState(null);\n\n  const handleFileChange = (event) => {\n    const selectedFile = event.target.files[0];\n    if (selectedFile) {\n      if (selectedFile.size > 10 * 1024 * 1024) { // 10MB limit\n        setError('File size must be less than 10MB');\n        return;\n      }\n      \n      const reader = new FileReader();\n      reader.onload = (e) => {\n        try {\n          const data = JSON.parse(e.target.result);\n          setFile(selectedFile);\n          setPreview(data);\n          setError('');\n          \n          // Auto-generate profile name from file name\n          const fileName = selectedFile.name.replace('.json', '').replace(/[_-]/g, ' ');\n          setProfileName(fileName.charAt(0).toUpperCase() + fileName.slice(1));\n        } catch (err) {\n          setError('Invalid JSON file');\n          setFile(null);\n          setPreview(null);\n        }\n      };\n      reader.readAsText(selectedFile);\n    }\n  };\n\n  const handleImport = async () => {\n    if (!file || !profileName.trim()) {\n      setError('Please select a file and enter a profile name');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('profile_name', profileName);\n\n      const response = await axios.post('http://localhost:5000/api/import-conversation', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n\n      onImport(response.data);\n      onClose();\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to import conversation');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onClose={onClose} maxWidth=\"md\" fullWidth>\n      <DialogTitle>Import Conversation from JSON</DialogTitle>\n      <DialogContent>\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n          Upload a JSON file containing conversation messages. The AI will analyze the conversation and extract personality traits, likes, and other preferences.\n        </Typography>\n        \n        <Alert severity=\"info\" sx={{ mb: 2 }}>\n          <strong>File Requirements:</strong>\n          <br />â€¢ Maximum size: 10MB\n          <br />â€¢ Format: JSON with messages array\n          <br />â€¢ Each message should have: from, text, timestamp\n          <br />â€¢ Example: {`[{\"from\": \"Girl\", \"text\": \"Hello!\", \"timestamp\": \"2024-01-01 12:00\"}]`}\n        </Alert>\n\n        <Box sx={{ mb: 2 }}>\n          <input\n            accept=\".json\"\n            style={{ display: 'none' }}\n            id=\"conversation-file\"\n            type=\"file\"\n            onChange={handleFileChange}\n          />\n          <label htmlFor=\"conversation-file\">\n            <Button\n              variant=\"outlined\"\n              component=\"span\"\n              startIcon={<CloudUploadIcon />}\n              fullWidth\n              sx={{ py: 2 }}\n            >\n              {file ? file.name : 'Choose JSON File'}\n            </Button>\n          </label>\n        </Box>\n\n        <TextField\n          fullWidth\n          label=\"Profile Name\"\n          value={profileName}\n          onChange={(e) => setProfileName(e.target.value)}\n          sx={{ mb: 2 }}\n          placeholder=\"Enter a name for this profile\"\n        />\n\n        {preview && (\n          <Box sx={{ mb: 2 }}>\n            <Typography variant=\"subtitle2\" gutterBottom>Preview:</Typography>\n            <Box sx={{ \n              maxHeight: 200, \n              overflow: 'auto', \n              border: '1px solid #e0e0e0', \n              borderRadius: 1, \n              p: 1,\n              bgcolor: '#f5f5f5'\n            }}>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                {preview.messages ? `${preview.messages.length} messages found` : 'No messages array found'}\n              </Typography>\n              {preview.messages && preview.messages.slice(0, 3).map((msg, idx) => (\n                <Typography key={idx} variant=\"body2\" sx={{ fontFamily: 'monospace', fontSize: '0.8rem' }}>\n                  {msg.from}: {msg.text}\n                </Typography>\n              ))}\n              {preview.messages && preview.messages.length > 3 && (\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  ... and {preview.messages.length - 3} more messages\n                </Typography>\n              )}\n            </Box>\n          </Box>\n        )}\n\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} disabled={loading}>Cancel</Button>\n        <Button \n          variant=\"contained\" \n          onClick={handleImport} \n          disabled={loading || !file || !profileName.trim()}\n          startIcon={loading ? <CircularProgress size={20} /> : <AddIcon />}\n        >\n          {loading ? 'Analyzing...' : 'Import & Analyze'}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction DeleteConfirmDialog({ open, onClose, onConfirm, profileName }) {\n  return (\n    <Dialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\n      <DialogTitle>Delete Profile</DialogTitle>\n      <DialogContent>\n        <Typography variant=\"body1\">\n          Are you sure you want to delete the profile \"{profileName}\"?\n        </Typography>\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n          This action cannot be undone. All conversation history and profile data will be permanently removed.\n        </Typography>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Cancel</Button>\n        <Button onClick={onConfirm} color=\"error\" variant=\"contained\">\n          Delete Profile\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction CircularProgressWithLabel({ value }) {\n  return (\n    <Box sx={{ position: 'relative', display: 'inline-flex', alignItems: 'center' }}>\n      <CircularProgress variant=\"determinate\" value={value} size={48} thickness={5} sx={{ color: value > 70 ? 'var(--primary-coral)' : 'var(--accent-blue)' }} />\n      <Box sx={{\n        top: 0, left: 0, bottom: 0, right: 0, position: 'absolute', display: 'flex', alignItems: 'center', justifyContent: 'center',\n      }}>\n        <Typography variant=\"caption\" component=\"div\" color=\"text.primary\" sx={{ fontWeight: 700 }}>{`${Math.round(value)}%`}</Typography>\n      </Box>\n    </Box>\n  );\n}\n\nfunction Profiles() {\n  const [profiles, setProfiles] = useState([]);\n  const [selected, setSelected] = useState(null);\n  const [editorOpen, setEditorOpen] = useState(false);\n  const [importDialogOpen, setImportDialogOpen] = useState(false);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [profileToDelete, setProfileToDelete] = useState(null);\n  const [filterAnchor, setFilterAnchor] = useState(null);\n  const [sort, setSort] = useState('compatibility');\n  const [search, setSearch] = useState('');\n  \n  // Debounced search for better performance\n  const debouncedSearch = useCallback(\n    debounce((value) => {\n      setSearch(value);\n    }, 300),\n    []\n  );\n  const [expandedProfile, setExpandedProfile] = useState(null);\n  const [filterInterest, setFilterInterest] = useState('all');\n  const searchInputRef = useRef();\n  const [selectedProfiles, setSelectedProfiles] = useState([]); // for comparison\n  const [compareOpen, setCompareOpen] = useState(false);\n  const [starred, setStarred] = useState(() => JSON.parse(localStorage.getItem('starredProfiles') || '[]'));\n  const [loading, setLoading] = useState(true);\n  const [menuAnchor, setMenuAnchor] = useState(null);\n  const [menuProfile, setMenuProfile] = useState(null);\n  const [error, setError] = useState(null);\n\n  // Star/prioritize logic\n  const toggleStar = (user_id) => {\n    let newStarred;\n    if (starred.includes(user_id)) {\n      newStarred = starred.filter(id => id !== user_id);\n    } else {\n      newStarred = [...starred, user_id];\n    }\n    setStarred(newStarred);\n    localStorage.setItem('starredProfiles', JSON.stringify(newStarred));\n  };\n\n  // Add to comparison\n  const toggleCompare = (user_id) => {\n    setSelectedProfiles(prev => prev.includes(user_id) ? prev.filter(id => id !== user_id) : [...prev, user_id]);\n  };\n  const openCompareModal = () => setCompareOpen(true);\n  const closeCompareModal = () => setCompareOpen(false);\n\n  // Optimized data fetching with error handling\n  useEffect(() => {\n      const fetchProfiles = async () => {\n    try {\n      performanceMonitor.start('fetchProfiles');\n      setLoading(true);\n      const data = await profilesAPI.getAll();\n      \n      // Debug: Log what we received\n      console.log('API response:', data);\n      console.log('Data type:', typeof data);\n      console.log('Is array:', Array.isArray(data));\n      \n      // Ensure data is an array\n      if (!Array.isArray(data)) {\n        console.error('API returned non-array data:', data);\n        setError('Invalid data format received from server.');\n        setProfiles([]);\n        return;\n      }\n      \n      setProfiles(data);\n      performanceMonitor.end('fetchProfiles');\n    } catch (error) {\n      console.error('Failed to fetch profiles:', error);\n      setError('Failed to load profiles. Please try again.');\n      setProfiles([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n    fetchProfiles();\n  }, []);\n\n  // Memoized filtering and sorting for better performance\n  const filteredAndSortedProfiles = useMemo(() => {\n    // Ensure profiles is an array\n    if (!Array.isArray(profiles)) {\n      console.warn('Profiles is not an array:', profiles);\n      return [];\n    }\n    \n    let filtered = [...profiles];\n    \n    // Search filter\n    if (search.trim()) {\n      filtered = filtered.filter(p => (p.name || '').toLowerCase().includes(search.toLowerCase()));\n    }\n    \n    // Interest filter\n    if (filterInterest && filterInterest !== 'all') {\n      filtered = filtered.filter(p => (p.likes || []).some(like => like.toLowerCase().includes(filterInterest.toLowerCase())));\n    }\n    \n    // Sort starred first\n    if (starred.length > 0) {\n      filtered = [\n        ...filtered.filter(p => starred.includes(p.user_id)),\n        ...filtered.filter(p => !starred.includes(p.user_id)),\n      ];\n    }\n    \n    // Apply sorting\n    return filtered.sort((a, b) => {\n      if (sort === 'compatibility') return computeCompatibility(b) - computeCompatibility(a);\n      if (sort === 'recent') return (b.previous_messages?.length || 0) - (a.previous_messages?.length || 0);\n      if (sort === 'name') return (a.name || '').localeCompare(b.name || '');\n      return 0;\n    });\n  }, [profiles, search, filterInterest, starred, sort]);\n\n  // Memoized profile separation\n  const { mainUser, otherProfiles } = useMemo(() => {\n    const main = filteredAndSortedProfiles.find(p => p.is_me || p.user_id === 'me');\n    const others = filteredAndSortedProfiles.filter(p => !(p.is_me || p.user_id === 'me'));\n    return { mainUser: main, otherProfiles: others };\n  }, [filteredAndSortedProfiles]);\n\n  // Floating Add Profile button\n  const handleAddProfile = () => setImportDialogOpen(true);\n\n  // Floating filter bar\n  const handleFilterClick = (e) => setFilterAnchor(e.currentTarget);\n  const handleFilterClose = () => setFilterAnchor(null);\n  const handleSortChange = (val) => { setSort(val); setFilterAnchor(null); };\n\n  // Card quick actions\n  const [quickActionAnchor, setQuickActionAnchor] = useState(null);\n  const [quickActionProfile, setQuickActionProfile] = useState(null);\n  const openQuickActions = (e, profile) => { setQuickActionAnchor(e.currentTarget); setQuickActionProfile(profile); };\n  const closeQuickActions = () => { setQuickActionAnchor(null); setQuickActionProfile(null); };\n\n  // Expand/collapse profile card\n  const handleExpand = (user_id) => setExpandedProfile(expandedProfile === user_id ? null : user_id);\n\n  // Accessibility: focus search on mount\n  useEffect(() => {\n    if (searchInputRef.current) searchInputRef.current.setAttribute('aria-label', 'Search profiles by name');\n  }, []);\n\n  // Swipe gesture support (archive, message, view full profile)\n  // Only for touch devices\n  const touchStartX = useRef(null);\n  const touchProfile = useRef(null);\n  const handleTouchStart = (e, profile) => {\n    touchStartX.current = e.touches[0].clientX;\n    touchProfile.current = profile;\n  };\n  const handleTouchEnd = (e) => {\n    if (!touchStartX.current || !touchProfile.current) return;\n    const dx = e.changedTouches[0].clientX - touchStartX.current;\n    if (dx > 80) {\n      // Swipe right: Quick Message\n      setQuickActionProfile(touchProfile.current);\n      setQuickActionAnchor(document.body); // open menu at body\n    } else if (dx < -80) {\n      // Swipe left: Archive (not implemented)\n      // TODO: Archive action\n    }\n    touchStartX.current = null;\n    touchProfile.current = null;\n  };\n\n  // Card header gradient by personality\n  function getCardGradient(profile) {\n    if (profile.is_me || profile.user_id === 'me') return 'linear-gradient(135deg, #6c63ff 0%, #ff6b6b 100%)';\n    if (computeCompatibility(profile) > 70) return 'linear-gradient(135deg, #ffb6b9 0%, #ff6b6b 100%)';\n    if (computeCompatibility(profile) < 30) return 'linear-gradient(135deg, #b2ebf2 0%, #6c63ff 100%)';\n    return 'linear-gradient(135deg, #f8bbd0 0%, #b2ebf2 100%)';\n  }\n\n  // 1. Make all cards the same fixed width and height in the grid (e.g., minWidth: 340, maxWidth: 340, minHeight: 260, maxHeight: 260)\n  // 2. When expanded, allow height to grow (maxHeight: none, minHeight: 260)\n  // 3. Use ellipsis for text overflow, wrap where appropriate\n  // 4. Keep all buttons in their correct, visually appealing places\n  // 5. Polish layout for beauty and alignment\n  function getCardSize(profile, isExpanded) {\n    if (isExpanded) {\n      return { minWidth: 380, maxWidth: 380, minHeight: 260, maxHeight: 'none' };\n    }\n    return { minWidth: 380, maxWidth: 380, minHeight: 260, maxHeight: 260 };\n  }\n\n  // Collect all unique interests for filter dropdown\n  const allInterests = Array.from(new Set(profiles.flatMap(p => p.likes || []))).filter(Boolean);\n\n  // Restore handleSave, handleImportSuccess, handleDeleteConfirm\n  const handleEdit = (profile) => {\n    setSelected(profile);\n    setEditorOpen(true);\n  };\n  const handleSave = async (profile) => {\n    if (profile.is_me || profile.user_id === 'me') {\n      // Update user profile instead of regular profile\n      await axios.put('http://localhost:5000/api/user', profile);\n    } else {\n      // Update regular profile\n    await axios.put(`http://localhost:5000/api/profiles/${profile.user_id}`, profile);\n    }\n    // Refresh profiles to get updated data\n    const response = await axios.get('http://localhost:5000/api/profiles');\n    setProfiles(response.data);\n    setEditorOpen(false);\n  };\n  const handleImportSuccess = async (newProfile) => {\n    // Refresh profiles to include the new imported profile\n    const response = await axios.get('http://localhost:5000/api/profiles');\n    setProfiles(response.data);\n  };\n  const handleDeleteClick = (profile) => {\n    setProfileToDelete(profile);\n    setDeleteDialogOpen(true);\n  };\n  const handleDeleteConfirm = async () => {\n    if (!profileToDelete) return;\n    try {\n      if (profileToDelete.is_me || profileToDelete.user_id === 'me') {\n        // Don't allow deleting user profile\n        alert('Cannot delete your own profile');\n        return;\n      }\n      // Delete the profile\n      await axios.delete(`http://localhost:5000/api/profiles/${profileToDelete.user_id}`);\n      // Refresh profiles\n      const response = await axios.get('http://localhost:5000/api/profiles');\n      setProfiles(response.data);\n      setDeleteDialogOpen(false);\n      setProfileToDelete(null);\n    } catch (error) {\n      console.error('Error deleting profile:', error);\n      alert('Failed to delete profile');\n    }\n  };\n\n  // Profile analytics helpers\n  function getAnalytics(profile) {\n    const msgs = profile.previous_messages || [];\n    const days = {};\n    msgs.forEach(m => {\n      if (m.timestamp) {\n        const day = m.timestamp.split(' ')[0];\n        days[day] = (days[day] || 0) + 1;\n      }\n    });\n    const responseTimes = [];\n    let lastMe = null;\n    msgs.forEach(m => {\n      if (m.from === 'Me') lastMe = m;\n      else if (lastMe && m.timestamp && lastMe.timestamp) {\n        const t1 = new Date(lastMe.timestamp).getTime();\n        const t2 = new Date(m.timestamp).getTime();\n        if (!isNaN(t1) && !isNaN(t2)) responseTimes.push(Math.abs(t2 - t1) / 60000); // in minutes\n        lastMe = null;\n      }\n    });\n    return {\n      days,\n      avgResponse: responseTimes.length ? Math.round(responseTimes.reduce((a, b) => a + b, 0) / responseTimes.length) : null,\n      total: msgs.length,\n    };\n  }\n\n  // Export/share profile\n  const handleExportProfile = (profile) => {\n    // Export as JSON (placeholder)\n    const dataStr = 'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(profile, null, 2));\n    const dlAnchor = document.createElement('a');\n    dlAnchor.setAttribute('href', dataStr);\n    dlAnchor.setAttribute('download', `${profile.name || profile.user_id}.json`);\n    document.body.appendChild(dlAnchor);\n    dlAnchor.click();\n    dlAnchor.remove();\n  };\n\n  // Memoized ProfileCard for performance\n  const ProfileCard = memo(({ profile, isExpanded, onExpand, onStar, onCompare, starred, selectedForCompare, loading, openMenu }) => {\n    if (loading) {\n  return (\n        <Box sx={{ breakInside: 'avoid', mb: 3, width: '100%', display: 'inline-block' }}>\n          <Card sx={{ minHeight: 180, mb: 2, boxShadow: 3, borderRadius: 3 }}>\n            <CardContent>\n              <Skeleton variant=\"circular\" width={44} height={44} />\n              <Skeleton variant=\"text\" width=\"60%\" height={32} />\n              <Skeleton variant=\"rectangular\" width=\"100%\" height={24} sx={{ my: 1 }} />\n              <Skeleton variant=\"rectangular\" width=\"100%\" height={16} />\n            </CardContent>\n          </Card>\n        </Box>\n      );\n    }\n          const mood = analyzeMood(profile.previous_messages || []);\n    const compatibility = computeCompatibility(profile);\n    const cardSize = getCardSize(profile, isExpanded);\n    const analytics = getAnalytics(profile);\n    const { topEmoji, topWord } = getTopEmojiAndWord(profile.previous_messages);\n    // Compact mode: minimal info\n    // Grid mode: avatar and name only, very small\n    // Detailed mode (default)\n          return (\n      <Box sx={{ breakInside: 'avoid', mb: 3, width: '100%', display: 'inline-block', transition: 'box-shadow 0.3s, transform 0.3s, opacity 0.5s', opacity: loading ? 0.5 : 1, position: 'relative' }}>\n        <Card\n          sx={{\n            ...cardSize,\n            height: isExpanded ? 'auto' : 260,\n            mb: 2,\n            boxShadow: 3,\n            background: getCardGradient(profile),\n            color: compatibility > 70 ? 'white' : 'var(--text-primary)',\n            border: compatibility > 70 ? '2px solid var(--primary-coral)' : '1px solid #e0e0e0',\n            position: 'relative',\n            overflow: 'visible',\n            transition: 'box-shadow 0.3s, transform 0.3s',\n            '&:hover, &:focus': { boxShadow: 8, transform: 'translateY(-4px) scale(1.03)', outline: '2px solid var(--accent-blue)' },\n          }}\n          tabIndex={0}\n          aria-label={`Profile: ${profile.name}`}\n        >\n          <CardContent sx={{ pb: 6, position: 'relative', minHeight: 180 }}>\n                <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n              <IconButton \n                aria-label={starred ? 'Unstar profile' : 'Star profile'} \n                onClick={() => onStar(profile.user_id)} \n                color={starred ? 'warning' : 'default'}\n                sx={{\n                  '&:hover': {\n                    backgroundColor: 'rgba(102, 126, 234, 0.08)',\n                    color: starred ? 'warning.main' : 'inherit'\n                  }\n                }}\n              >\n                <StarIcon />\n              </IconButton>\n              <Avatar sx={{ mr: 2, width: 44, height: 44, fontSize: 22, bgcolor: compatibility > 70 ? 'white' : 'var(--accent-blue)', color: compatibility > 70 ? 'var(--accent-blue)' : 'white', boxShadow: 2, transition: 'transform 0.3s', '&:hover': { transform: 'scale(1.1)' } }}>{profile.name ? profile.name[0] : '?'}</Avatar>\n              <Typography variant=\"h6\" sx={{ fontWeight: 700, flex: 1, textOverflow: 'ellipsis', overflow: 'hidden', whiteSpace: 'nowrap' }}>{profile.name || profile.username || profile.user_id}</Typography>\n              {/* Mood emoji only */}\n              <Tooltip title=\"Mood\"><span style={{ fontSize: 24, marginLeft: 8 }}>{analyzeMood(profile.previous_messages || [])}</span></Tooltip>\n              {/* Compare checkbox and MoreVert menu grouped */}\n              <Box sx={{ display: 'flex', alignItems: 'center', ml: 1 }}>\n                <Tooltip title={selectedForCompare ? 'Remove from comparison' : 'Select for comparison'}>\n                                  <IconButton \n                  aria-label=\"Select for comparison\" \n                  onClick={() => onCompare(profile.user_id)} \n                  size=\"small\" \n                  sx={{ \n                    color: selectedForCompare ? 'primary.main' : 'inherit',\n                    '&:hover': {\n                      backgroundColor: 'rgba(102, 126, 234, 0.08)',\n                      color: selectedForCompare ? 'primary.main' : 'inherit'\n                    }\n                  }}\n                >\n                  <input type=\"checkbox\" checked={selectedForCompare} readOnly style={{ display: 'none' }} />\n                  <CompareArrowsIcon fontSize=\"small\" />\n                </IconButton>\n                </Tooltip>\n                <IconButton \n                  aria-label=\"More actions\" \n                  onClick={e => openMenu(e.currentTarget, profile)} \n                  size=\"small\"\n                  sx={{\n                    '&:hover': {\n                      backgroundColor: 'rgba(102, 126, 234, 0.08)',\n                      color: 'inherit'\n                    }\n                  }}\n                >\n                  <MoreVertIcon />\n                </IconButton>\n              </Box>\n            </Box>\n            <Stack direction=\"row\" spacing={1} sx={{ mb: 1, flexWrap: 'wrap' }}>\n              {(profile.likes && profile.likes[0]) && <Chip label={profile.likes[0]} color=\"secondary\" size=\"small\" />}\n              {(profile.personality_tags && profile.personality_tags[0]) && <Chip label={profile.personality_tags[0]} color=\"primary\" size=\"small\" />}\n            </Stack>\n            <Typography variant=\"body2\" sx={{ opacity: 0.8, mb: 1, display: '-webkit-box', WebkitLineClamp: 2, WebkitBoxOrient: 'vertical', overflow: 'hidden', textOverflow: 'ellipsis' }}>{profile.bio || 'No bio set.'}</Typography>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 1 }}>\n              <CircularProgressWithLabel value={compatibility} />\n              <Typography variant=\"caption\" sx={{ fontWeight: 600 }}>Compatibility</Typography>\n            </Box>\n            <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap', mb: 1 }}>\n              {(profile.conversation_goals && profile.conversation_goals[0]) && <Chip label={profile.conversation_goals[0]} color=\"success\" size=\"small\" />}\n            </Box>\n            <Typography variant=\"caption\" sx={{ color: 'var(--text-secondary)', textOverflow: 'ellipsis', overflow: 'hidden', whiteSpace: 'nowrap', display: 'block' }}>Relationship Status: {compatibility > 70 ? 'Strong' : compatibility > 30 ? 'Developing' : 'New'}</Typography>\n            {/* Show Details Button - bottom right */}\n            <IconButton\n              onClick={() => onExpand(profile.user_id)}\n              aria-expanded={isExpanded}\n              aria-controls={`profile-details-${profile.user_id}`}\n              sx={{ position: 'absolute', right: 8, bottom: 8, zIndex: 2, bgcolor: 'rgba(255,255,255,0.7)', boxShadow: 1, transition: 'bgcolor 0.2s', '&:hover': { bgcolor: 'rgba(255,255,255,0.9)' } }}\n              size=\"small\"\n            >\n              {isExpanded ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n            </IconButton>\n            {/* Expandable Section */}\n            <Box\n              id={`profile-details-${profile.user_id}`}\n              sx={{\n                maxHeight: isExpanded ? 320 : 0,\n                overflowY: isExpanded ? 'auto' : 'hidden',\n                overflowX: 'hidden',\n                transition: 'max-height 0.4s cubic-bezier(0.4,0,0.2,1)',\n                opacity: isExpanded ? 1 : 0,\n                pointerEvents: isExpanded ? 'auto' : 'none',\n                mt: isExpanded ? 2 : 0,\n              }}\n            >\n              <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>Quick Facts</Typography>\n              <Typography variant=\"body2\" sx={{ mb: 1 }}>Age: {profile.age || 'N/A'} | Gender: {profile.gender || 'N/A'}</Typography>\n              <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>Interests</Typography>\n              {(profile.likes && profile.likes[0]) && <Chip label={profile.likes[0]} color=\"secondary\" size=\"small\" sx={{ mb: 1 }} />}\n              <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>Personality</Typography>\n              {(profile.personality_tags && profile.personality_tags[0]) && <Chip label={profile.personality_tags[0]} color=\"primary\" size=\"small\" sx={{ mb: 1 }} />}\n              <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>Inside Joke</Typography>\n              {(profile.inside_jokes && profile.inside_jokes[0]) && <Chip label={profile.inside_jokes[0]} color=\"info\" size=\"small\" sx={{ mb: 1 }} />}\n              <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>Goal</Typography>\n              {(profile.conversation_goals && profile.conversation_goals[0]) && <Chip label={profile.conversation_goals[0]} color=\"success\" size=\"small\" sx={{ mb: 1 }} />}\n              {/* Export only */}\n              <Box sx={{ display: 'flex', gap: 1, mt: 2 }}>\n                <Button variant=\"outlined\" size=\"small\" onClick={() => handleExportProfile(profile)} aria-label=\"Export profile\">Export</Button>\n                </Box>\n                </Box>\n              </CardContent>\n            </Card>\n      </Box>\n    );\n  });\n\n  const openMenu = (anchor, profile) => { setMenuAnchor(anchor); setMenuProfile(profile); };\n  const closeMenu = () => { setMenuAnchor(null); setMenuProfile(null); };\n  const handleMenuEdit = () => { handleEdit(menuProfile); closeMenu(); };\n  const handleMenuDelete = () => { handleDeleteClick(menuProfile); closeMenu(); };\n\n  return (\n    <Box sx={{ p: { xs: 1, md: 3 }, maxWidth: 1400, mx: 'auto', position: 'relative' }}>\n      {/* Floating Filter/Sort/Search Bar with Compare Button */}\n      <Box sx={{ position: 'sticky', top: 0, zIndex: 10, display: 'flex', alignItems: 'center', gap: 2, mb: 3, bgcolor: 'rgba(255,255,255,0.7)', backdropFilter: 'blur(8px)', borderRadius: 2, px: 2, py: 1, boxShadow: 1 }}>\n        <Typography variant=\"h4\" sx={{ flex: 1 }}>Profiles</Typography>\n        <TextField\n          inputRef={searchInputRef}\n          value={search}\n          onChange={e => setSearch(e.target.value)}\n          placeholder=\"Search by name\"\n          size=\"small\"\n          sx={{ minWidth: 180 }}\n          inputProps={{ 'aria-label': 'Search profiles by name' }}\n        />\n        <TextField\n          select\n          value={filterInterest}\n          onChange={e => setFilterInterest(e.target.value)}\n          size=\"small\"\n          sx={{ minWidth: 160 }}\n          displayEmpty\n          inputProps={{ 'aria-label': 'Filter by interest' }}\n        >\n          <MenuItem value=\"all\">All Interests</MenuItem>\n          {allInterests.map((interest, i) => (\n            <MenuItem key={i} value={interest}>{interest}</MenuItem>\n          ))}\n        </TextField>\n        <Button startIcon={<FilterListIcon />} onClick={handleFilterClick} variant=\"outlined\" sx={{ fontWeight: 600 }}>Sort</Button>\n        <Button variant=\"outlined\" color=\"secondary\" disabled={selectedProfiles.length < 2} onClick={openCompareModal} sx={{ ml: 1 }}>Compare ({selectedProfiles.length})</Button>\n        <Menu \n          anchorEl={filterAnchor} \n          open={Boolean(filterAnchor)} \n          onClose={handleFilterClose}\n          PaperProps={{\n            sx: {\n              '& .MuiMenuItem-root': {\n                '&:hover': {\n                  backgroundColor: 'rgba(102, 126, 234, 0.08)',\n                  color: 'inherit'\n                }\n              }\n            }\n          }}\n        >\n          <MenuItem \n            onClick={() => handleSortChange('compatibility')}\n            sx={{ \n              '&:hover': { \n                backgroundColor: 'rgba(102, 126, 234, 0.08) !important',\n                color: 'inherit !important'\n              }\n            }}\n          >\n            Most Compatible\n          </MenuItem>\n          <MenuItem \n            onClick={() => handleSortChange('recent')}\n            sx={{ \n              '&:hover': { \n                backgroundColor: 'rgba(102, 126, 234, 0.08) !important',\n                color: 'inherit !important'\n              }\n            }}\n          >\n            Most Recent\n          </MenuItem>\n          <MenuItem \n            onClick={() => handleSortChange('name')}\n            sx={{ \n              '&:hover': { \n                backgroundColor: 'rgba(102, 126, 234, 0.08) !important',\n                color: 'inherit !important'\n              }\n            }}\n          >\n            A-Z Name\n          </MenuItem>\n        </Menu>\n      </Box>\n      {/* Main User Profile Card */}\n      {mainUser && (\n        <Box sx={{ mb: 4 }}>\n          <ProfileCard\n            profile={mainUser}\n            isExpanded={expandedProfile === mainUser.user_id}\n            onExpand={handleExpand}\n            onStar={toggleStar}\n            onCompare={toggleCompare}\n            starred={starred.includes(mainUser.user_id)}\n            selectedForCompare={selectedProfiles.includes(mainUser.user_id)}\n            loading={false}\n            openMenu={openMenu}\n          />\n        </Box>\n      )}\n      {/* Masonry Grid Layout with only detailed ProfileCard */}\n      <Box sx={{\n        display: 'grid',\n        gridTemplateColumns: { xs: '1fr', sm: '1fr 1fr', md: '1fr 1fr 1fr' },\n        gap: 3,\n        width: '100%',\n        pb: 8,\n      }}>\n        {loading\n          ? Array.from({ length: 6 }).map((_, i) => <ProfileCard key={i} loading />)\n          : otherProfiles.map(profile => (\n              <ProfileCard\n                key={profile.user_id}\n                profile={profile}\n                isExpanded={expandedProfile === profile.user_id}\n                onExpand={handleExpand}\n                onStar={toggleStar}\n                onCompare={toggleCompare}\n                starred={starred.includes(profile.user_id)}\n                selectedForCompare={selectedProfiles.includes(profile.user_id)}\n                loading={false}\n                openMenu={openMenu}\n              />\n            ))}\n      </Box>\n\n      {/* Floating Add Profile Button */}\n      <Fab color=\"primary\" aria-label=\"Add New Profile\" onClick={handleAddProfile} sx={{ position: 'fixed', bottom: 32, right: 32, zIndex: 1202, boxShadow: 6, transition: 'transform 0.3s', '&:hover': { transform: 'scale(1.08)' } }}>\n        <AddIcon />\n      </Fab>\n\n      {/* Quick Actions Menu */}\n      <Menu \n        anchorEl={quickActionAnchor} \n        open={Boolean(quickActionAnchor)} \n        onClose={closeQuickActions}\n        PaperProps={{\n          sx: {\n            '& .MuiMenuItem-root': {\n              '&:hover': {\n                backgroundColor: 'rgba(102, 126, 234, 0.08)',\n                color: 'inherit'\n              }\n            }\n          }\n        }}\n      >\n        <MenuItem \n          onClick={() => { setEditorOpen(true); closeQuickActions(); }}\n          sx={{ \n            '&:hover': { \n              backgroundColor: 'rgba(102, 126, 234, 0.08) !important',\n              color: 'inherit !important'\n            }\n          }}\n        >\n          <EditIcon fontSize=\"small\" sx={{ mr: 1 }} />Edit Profile\n        </MenuItem>\n        <MenuItem \n          onClick={() => { /* TODO: Quick Message */ closeQuickActions(); }}\n          sx={{ \n            '&:hover': { \n              backgroundColor: 'rgba(102, 126, 234, 0.08) !important',\n              color: 'inherit !important'\n            }\n          }}\n        >\n          <MessageIcon fontSize=\"small\" sx={{ mr: 1 }} />Quick Message\n        </MenuItem>\n        <MenuItem \n          onClick={() => { /* TODO: Compare */ closeQuickActions(); }}\n          sx={{ \n            '&:hover': { \n              backgroundColor: 'rgba(102, 126, 234, 0.08) !important',\n              color: 'inherit !important'\n            }\n          }}\n        >\n          <CompareArrowsIcon fontSize=\"small\" sx={{ mr: 1 }} />Compare\n        </MenuItem>\n        <MenuItem \n          onClick={() => { setDeleteDialogOpen(true); closeQuickActions(); }} \n          sx={{ \n            color: 'error.main',\n            '&:hover': { \n              backgroundColor: 'rgba(244, 67, 54, 0.08) !important',\n              color: 'error.main !important'\n            }\n          }}\n        >\n          <DeleteIcon fontSize=\"small\" sx={{ mr: 1 }} />Delete\n        </MenuItem>\n      </Menu>\n\n      {/* Profile Editor, Import, Delete Dialogs (unchanged) */}\n      <ProfileEditor profile={selected} open={editorOpen} onClose={() => setEditorOpen(false)} onSave={handleSave} />\n      <ImportConversationDialog \n        open={importDialogOpen} \n        onClose={() => setImportDialogOpen(false)} \n        onImport={handleImportSuccess} \n      />\n      <DeleteConfirmDialog \n        open={deleteDialogOpen} \n        onClose={() => setDeleteDialogOpen(false)} \n        onConfirm={handleDeleteConfirm}\n        profileName={profileToDelete?.name || profileToDelete?.username || profileToDelete?.user_id || 'Unknown'}\n      />\n\n      {/* Profile Comparison Modal */}\n      <Dialog open={compareOpen} onClose={closeCompareModal} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Profile Comparison</DialogTitle>\n        <DialogContent>\n          <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap' }}>\n            {selectedProfiles.map(user_id => {\n              const p = profiles.find(x => x.user_id === user_id);\n              if (!p) return null;\n              const analytics = getAnalytics(p);\n              return (\n                <Card key={user_id} sx={{ minWidth: 220, flex: 1, p: 2 }}>\n                  <Typography variant=\"h6\">{p.name}</Typography>\n                  <Typography variant=\"body2\">Compatibility: {computeCompatibility(p)}%</Typography>\n                  <Typography variant=\"body2\">Total Messages: {analytics.total}</Typography>\n                  <Typography variant=\"body2\">Avg. Response: {analytics.avgResponse ? `${analytics.avgResponse} min` : 'N/A'}</Typography>\n                </Card>\n              );\n            })}\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={closeCompareModal}>Close</Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* MoreVert Menu */}\n      <Menu \n        anchorEl={menuAnchor} \n        open={Boolean(menuAnchor)} \n        onClose={closeMenu}\n        PaperProps={{\n          sx: {\n            '& .MuiMenuItem-root': {\n              '&:hover': {\n                backgroundColor: 'rgba(102, 126, 234, 0.08)',\n                color: 'inherit'\n              }\n            }\n          }\n        }}\n      >\n        <MenuItem \n          onClick={handleMenuEdit}\n          sx={{ \n            '&:hover': { \n              backgroundColor: 'rgba(102, 126, 234, 0.08) !important',\n              color: 'inherit !important'\n            }\n          }}\n        >\n          Edit\n        </MenuItem>\n        {menuProfile && !menuProfile.is_me && menuProfile.user_id !== 'me' && (\n          <MenuItem \n            onClick={handleMenuDelete} \n            sx={{ \n              color: 'error.main',\n              '&:hover': { \n                backgroundColor: 'rgba(244, 67, 54, 0.08) !important',\n                color: 'error.main !important'\n              }\n            }}\n          >\n            Delete\n          </MenuItem>\n        )}\n      </Menu>\n    </Box>\n  );\n}\n\nexport default Profiles; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}