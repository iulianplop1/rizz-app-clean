{"ast":null,"code":"import React,{useEffect,useState,Suspense}from'react';import{useNavigate}from'react-router-dom';import{Avatar,Box,Typography,CircularProgress,Tooltip,IconButton}from'@mui/material';import DeleteIcon from'@mui/icons-material/Delete';import BarChartIcon from'@mui/icons-material/BarChart';import ReplyIcon from'@mui/icons-material/Reply';import{profilesAPI}from'../utils/api';import{Tooltip as MuiTooltip}from'@mui/material';// Typing indicator component\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TypingIndicator(){return/*#__PURE__*/_jsxs(\"div\",{className:\"typing-indicator\",\"aria-label\":\"AI is typing\",style:{display:'flex',gap:2,alignItems:'center',marginTop:8},children:[/*#__PURE__*/_jsx(\"span\",{style:{width:8,height:8,borderRadius:'50%',background:'var(--accent-blue)',display:'inline-block',marginRight:2}}),/*#__PURE__*/_jsx(\"span\",{style:{width:8,height:8,borderRadius:'50%',background:'var(--accent-blue)',display:'inline-block',marginRight:2}}),/*#__PURE__*/_jsx(\"span\",{style:{width:8,height:8,borderRadius:'50%',background:'var(--accent-blue)',display:'inline-block'}})]});}// Suggestion card (structure only)\nfunction SuggestionCard(_ref){let{text,onClick}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"suggestion-card card glass-element\",tabIndex:0,role:\"button\",\"aria-label\":`Suggest: ${text}`,onClick:onClick,style:{padding:16,margin:8,cursor:'pointer',transition:'box-shadow 0.3s, transform 0.3s',willChange:'transform'},children:/*#__PURE__*/_jsx(\"p\",{style:{margin:0},children:text})});}function analyzeMood(messages){const lastMsgs=messages.slice(-5).map(m=>m.text.toLowerCase()).join(' ');if(/love|amazing|great|happy|fun|üòç|üòÑ|üòä|üòò|flirt|kiss|cute|hot|babe|sweet/.test(lastMsgs))return'üòè';if(/angry|mad|annoy|hate|üò†|üò°|wtf|ugh/.test(lastMsgs))return'üò†';if(/sad|cry|miss|lonely|üò¢|üò≠/.test(lastMsgs))return'üò¢';if(/ok|fine|alright|neutral|meh|üòê/.test(lastMsgs))return'üòê';return'üòÑ';}function computeCompatibility(profile){var _profile$likes,_profile$personality_,_profile$inside_jokes,_profile$previous_mes;const likes=((_profile$likes=profile.likes)===null||_profile$likes===void 0?void 0:_profile$likes.length)||0;const personality=((_profile$personality_=profile.personality_tags)===null||_profile$personality_===void 0?void 0:_profile$personality_.length)||0;const jokes=((_profile$inside_jokes=profile.inside_jokes)===null||_profile$inside_jokes===void 0?void 0:_profile$inside_jokes.length)||0;const msgs=((_profile$previous_mes=profile.previous_messages)===null||_profile$previous_mes===void 0?void 0:_profile$previous_mes.length)||0;let score=likes*2+personality*2+jokes*3+Math.min(msgs,20);score=Math.min(100,Math.round(score));return score;}function getLastMessage(profile){const msgs=profile.previous_messages||[];return msgs.length>0?msgs[msgs.length-1].text:'';}function getLastMessageTime(profile){const msgs=profile.previous_messages||[];if(msgs.length===0)return'';const lastMsg=msgs[msgs.length-1];if(!lastMsg.timestamp)return'';// Parse timestamp (handle 'YYYY-MM-DD HH:mm' or ISO)\nlet msgTime;if(lastMsg.timestamp.includes('T')){msgTime=new Date(lastMsg.timestamp);}else{// Replace dashes with slashes for Safari compatibility\nmsgTime=new Date(lastMsg.timestamp.replace(/-/g,'/'));}const now=new Date();const diffMs=now-msgTime;const diffMins=Math.floor(diffMs/60000);if(diffMins<1)return'just now';if(diffMins<60)return`${diffMins} min ago`;const diffHrs=Math.floor(diffMins/60);if(diffHrs<24)return`${diffHrs}h ago`;const diffDays=Math.floor(diffHrs/24);return`${diffDays}d ago`;}function Inbox(){const[profiles,setProfiles]=useState([]);const[userProfile,setUserProfile]=useState(null);const[aiThinking,setAiThinking]=useState(false);const[suggestions]=useState(['Ask about their weekend','Send a compliment','Share a funny meme']);const navigate=useNavigate();useEffect(()=>{const fetchProfiles=async()=>{try{const data=await profilesAPI.getAll();if(Array.isArray(data)){setProfiles(data.filter(p=>!p.is_me&&p.user_id!=='me'));setUserProfile(data.find(p=>p.is_me||p.user_id==='me'));}else{console.error('API returned non-array data:',data);setProfiles([]);}}catch(error){console.error('Failed to fetch profiles:',error);setProfiles([]);}};fetchProfiles();const interval=setInterval(fetchProfiles,3000);return()=>clearInterval(interval);},[]);// Placeholder for swipe gestures and live activity indicators\n// (To be implemented in a future phase)\nconst moodNames={'üòè':'Flirty','üò†':'Angry','üò¢':'Sad','üòê':'Neutral','üòÑ':'Happy'};return/*#__PURE__*/_jsxs(\"main\",{className:\"container\",style:{maxWidth:1200,margin:'0 auto',paddingTop:24},children:[/*#__PURE__*/_jsxs(\"section\",{className:\"glass-element\",style:{margin:'0 auto 32px auto',padding:'32px 24px',borderRadius:16,textAlign:'center',maxWidth:700,boxShadow:'0 2px 12px 0 rgba(0,0,0,0.04)'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{marginBottom:8},children:\"AI Wingman\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--text-secondary)',fontSize:18,margin:0},children:\"Your smart dating assistant. Start a conversation or dive back in.\"})]}),/*#__PURE__*/_jsx(\"section\",{className:\"conversation-grid\",children:/*#__PURE__*/_jsxs(Suspense,{fallback:/*#__PURE__*/_jsx(CircularProgress,{}),children:[\" \",profiles.map(profile=>{const emoji=analyzeMood(profile.previous_messages||[]);const compatibility=computeCompatibility(profile);const lastMsg=getLastMessage(profile);const lastMsgTime=getLastMessageTime(profile);return/*#__PURE__*/_jsxs(\"article\",{className:\"conversation-card card glass-element\",tabIndex:0,\"aria-label\":`Conversation with ${profile.name}`,style:{position:'relative',minHeight:220,maxHeight:260,display:'flex',flexDirection:'column',justifyContent:'space-between',padding:24,transition:'box-shadow 0.3s, transform 0.3s, background 0.3s',zIndex:1,willChange:'transform'},onClick:()=>navigate(`/inbox/${profile.user_id}`),onKeyDown:e=>{if(e.key==='Enter')navigate(`/inbox/${profile.user_id}`);},role:\"button\",children:[/*#__PURE__*/_jsxs(\"header\",{style:{display:'flex',alignItems:'center',marginBottom:8},children:[/*#__PURE__*/_jsx(Avatar,{sx:{width:44,height:44,fontSize:22,bgcolor:'var(--accent-blue)',color:'white',mr:2},children:profile.name?profile.name[0]:'?'}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginBottom:0},children:profile.name||profile.username||profile.user_id}),/*#__PURE__*/_jsxs(\"span\",{className:\"compatibility-score\",style:{color:'var(--primary-coral)',fontWeight:600,fontSize:16},children:[compatibility,\"% match\"]})]}),/*#__PURE__*/_jsx(MuiTooltip,{title:moodNames[emoji]||'Mood',arrow:true,placement:\"top\",children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:28,marginLeft:8},children:emoji})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",style:{flex:1,minHeight:32,maxHeight:40,overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap',color:'var(--text-secondary)',fontSize:15,marginBottom:8},children:lastMsg}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-indicator\",\"aria-label\":\"Relationship progress\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",style:{width:`${compatibility}%`,background:compatibility>70?'var(--primary-coral)':'var(--accent-blue)'}})}),/*#__PURE__*/_jsxs(\"footer\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',marginTop:12},children:[/*#__PURE__*/_jsx(\"span\",{className:\"time-ago\",style:{color:'var(--text-secondary)',fontSize:13},children:lastMsgTime}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-actions\",style:{display:'flex',gap:8},children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Reply\",arrow:true,children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"Reply\",size:\"small\",tabIndex:-1,children:/*#__PURE__*/_jsx(ReplyIcon,{fontSize:\"small\"})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Analytics\",arrow:true,children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"Analytics\",size:\"small\",tabIndex:-1,onClick:e=>{e.stopPropagation();navigate(`/analytics/${profile.user_id}`);},children:/*#__PURE__*/_jsx(BarChartIcon,{fontSize:\"small\"})})})]})]}),aiThinking&&/*#__PURE__*/_jsx(TypingIndicator,{})]},profile.user_id);})]})})]});}export default Inbox;","map":{"version":3,"names":["React","useEffect","useState","Suspense","useNavigate","Avatar","Box","Typography","CircularProgress","Tooltip","IconButton","DeleteIcon","BarChartIcon","ReplyIcon","profilesAPI","MuiTooltip","jsx","_jsx","jsxs","_jsxs","TypingIndicator","className","style","display","gap","alignItems","marginTop","children","width","height","borderRadius","background","marginRight","SuggestionCard","_ref","text","onClick","tabIndex","role","padding","margin","cursor","transition","willChange","analyzeMood","messages","lastMsgs","slice","map","m","toLowerCase","join","test","computeCompatibility","profile","_profile$likes","_profile$personality_","_profile$inside_jokes","_profile$previous_mes","likes","length","personality","personality_tags","jokes","inside_jokes","msgs","previous_messages","score","Math","min","round","getLastMessage","getLastMessageTime","lastMsg","timestamp","msgTime","includes","Date","replace","now","diffMs","diffMins","floor","diffHrs","diffDays","Inbox","profiles","setProfiles","userProfile","setUserProfile","aiThinking","setAiThinking","suggestions","navigate","fetchProfiles","data","getAll","Array","isArray","filter","p","is_me","user_id","find","console","error","interval","setInterval","clearInterval","moodNames","maxWidth","paddingTop","textAlign","boxShadow","marginBottom","color","fontSize","fallback","emoji","compatibility","lastMsgTime","name","position","minHeight","maxHeight","flexDirection","justifyContent","zIndex","onKeyDown","e","key","sx","bgcolor","mr","flex","username","fontWeight","title","arrow","placement","marginLeft","overflow","textOverflow","whiteSpace","size","stopPropagation"],"sources":["/workspace/frontend/src/pages/Inbox.js"],"sourcesContent":["import React, { useEffect, useState, Suspense } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Avatar, Box, Typography, CircularProgress, Tooltip, IconButton } from '@mui/material';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport BarChartIcon from '@mui/icons-material/BarChart';\nimport ReplyIcon from '@mui/icons-material/Reply';\nimport { profilesAPI } from '../utils/api';\nimport { Tooltip as MuiTooltip } from '@mui/material';\n\n// Typing indicator component\nfunction TypingIndicator() {\n  return (\n    <div className=\"typing-indicator\" aria-label=\"AI is typing\" style={{ display: 'flex', gap: 2, alignItems: 'center', marginTop: 8 }}>\n      <span style={{ width: 8, height: 8, borderRadius: '50%', background: 'var(--accent-blue)', display: 'inline-block', marginRight: 2 }}></span>\n      <span style={{ width: 8, height: 8, borderRadius: '50%', background: 'var(--accent-blue)', display: 'inline-block', marginRight: 2 }}></span>\n      <span style={{ width: 8, height: 8, borderRadius: '50%', background: 'var(--accent-blue)', display: 'inline-block' }}></span>\n    </div>\n  );\n}\n\n// Suggestion card (structure only)\nfunction SuggestionCard({ text, onClick }) {\n  return (\n    <div className=\"suggestion-card card glass-element\" tabIndex={0} role=\"button\" aria-label={`Suggest: ${text}`} onClick={onClick} style={{ padding: 16, margin: 8, cursor: 'pointer', transition: 'box-shadow 0.3s, transform 0.3s', willChange: 'transform' }}>\n      <p style={{ margin: 0 }}>{text}</p>\n    </div>\n  );\n}\n\nfunction analyzeMood(messages) {\n  const lastMsgs = messages.slice(-5).map(m => m.text.toLowerCase()).join(' ');\n  if (/love|amazing|great|happy|fun|üòç|üòÑ|üòä|üòò|flirt|kiss|cute|hot|babe|sweet/.test(lastMsgs)) return 'üòè';\n  if (/angry|mad|annoy|hate|üò†|üò°|wtf|ugh/.test(lastMsgs)) return 'üò†';\n  if (/sad|cry|miss|lonely|üò¢|üò≠/.test(lastMsgs)) return 'üò¢';\n  if (/ok|fine|alright|neutral|meh|üòê/.test(lastMsgs)) return 'üòê';\n  return 'üòÑ';\n}\n\nfunction computeCompatibility(profile) {\n  const likes = profile.likes?.length || 0;\n  const personality = profile.personality_tags?.length || 0;\n  const jokes = profile.inside_jokes?.length || 0;\n  const msgs = profile.previous_messages?.length || 0;\n  let score = likes * 2 + personality * 2 + jokes * 3 + Math.min(msgs, 20);\n  score = Math.min(100, Math.round(score));\n  return score;\n}\n\nfunction getLastMessage(profile) {\n  const msgs = profile.previous_messages || [];\n  return msgs.length > 0 ? msgs[msgs.length - 1].text : '';\n}\n\nfunction getLastMessageTime(profile) {\n  const msgs = profile.previous_messages || [];\n  if (msgs.length === 0) return '';\n  const lastMsg = msgs[msgs.length - 1];\n  if (!lastMsg.timestamp) return '';\n  // Parse timestamp (handle 'YYYY-MM-DD HH:mm' or ISO)\n  let msgTime;\n  if (lastMsg.timestamp.includes('T')) {\n    msgTime = new Date(lastMsg.timestamp);\n  } else {\n    // Replace dashes with slashes for Safari compatibility\n    msgTime = new Date(lastMsg.timestamp.replace(/-/g, '/'));\n  }\n  const now = new Date();\n  const diffMs = now - msgTime;\n  const diffMins = Math.floor(diffMs / 60000);\n  if (diffMins < 1) return 'just now';\n  if (diffMins < 60) return `${diffMins} min ago`;\n  const diffHrs = Math.floor(diffMins / 60);\n  if (diffHrs < 24) return `${diffHrs}h ago`;\n  const diffDays = Math.floor(diffHrs / 24);\n  return `${diffDays}d ago`;\n}\n\nfunction Inbox() {\n  const [profiles, setProfiles] = useState([]);\n  const [userProfile, setUserProfile] = useState(null);\n  const [aiThinking, setAiThinking] = useState(false);\n  const [suggestions] = useState([\n    'Ask about their weekend',\n    'Send a compliment',\n    'Share a funny meme',\n  ]);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchProfiles = async () => {\n      try {\n        const data = await profilesAPI.getAll();\n        if (Array.isArray(data)) {\n          setProfiles(data.filter(p => !p.is_me && p.user_id !== 'me'));\n          setUserProfile(data.find(p => p.is_me || p.user_id === 'me'));\n        } else {\n          console.error('API returned non-array data:', data);\n          setProfiles([]);\n        }\n      } catch (error) {\n        console.error('Failed to fetch profiles:', error);\n        setProfiles([]);\n      }\n    };\n    fetchProfiles();\n    const interval = setInterval(fetchProfiles, 3000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Placeholder for swipe gestures and live activity indicators\n  // (To be implemented in a future phase)\n\n  const moodNames = {\n    'üòè': 'Flirty',\n    'üò†': 'Angry',\n    'üò¢': 'Sad',\n    'üòê': 'Neutral',\n    'üòÑ': 'Happy',\n  };\n\n  return (\n    <main className=\"container\" style={{ maxWidth: 1200, margin: '0 auto', paddingTop: 24 }}>\n      {/* Hero Banner */}\n      <section className=\"glass-element\" style={{ margin: '0 auto 32px auto', padding: '32px 24px', borderRadius: 16, textAlign: 'center', maxWidth: 700, boxShadow: '0 2px 12px 0 rgba(0,0,0,0.04)' }}>\n        <h1 style={{ marginBottom: 8 }}>AI Wingman</h1>\n        <p style={{ color: 'var(--text-secondary)', fontSize: 18, margin: 0 }}>\n          Your smart dating assistant. Start a conversation or dive back in.\n        </p>\n      </section>\n\n      {/* Conversation Grid */}\n      <section className=\"conversation-grid\">\n        <Suspense fallback={<CircularProgress />}> {/* Lazy loading placeholder */}\n          {profiles.map(profile => {\n            const emoji = analyzeMood(profile.previous_messages || []);\n            const compatibility = computeCompatibility(profile);\n            const lastMsg = getLastMessage(profile);\n            const lastMsgTime = getLastMessageTime(profile);\n            return (\n              <article\n                className=\"conversation-card card glass-element\"\n                tabIndex={0}\n                aria-label={`Conversation with ${profile.name}`}\n                key={profile.user_id}\n                style={{\n                  position: 'relative',\n                  minHeight: 220,\n                  maxHeight: 260,\n                  display: 'flex',\n                  flexDirection: 'column',\n                  justifyContent: 'space-between',\n                  padding: 24,\n                  transition: 'box-shadow 0.3s, transform 0.3s, background 0.3s',\n                  zIndex: 1,\n                  willChange: 'transform',\n                }}\n                onClick={() => navigate(`/inbox/${profile.user_id}`)}\n                onKeyDown={e => { if (e.key === 'Enter') navigate(`/inbox/${profile.user_id}`); }}\n                role=\"button\"\n              >\n                <header style={{ display: 'flex', alignItems: 'center', marginBottom: 8 }}>\n                  <Avatar sx={{ width: 44, height: 44, fontSize: 22, bgcolor: 'var(--accent-blue)', color: 'white', mr: 2 }}>\n                    {profile.name ? profile.name[0] : '?'}\n                  </Avatar>\n                  <div style={{ flex: 1 }}>\n                    <h3 style={{ marginBottom: 0 }}>{profile.name || profile.username || profile.user_id}</h3>\n                    <span className=\"compatibility-score\" style={{ color: 'var(--primary-coral)', fontWeight: 600, fontSize: 16 }}>{compatibility}% match</span>\n                  </div>\n                  <MuiTooltip title={moodNames[emoji] || 'Mood'} arrow placement=\"top\">\n                    <span style={{ fontSize: 28, marginLeft: 8 }}>{emoji}</span>\n                  </MuiTooltip>\n                </header>\n                <div className=\"card-body\" style={{ flex: 1, minHeight: 32, maxHeight: 40, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap', color: 'var(--text-secondary)', fontSize: 15, marginBottom: 8 }}>\n                  {lastMsg}\n                </div>\n                <div className=\"progress-indicator\" aria-label=\"Relationship progress\">\n                  <div className=\"progress-bar\" style={{ width: `${compatibility}%`, background: compatibility > 70 ? 'var(--primary-coral)' : 'var(--accent-blue)' }}></div>\n                </div>\n                <footer style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginTop: 12 }}>\n                  <span className=\"time-ago\" style={{ color: 'var(--text-secondary)', fontSize: 13 }}>{lastMsgTime}</span>\n                  <div className=\"quick-actions\" style={{ display: 'flex', gap: 8 }}>\n                    <Tooltip title=\"Reply\" arrow><IconButton aria-label=\"Reply\" size=\"small\" tabIndex={-1}><ReplyIcon fontSize=\"small\" /></IconButton></Tooltip>\n                    <Tooltip title=\"Analytics\" arrow>\n                      <IconButton\n                        aria-label=\"Analytics\"\n                        size=\"small\"\n                        tabIndex={-1}\n                        onClick={e => { e.stopPropagation(); navigate(`/analytics/${profile.user_id}`); }}\n                      >\n                        <BarChartIcon fontSize=\"small\" />\n                      </IconButton>\n                    </Tooltip>\n                  </div>\n                </footer>\n                {/* Typing indicator (example, show if aiThinking) */}\n                {aiThinking && <TypingIndicator />}\n              </article>\n            );\n          })}\n        </Suspense>\n      </section>\n    </main>\n  );\n}\n\nexport default Inbox; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}